<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Verification - Facts & Fakes AI</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="/static/css/news-main.css">
    <link rel="stylesheet" href="/static/css/news-components.css">
    <link rel="stylesheet" href="/static/css/news-specialized.css">
    <link rel="stylesheet" href="/static/css/new-responsiveness.css">
    
    <style>
        /* Additional styles for the updated input section */
        .input-tab {
            position: relative;
            padding: 15px 20px;
            font-size: 16px;
            font-weight: 600;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .input-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        
        .input-tab.active {
            background: #007bff;
            color: white;
        }
        
        .url-input {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            margin-bottom: 10px;
        }
        
        .article-textarea {
            width: 100%;
            padding: 12px;
            font-size: 16px;
            border: 2px solid #ddd;
            border-radius: 8px;
            resize: vertical;
        }
        
        .analyze-btn {
            background: #007bff;
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin: 10px auto;
        }
        
        .analyze-btn:hover {
            background: #0056b3;
        }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav>
            <div class="logo">Facts & Fakes AI</div>
            <ul class="nav-links">
                <li><a href="/">Home</a></li>
                <li><a href="/news" class="active">News Analysis</a></li>
                <li><a href="/unified">Text Analysis</a></li>
                <li><a href="/imageanalysis">Image Analysis</a></li>
                <li><a href="/contact">Contact</a></li>
            </ul>
        </nav>
    </header>

    <!-- Main Content -->
    <main>
        <div class="container">
            <!-- Hero Section -->
            <div class="hero-section">
                <h1>AI-Powered News Verification</h1>
                <p>Analyze news articles for bias, credibility, and factual accuracy using advanced AI</p>
            </div>

            <!-- Beta Banner -->
            <div class="beta-banner">
                <span class="beta-tag">BETA</span>
                <span>This tool is in active development. Results are for educational purposes.</span>
            </div>

            <!-- Updated Input Section -->
            <div class="input-section" id="input-section">
                <!-- Add explanatory text above tabs -->
                <div style="
                    text-align: center;
                    margin-bottom: 20px;
                    padding: 15px;
                    background: linear-gradient(135deg, #f8f9fa, #e9ecef);
                    border-radius: 10px;
                    border: 1px solid rgba(0,123,255,0.1);
                ">
                    <h3 style="
                        margin: 0 0 10px 0;
                        color: #2c3e50;
                        font-size: 20px;
                        font-weight: 600;
                    ">Choose Your Analysis Method</h3>
                    <p style="
                        margin: 0;
                        color: #6c757d;
                        font-size: 16px;
                        line-height: 1.5;
                    ">Select how you'd like to analyze news content for bias, credibility, and factual accuracy</p>
                </div>

                <!-- Input tabs - reduced to 2 -->
                <div class="input-tabs">
                    <button class="input-tab active" data-tab="url" style="position: relative;">
                        <span style="font-size: 20px; margin-right: 8px;">üîó</span>
                        URL Verification
                        <span style="
                            display: block;
                            font-size: 12px;
                            color: #6c757d;
                            font-weight: normal;
                            margin-top: 2px;
                        ">Quick analysis from any news website</span>
                    </button>
                    <button class="input-tab" data-tab="full-article" style="position: relative;">
                        <span style="font-size: 20px; margin-right: 8px;">üìÑ</span>
                        Full Article Analysis
                        <span style="
                            display: block;
                            font-size: 12px;
                            color: #6c757d;
                            font-weight: normal;
                            margin-top: 2px;
                        ">Most accurate - paste complete article text</span>
                        <span style="
                            position: absolute;
                            top: 5px;
                            right: 10px;
                            background: #28a745;
                            color: white;
                            font-size: 10px;
                            padding: 2px 6px;
                            border-radius: 3px;
                            font-weight: 600;
                        ">RECOMMENDED</span>
                    </button>
                </div>

                <!-- URL input tab content -->
                <div class="tab-content active" id="url-tab">
                    <div style="
                        background: #f8f9fa;
                        padding: 15px;
                        border-radius: 8px;
                        margin-bottom: 15px;
                        border-left: 4px solid #007bff;
                    ">
                        <p style="margin: 0; color: #495057; font-size: 14px;">
                            <strong>How it works:</strong> Paste a news article URL and our AI will fetch and analyze the content directly from the source. Works with major news websites like CNN, BBC, Reuters, and more.
                        </p>
                    </div>
                    <div class="input-container">
                        <input type="url" 
                               id="articleUrl" 
                               placeholder="https://www.example.com/news-article" 
                               class="url-input"
                               style="
                                   font-family: monospace;
                                   font-size: 14px;
                               ">
                        <button class="analyze-btn" data-tier="pro">
                            <span class="btn-icon">üîç</span> Analyze URL
                        </button>
                    </div>
                    <div style="
                        text-align: center;
                        margin-top: 10px;
                        color: #6c757d;
                        font-size: 13px;
                    ">
                        <span>üí° Tip: Make sure to use the full article URL, not just the domain</span>
                    </div>
                </div>

                <!-- Full article tab content -->
                <div class="tab-content" id="full-article-tab">
                    <div style="
                        background: #d4edda;
                        padding: 15px;
                        border-radius: 8px;
                        margin-bottom: 15px;
                        border-left: 4px solid #28a745;
                    ">
                        <p style="margin: 0; color: #155724; font-size: 14px;">
                            <strong>Most Accurate Method:</strong> Copy and paste the entire article text including headline, author, and body. This method provides the deepest analysis as it ensures we analyze the complete content without any extraction errors.
                        </p>
                    </div>
                    <div class="textarea-container">
                        <textarea id="articleText" 
                                  placeholder="Paste the complete article text here...

Include:
- Headline
- Author name
- Publication date
- Full article body

Example:
'Breaking: Major Policy Change Announced
By Jane Smith
January 15, 2024

The government announced today...'"
                                  class="article-textarea"
                                  style="
                                      min-height: 300px;
                                      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                                      line-height: 1.6;
                                  "></textarea>
                        <button class="analyze-btn" data-tier="pro" onclick="analyzeFullText()">
                            <span class="btn-icon">üìä</span> Analyze Full Text
                        </button>
                    </div>
                    <div style="
                        display: flex;
                        justify-content: space-between;
                        margin-top: 10px;
                        color: #6c757d;
                        font-size: 13px;
                    ">
                        <span>üìù Minimum 100 words recommended</span>
                        <span id="wordCount">0 words</span>
                    </div>
                </div>
            </div>

            <!-- Progress Section (hidden by default) -->
            <div class="progress-section" id="progress-section" style="display: none;">
                <h3>Analyzing Article...</h3>
                <div class="progress-stages">
                    <div class="progress-stage active" id="extracting-content">
                        <div class="stage-icon">üìÑ</div>
                        <div class="stage-label">Extracting Content</div>
                    </div>
                    <div class="progress-stage" id="analyzing-bias">
                        <div class="stage-icon">‚öñÔ∏è</div>
                        <div class="stage-label">Analyzing Bias</div>
                    </div>
                    <div class="progress-stage" id="checking-sources">
                        <div class="stage-icon">üîç</div>
                        <div class="stage-label">Checking Sources</div>
                    </div>
                    <div class="progress-stage" id="verifying-facts">
                        <div class="stage-icon">‚úì</div>
                        <div class="stage-label">Verifying Facts</div>
                    </div>
                    <div class="progress-stage" id="generating-report">
                        <div class="stage-icon">üìä</div>
                        <div class="stage-label">Generating Report</div>
                    </div>
                </div>
                <div class="claims-counter-container">
                    <span class="claims-counter">0</span>
                    <span class="claims-label">claims analyzed</span>
                </div>
            </div>

            <!-- Results Section (hidden by default) -->
            <div id="results" style="display: none;">
                <!-- Results will be populated by JavaScript -->
            </div>

            <!-- Info Sections -->
            <div class="info-sections">
                <div class="info-card">
                    <h3>ü§ñ How It Works</h3>
                    <p>Our AI analyzes news articles using advanced natural language processing to detect bias patterns, verify sources, and assess credibility.</p>
                </div>
                <div class="info-card">
                    <h3>üìä What We Check</h3>
                    <ul>
                        <li>Political bias and objectivity</li>
                        <li>Source credibility and reputation</li>
                        <li>Factual claims and verification</li>
                        <li>Writing style and emotional language</li>
                    </ul>
                </div>
                <div class="info-card">
                    <h3>üéØ Accuracy</h3>
                    <p>Our models are trained on thousands of articles from verified sources. While highly accurate, always cross-reference important information.</p>
                </div>
                <div class="info-card">
                    <h3>üîí Privacy First</h3>
                    <p>We don't store article content or your analysis history. All processing is done in real-time and data is immediately discarded.</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer>
        <div class="container">
            <p>&copy; 2025 Facts & Fakes AI. All rights reserved.</p>
        </div>
    </footer>

    <!-- JavaScript Files -->
    <script src="/static/js/news-ui.js"></script>
    <script src="/static/js/news-analysis.js"></script>
    <script src="/static/js/news-results.js"></script>
    <script src="/static/js/news-main.js"></script>

    <!-- Additional JavaScript for tab functionality -->
    <script>
    // Tab switching functionality
    document.addEventListener('DOMContentLoaded', function() {
        const tabs = document.querySelectorAll('.input-tab');
        const tabContents = document.querySelectorAll('.tab-content');
        
        tabs.forEach(tab => {
            tab.addEventListener('click', function() {
                const tabName = this.getAttribute('data-tab');
                
                // Update active tab
                tabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Update active content
                tabContents.forEach(content => {
                    content.classList.remove('active');
                });
                document.getElementById(tabName + '-tab').classList.add('active');
            });
        });
        
        // Word count for full article
        const articleText = document.getElementById('articleText');
        const wordCount = document.getElementById('wordCount');
        
        if (articleText && wordCount) {
            articleText.addEventListener('input', function() {
                const words = this.value.trim().split(/\s+/).filter(word => word.length > 0).length;
                wordCount.textContent = words + ' words';
                wordCount.style.color = words >= 100 ? '#28a745' : '#6c757d';
            });
        }
    });

    // Function to analyze full text
    function analyzeFullText() {
        const fullText = document.getElementById('articleText').value.trim();
        
        if (!fullText) {
            alert('Please paste the article text to analyze');
            return;
        }
        
        if (fullText.split(/\s+/).length < 50) {
            alert('Please provide more text for accurate analysis (minimum 50 words)');
            return;
        }
        
        // Call the analysis function with the text
        if (window.NewsApp && window.NewsApp.analysis && window.NewsApp.analysis.runAnalysisText) {
            window.NewsApp.analysis.runAnalysisText(fullText, 'pro');
        } else {
            alert('Analysis module not loaded. Please refresh the page.');
        }
    }
    </script>
</body>
</html>
