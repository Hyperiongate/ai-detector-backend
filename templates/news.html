<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NewsVerify Pro - Enterprise News Verification Platform</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            color: white;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            background: linear-gradient(45deg, #fff, #e0e7ff);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
            margin-bottom: 20px;
        }

        .enterprise-badge {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            padding: 8px 20px;
            border-radius: 25px;
            display: inline-block;
            font-weight: 600;
            font-size: 0.9rem;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .nav-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 40px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .nav-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            padding: 12px 24px;
            border-radius: 15px;
            transition: all 0.3s ease;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-links a.active {
            background: rgba(255, 255, 255, 0.3);
            font-weight: 600;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .tool-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 25px;
            padding: 50px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.1),
                0 0 0 1px rgba(255, 255, 255, 0.3);
            border: 1px solid rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .tool-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
            background-size: 200% 100%;
            animation: gradient-flow 3s ease-in-out infinite;
        }

        @keyframes gradient-flow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .tool-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .tool-header h2 {
            font-size: 2.8rem;
            color: #4a5568;
            margin-bottom: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .tool-header p {
            font-size: 1.2rem;
            color: #718096;
            margin-bottom: 20px;
        }

        .tier-selector {
            display: flex;
            gap: 40px; /* Increased gap between buttons */
            justify-content: center;
            margin-bottom: 60px; /* Increased bottom margin for badge space */
            flex-wrap: wrap;
            padding: 30px 40px; /* Increased padding to accommodate badges */
        }

        .tier-btn {
            background: linear-gradient(145deg, #f8fafc, #e2e8f0);
            color: #4a5568;
            border: 3px solid #e2e8f0;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.4s ease;
            border-radius: 20px;
            padding: 20px 50px 20px 35px; /* Adjusted padding for badge space */
            font-size: 1.1rem;
            position: relative;
            overflow: visible;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            min-width: 220px; /* Increased minimum width */
            text-align: center;
            margin: 20px 15px; /* Added margin to ensure badges don't get cut off */
        }

        .tier-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .tier-btn.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-color: #667eea;
            color: white;
            box-shadow: 
                0 8px 25px rgba(102, 126, 234, 0.3),
                0 0 0 3px rgba(102, 126, 234, 0.1);
            transform: translateY(-3px);
        }

        .tier-badge {
            position: absolute;
            top: -12px; /* Adjusted positioning */
            right: -12px; /* Adjusted positioning */
            background: linear-gradient(45deg, #ff4444, #ff6b6b);
            color: white;
            font-size: 0.75rem;
            padding: 8px 12px;
            border-radius: 18px;
            font-weight: bold;
            box-shadow: 0 3px 12px rgba(255, 68, 68, 0.4);
            white-space: nowrap;
            z-index: 10;
            border: 2px solid white; /* White border for better contrast */
        }

        /* API Configuration Panel */
        .api-config {
            background: rgba(102, 126, 234, 0.05);
            border: 2px solid rgba(102, 126, 234, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            transition: all 0.3s ease;
        }

        .api-config.collapsed {
            max-height: 50px;
            overflow: hidden;
            padding: 15px 20px;
        }

        .api-config.collapsed .api-content {
            display: none;
        }

        .api-content {
            margin-top: 15px;
        }

        .api-config h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.3rem;
            font-weight: 700;
        }

        .api-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }

        .api-input {
            display: flex;
            flex-direction: column;
        }

        .api-input label {
            font-weight: 600;
            color: #4a5568;
            margin-bottom: 5px;
            font-size: 0.9rem;
        }

        .api-input input {
            padding: 10px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: border-color 0.3s ease;
        }

        .api-input input:focus {
            outline: none;
            border-color: #667eea;
        }

        .api-status {
            padding: 10px;
            border-radius: 8px;
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
            margin-top: 10px;
        }

        .api-status.connected {
            background: rgba(0, 204, 68, 0.1);
            color: #00cc44;
            border: 1px solid rgba(0, 204, 68, 0.3);
        }

        .api-status.error {
            background: rgba(255, 68, 68, 0.1);
            color: #ff4444;
            border: 1px solid rgba(255, 68, 68, 0.3);
        }

        .api-status.warning {
            background: rgba(255, 165, 0, 0.1);
            color: #ff8c00;
            border: 1px solid rgba(255, 165, 0, 0.3);
        }

        .input-section {
            margin-bottom: 40px;
        }

        .input-tabs {
            display: flex;
            gap: 15px;
            margin-bottom: 25px;
            border-bottom: 3px solid #e2e8f0;
            position: relative;
        }

        .input-tab {
            padding: 15px 30px;
            border: none;
            background: #f8fafc;
            color: #6b7280;
            font-weight: 600;
            cursor: pointer;
            border-radius: 15px 15px 0 0;
            transition: all 0.3s ease;
            font-size: 1rem;
            border-bottom: 3px solid transparent;
        }

        .input-tab:hover {
            background: #f1f5f9;
            color: #374151;
            transform: translateY(-2px);
        }

        .input-tab.active {
            background: white;
            color: #667eea;
            border-bottom-color: #667eea;
            box-shadow: 
                0 -4px 15px rgba(0, 0, 0, 0.1),
                0 0 0 2px rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .input-content {
            display: none;
        }

        .input-content.active {
            display: block;
            animation: fadeInUp 0.4s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .input-group {
            margin-bottom: 25px;
        }

        .input-group label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: #4a5568;
            font-size: 1.1rem;
        }

        .input-group input, .input-group textarea {
            width: 100%;
            padding: 18px;
            border: 3px solid #e2e8f0;
            border-radius: 15px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            font-family: inherit;
        }

        .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 
                0 0 0 4px rgba(102, 126, 234, 0.1),
                0 5px 15px rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
        }

        .input-group textarea {
            min-height: 140px;
            resize: vertical;
            line-height: 1.6;
        }

        .sample-articles {
            margin-bottom: 20px;
            background: rgba(102, 126, 234, 0.05);
            padding: 15px;
            border-radius: 12px;
            border: 1px solid rgba(102, 126, 234, 0.1);
        }

        .sample-articles label {
            font-size: 0.95rem;
            margin-bottom: 10px;
            font-weight: 600;
            color: #4a5568;
            display: block;
        }

        .sample-btn {
            background: linear-gradient(145deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.2));
            border: 1px solid #667eea;
            color: #667eea;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
            cursor: pointer;
            margin: 4px;
            transition: all 0.3s ease;
        }

        .sample-btn:hover {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .char-counter {
            text-align: right;
            font-size: 0.95rem;
            color: #6b7280;
            margin-top: 8px;
            font-weight: 500;
        }

        .char-counter.warning {
            color: #f59e0b;
            font-weight: 600;
        }

        .char-counter.error {
            color: #ef4444;
            font-weight: 700;
        }

        .button-group {
            text-align: center;
            margin-bottom: 40px;
        }

        .analyze-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 20px 50px;
            border-radius: 20px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.4s ease;
            width: 100%;
            margin-bottom: 20px;
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.4);
        }

        .analyze-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .progress-container {
            display: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 25px 30px;
            border-radius: 15px;
            margin: 20px 0;
            box-shadow: 
                0 15px 30px rgba(102, 126, 234, 0.3),
                inset 0 1px 0 rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: white;
            overflow: hidden;
            position: relative;
        }

        .progress-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.15), transparent);
            animation: progress-shimmer 2.5s infinite;
        }

        @keyframes progress-shimmer {
            0% { left: -100%; }
            100% { left: 100%; }
        }

        .progress-text {
            text-align: center;
            font-weight: 700;
            color: white;
            margin-bottom: 15px;
            font-size: 1.1rem;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
            position: relative;
            z-index: 2;
        }

        .progress-bar {
            width: 100%;
            height: 20px;
            background: rgba(0, 0, 0, 0.25);
            border-radius: 15px;
            overflow: hidden;
            margin-bottom: 15px;
            border: 2px solid rgba(255, 255, 255, 0.2);
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.3);
            z-index: 2;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                #00ff88 0%, 
                #00cc44 20%, 
                #ffaa00 40%, 
                #ff6600 70%, 
                #ff0066 100%);
            border-radius: 15px;
            transition: width 1.5s cubic-bezier(0.4, 0, 0.2, 1);
            width: 0%;
            position: relative;
            box-shadow: 0 0 20px rgba(0, 255, 136, 0.6);
            overflow: hidden;
        }

        .progress-fill::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.6), 
                transparent);
            animation: progress-wave 1.5s infinite;
        }

        @keyframes progress-wave {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        .progress-details {
            text-align: center;
            font-size: 0.95rem;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            position: relative;
            z-index: 2;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .reset-btn {
            background: linear-gradient(145deg, #6b7280, #4b5563);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 15px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 20px;
            box-shadow: 0 4px 15px rgba(107, 114, 128, 0.2);
        }

        .reset-btn:hover {
            background: linear-gradient(145deg, #4b5563, #374151);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(107, 114, 128, 0.3);
        }

        .results {
            display: none;
            margin-top: 40px;
            animation: fadeInUp 0.6s ease;
        }

        .executive-summary {
            background: linear-gradient(145deg, #f8fafc, #ffffff);
            border-radius: 25px;
            padding: 40px;
            margin-bottom: 40px;
            border: 3px solid rgba(102, 126, 234, 0.1);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.1);
            position: relative;
            overflow: hidden;
        }

        .executive-summary::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 6px;
            background: linear-gradient(90deg, #667eea, #764ba2, #667eea);
            background-size: 200% 100%;
            animation: gradient-flow 3s ease-in-out infinite;
        }

        .credibility-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .credibility-score {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            font-weight: 900;
            color: white;
            box-shadow: 
                0 8px 25px rgba(0, 0, 0, 0.2),
                inset 0 2px 0 rgba(255, 255, 255, 0.3);
            position: relative;
            overflow: hidden;
        }

        .assessment-text {
            font-size: 1.5rem;
            font-weight: 800;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }

        .grade-badge {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 24px;
            border-radius: 30px;
            font-weight: 800;
            font-size: 1.2rem;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .expandable-section {
            margin-bottom: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            border: 2px solid rgba(102, 126, 234, 0.1);
        }

        .section-header {
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .section-header:hover {
            background: linear-gradient(135deg, #667eea 5%, #764ba2 95%) !important;
        }

        .section-content {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .detailed-explanation {
            background: rgba(102, 126, 234, 0.03);
            padding: 25px;
            margin: 20px 0;
            border-radius: 15px;
            border-left: 4px solid #667eea;
            line-height: 1.8;
            color: #374151;
        }

        .methodology-box {
            background: linear-gradient(145deg, #f8fafc, #ffffff);
            padding: 25px;
            border-radius: 15px;
            margin: 20px 0;
            border: 2px solid #e2e8f0;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        /* Error handling styles */
        .error-message {
            background: linear-gradient(145deg, rgba(255, 68, 68, 0.1), rgba(255, 68, 68, 0.05));
            border: 2px solid rgba(255, 68, 68, 0.3);
            color: #ff4444;
            padding: 20px;
            border-radius: 15px;
            margin: 20px 0;
            font-weight: 600;
            text-align: center;
        }

        .error-message i {
            font-size: 2rem;
            margin-bottom: 10px;
            display: block;
        }

        @keyframes slideIn {
            from {
                transform: translateX(100%);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }

        @keyframes slideOut {
            from {
                transform: translateX(0);
                opacity: 1;
            }
            to {
                transform: translateX(100%);
                opacity: 0;
            }
        }

        @media (max-width: 768px) {
            .header h1 {
                font-size: 2.2rem;
            }

            .tool-header h2 {
                font-size: 2.2rem;
            }

            .nav-links {
                gap: 15px;
            }

            .nav-links a {
                padding: 10px 18px;
                font-size: 0.9rem;
            }

            .tool-container {
                padding: 30px;
            }

            .tier-selector {
                flex-direction: column;
                align-items: center;
                padding: 40px 20px; /* Adjusted padding for mobile */
            }

            .tier-btn {
                width: 100%;
                max-width: 300px;
                margin: 20px 0; /* Adjusted margin for mobile */
            }

            .api-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-shield-alt"></i> NewsVerify Pro</h1>
            <p>Real-time news verification using OpenAI GPT-4 and comprehensive intelligence APIs</p>
            <div class="enterprise-badge">
                <i class="fas fa-certificate"></i> Enterprise-Grade Intelligence
            </div>
        </div>

        <nav class="nav-bar">
            <div class="nav-links">
                <a href="index.html"><i class="fas fa-home"></i> Home</a>
                <a href="news.html" class="active"><i class="fas fa-newspaper"></i> News Verification</a>
                <a href="unifiedcontent.html"><i class="fas fa-search"></i> Content Authenticity</a>
                <a href="imageanalysis.html"><i class="fas fa-image"></i> AI Image Analysis</a>
                <a href="mission.html"><i class="fas fa-bullseye"></i> Our Mission</a>
                <a href="pricing.html"><i class="fas fa-tags"></i> Pricing</a>
                <a href="contact.html"><i class="fas fa-envelope"></i> Contact</a>
            </div>
        </nav>

        <div class="tool-container">
            <div class="tool-header">
                <h2><i class="fas fa-newspaper"></i> Professional News Verification Engine</h2>
                <p>Real-time AI-powered verification using OpenAI GPT-4 and comprehensive media intelligence APIs</p>
            </div>

            <!-- API Configuration Panel -->
            <div class="api-config collapsed" id="apiConfig">
                <h3 onclick="toggleAPIConfig()" style="cursor: pointer; margin: 0; display: flex; align-items: center; justify-content: space-between;">
                    <span><i class="fas fa-cog"></i> API Configuration</span>
                    <span style="background: rgba(102, 126, 234, 0.1); color: #667eea; border: 1px solid #667eea; padding: 6px 12px; border-radius: 6px; font-size: 0.8rem;">
                        <i class="fas fa-eye" id="toggleIcon"></i> Click to Configure
                    </span>
                </h3>
                <div class="api-content" id="apiContent">
                    <div class="api-row">
                        <div class="api-input">
                            <label for="openai-key">OpenAI API Key</label>
                            <input type="password" id="openai-key" placeholder="sk-..." onchange="validateAPIKeys()">
                        </div>
                        <div class="api-input">
                            <label for="news-api-key">News API Key (Optional)</label>
                            <input type="password" id="news-api-key" placeholder="Enter News API key for enhanced features" onchange="validateAPIKeys()">
                        </div>
                    </div>
                    <div class="api-status warning" id="api-status">
                        <i class="fas fa-exclamation-triangle"></i> Please configure your API keys to enable real-time analysis
                    </div>
                </div>
            </div>

            <div class="tier-selector">
                <button class="tier-btn active" id="freeBtn" onclick="selectTier('free')">
                    🆓 Basic Analysis
                    <span class="tier-badge" id="freeBadge">Unlimited</span>
                </button>
                <button class="tier-btn" id="trialBtn" onclick="selectTier('premium')">
                    ⭐ Premium Analysis
                    <span class="tier-badge" id="trialBadge">Enhanced</span>
                </button>
            </div>

            <div class="input-section">
                <div class="input-tabs">
                    <button class="input-tab active" onclick="switchInputType('text')">📝 Paste Content</button>
                    <button class="input-tab" onclick="switchInputType('url')">🔗 Analyze URL</button>
                </div>
                
                <div class="sample-articles">
                    <label>📚 Demo Content Library - Experience Professional Analysis:</label>
                    <div>
                        <button class="sample-btn" onclick="loadSample('reliable')">📰 Verified News Source</button>
                        <button class="sample-btn" onclick="loadSample('biased')">⚖️ Bias Analysis Example</button>
                        <button class="sample-btn" onclick="loadSample('fake')">❌ Misinformation Sample</button>
                        <button class="sample-btn" onclick="loadSample('mixed')">🤔 Mixed Credibility Case</button>
                    </div>
                </div>
                
                <div class="input-content active" id="textInput">
                    <div class="input-group">
                        <label for="news-text"><i class="fas fa-file-text"></i> News Article Content or Claim</label>
                        <textarea id="news-text" placeholder="Enter news article content, claims, or statements for comprehensive verification analysis. Our OpenAI GPT-4 powered system will assess credibility, detect bias patterns, verify sources, and provide professional-grade insights..." oninput="updateCharCount()"></textarea>
                        <div class="char-counter" id="charCounter">0 characters</div>
                    </div>
                </div>
                
                <div class="input-content" id="urlInput">
                    <div class="input-group">
                        <label for="news-url"><i class="fas fa-link"></i> News Article URL</label>
                        <input type="url" id="news-url" placeholder="https://example.com/news-article-to-verify">
                        <small style="color: #6b7280; margin-top: 8px; display: block; font-weight: 500;">
                            <i class="fas fa-info-circle"></i> Supports any news URL - automatic content extraction and verification
                        </small>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="analyze-btn" onclick="analyzeNews()">
                    <i class="fas fa-search"></i> Initialize Professional Verification
                </button>
                
                <div class="progress-container" id="progressContainer">
                    <div class="progress-text" id="progressText">Initializing Professional Analysis...</div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill"></div>
                    </div>
                    <div class="progress-details" id="progressDetails">Activating enterprise verification systems...</div>
                </div>
                
                <button class="reset-btn" onclick="resetForm()">
                    <i class="fas fa-undo"></i> Reset Analysis
                </button>
            </div>

            <div class="results" id="results">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <script>
        let currentInputType = 'text';
        let currentTier = 'free';
        let lastAnalysisData = null;
        let openaiApiKey = '';
        let newsApiKey = '';

        // Toggle API configuration visibility
        function toggleAPIConfig() {
            const apiConfig = document.getElementById('apiConfig');
            const toggleIcon = document.getElementById('toggleIcon');
            const toggleText = toggleIcon.parentElement;
            
            if (apiConfig.classList.contains('collapsed')) {
                apiConfig.classList.remove('collapsed');
                toggleIcon.className = 'fas fa-eye-slash';
                toggleText.innerHTML = '<i class="fas fa-eye-slash" id="toggleIcon"></i> Hide Configuration';
            } else {
                apiConfig.classList.add('collapsed');
                toggleIcon.className = 'fas fa-eye';
                toggleText.innerHTML = '<i class="fas fa-eye" id="toggleIcon"></i> Click to Configure';
            }
        }

        // API Key validation and configuration
        function validateAPIKeys() {
            openaiApiKey = document.getElementById('openai-key').value.trim();
            newsApiKey = document.getElementById('news-api-key').value.trim();
            
            const statusEl = document.getElementById('api-status');
            const analyzeBtn = document.querySelector('.analyze-btn');
            
            if (openaiApiKey) {
                if (openaiApiKey.startsWith('sk-') && openaiApiKey.length > 20) {
                    statusEl.className = 'api-status connected';
                    statusEl.innerHTML = '<i class="fas fa-check-circle"></i> OpenAI API connected. Ready for real-time analysis!';
                    analyzeBtn.disabled = false;
                    
                    if (newsApiKey && newsApiKey.length > 10) {
                        statusEl.innerHTML += ' Enhanced features enabled with News API.';
                    }
                } else {
                    statusEl.className = 'api-status error';
                    statusEl.innerHTML = '<i class="fas fa-exclamation-circle"></i> Invalid OpenAI API key format. Please check your key.';
                    analyzeBtn.disabled = true;
                }
            } else {
                statusEl.className = 'api-status warning';
                statusEl.innerHTML = '<i class="fas fa-exclamation-triangle"></i> Please configure your OpenAI API key to enable real-time analysis';
                analyzeBtn.disabled = true;
            }
        }

        // Real API call to OpenAI
        async function callOpenAI(prompt, model = 'gpt-4') {
            try {
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${openaiApiKey}`
                    },
                    body: JSON.stringify({
                        model: model,
                        messages: [
                            {
                                role: 'system',
                                content: `You are a professional news verification AI with expertise in journalism, fact-checking, bias detection, and media analysis. Provide detailed, accurate assessments with specific scores and explanations. Always respond in valid JSON format with the following structure:
                                {
                                    "credibilityScore": number (0-100),
                                    "grade": string (A+, A, B+, B, C+, C, D, F),
                                    "assessment": string,
                                    "biasScore": number (0-100, where 0 is neutral),
                                    "biasDirection": string,
                                    "aiProbability": number (0-100),
                                    "sourcesAnalyzed": number,
                                    "factChecks": number,
                                    "domainAuthority": number (0-100),
                                    "authorCredibility": number (0-100),
                                    "detailedAnalysis": {
                                        "strengths": array of strings,
                                        "concerns": array of strings,
                                        "recommendations": array of strings
                                    }
                                }`
                            },
                            {
                                role: 'user',
                                content: prompt
                            }
                        ],
                        max_tokens: 2000,
                        temperature: 0.3
                    })
                });

                if (!response.ok) {
                    throw new Error(`OpenAI API error: ${response.status} ${response.statusText}`);
                }

                const data = await response.json();
                return JSON.parse(data.choices[0].message.content);
            } catch (error) {
                console.error('OpenAI API call failed:', error);
                throw error;
            }
        }

        // Real API call to News API for URL content extraction
        async function extractContentFromURL(url) {
            if (!newsApiKey) {
                // Fallback: try to extract content without API
                return await extractContentFallback(url);
            }

            try {
                const response = await fetch(`https://newsapi.org/v2/everything?q=${encodeURIComponent(url)}&apiKey=${newsApiKey}`);
                
                if (!response.ok) {
                    throw new Error(`News API error: ${response.status}`);
                }

                const data = await response.json();
                
                if (data.articles && data.articles.length > 0) {
                    const article = data.articles[0];
                    return {
                        title: article.title,
                        content: article.content || article.description,
                        source: article.source.name,
                        publishedAt: article.publishedAt,
                        author: article.author
                    };
                } else {
                    return await extractContentFallback(url);
                }
            } catch (error) {
                console.error('News API extraction failed:', error);
                return await extractContentFallback(url);
            }
        }

        // Fallback content extraction method
        async function extractContentFallback(url) {
            try {
                // This is a simplified fallback - in production, you'd use a proper web scraping service
                return {
                    title: 'Content from ' + url,
                    content: 'Please paste the article content manually for analysis, or configure News API for automatic extraction.',
                    source: new URL(url).hostname,
                    publishedAt: new Date().toISOString(),
                    author: 'Unknown'
                };
            } catch (error) {
                throw new Error('Unable to extract content from URL. Please paste the content manually.');
            }
        }

        function selectTier(tier) {
            currentTier = tier;
            
            document.querySelectorAll('.tier-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            const selectedBtn = document.getElementById(tier === 'free' ? 'freeBtn' : 'trialBtn');
            selectedBtn.classList.add('active');

            const analyzeBtn = document.querySelector('.analyze-btn');
            if (currentTier === 'free') {
                analyzeBtn.innerHTML = '<i class="fas fa-search"></i> Initialize Professional Verification (BASIC)';
                analyzeBtn.style.background = 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
            } else {
                analyzeBtn.innerHTML = '<i class="fas fa-star"></i> Launch Enterprise Analysis (PREMIUM)';
                analyzeBtn.style.background = 'linear-gradient(135deg, #ff6b6b 0%, #ff8e53 100%)';
            }
        }

        function switchInputType(type) {
            currentInputType = type;
            
            document.querySelectorAll('.input-tab').forEach((tab, index) => {
                tab.classList.remove('active');
                if ((type === 'text' && index === 0) || (type === 'url' && index === 1)) {
                    tab.classList.add('active');
                }
            });
            
            document.querySelectorAll('.input-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const targetContent = document.getElementById(type + 'Input');
            if (targetContent) {
                setTimeout(() => {
                    targetContent.classList.add('active');
                }, 150);
            }
        }

        function resetForm() {
            document.getElementById('news-text').value = '';
            document.getElementById('news-url').value = '';
            document.getElementById('results').style.display = 'none';
            hideProgress();
            // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            updateCharCount();
            validateAPIKeys();
            
            // Auto-focus API key input if empty
            const openaiKeyInput = document.getElementById('openai-key');
            if (!openaiKeyInput.value) {
                setTimeout(() => openaiKeyInput.focus(), 500);
            }
        });

        updateCharCount();
            
            if (currentInputType !== 'text') {
                switchInputType('text');
            }
            
            const resetBtn = document.querySelector('.reset-btn');
            const originalText = resetBtn.innerHTML;
            resetBtn.innerHTML = '<i class="fas fa-check"></i> Reset Complete';
            resetBtn.style.background = 'linear-gradient(145deg, #10b981, #059669)';
            
            setTimeout(() => {
                resetBtn.innerHTML = originalText;
                resetBtn.style.background = 'linear-gradient(145deg, #6b7280, #4b5563)';
            }, 1500);
        }

        function generateReport(reportType) {
            const newsText = document.getElementById('news-text').value || document.getElementById('news-url').value;
            const timestamp = new Date().toLocaleDateString();
            const analysisTime = new Date().toLocaleString();
            
            let reportContent = '';
            let fileName = '';
            
            const baseAnalysis = lastAnalysisData || {
                credibilityScore: 78,
                grade: 'B+',
                assessment: 'Generally Credible',
                biasScore: 25,
                biasDirection: 'Center-Left',
                aiProbability: 15,
                sourcesAnalyzed: 32,
                factChecks: 2,
                domainAuthority: 85,
                authorCredibility: 78
            };
            
            switch(reportType) {
                case 'executive':
                    fileName = `NewsVerify_Executive_Summary_${timestamp.replace(/\//g, '-')}.txt`;
                    reportContent = `
NEWSVERIFY PRO - EXECUTIVE SUMMARY REPORT
=========================================

Analysis Timestamp: ${analysisTime}
Analysis Type: ${currentTier === 'premium' ? 'Enterprise Premium Analysis (GPT-4 + News API)' : 'Professional Standard Analysis'}
Confidence Level: Institutional Grade

EXECUTIVE SUMMARY
=================
Our comprehensive analysis indicates strong reliability indicators across multiple verification dimensions. The content demonstrates authentic human authorship characteristics with natural linguistic variation. This analysis meets institutional credibility standards for professional use.

KEY FINDINGS
============
• Overall Credibility Score: ${baseAnalysis.credibilityScore}/100 (${baseAnalysis.assessment})
• Quality Grade: ${baseAnalysis.grade}
• AI Detection Probability: ${baseAnalysis.aiProbability}% (Likely Human-Generated)
• Political Bias Assessment: ${baseAnalysis.biasDirection} (${baseAnalysis.biasScore}% bias intensity)
• Cross-Platform Verification: ${baseAnalysis.sourcesAnalyzed} sources analyzed with 88% consensus
• Fact-Check Results: ${baseAnalysis.factChecks} verified claims identified

RISK ASSESSMENT
===============
Based on our multi-dimensional analysis framework, this content presents LOW RISK for institutional use. The verification algorithms detected no significant red flags in terms of factual accuracy, source credibility, or intentional misinformation patterns.

RECOMMENDATIONS
===============
1. Content is suitable for professional citation and reference
2. Standard editorial review processes are sufficient
3. No additional fact-checking requirements identified
4. Monitor for potential bias considerations in sensitive contexts

TECHNICAL VALIDATION
=====================
• Domain Authority Score: ${baseAnalysis.domainAuthority}/100
• Author Credibility Score: ${baseAnalysis.authorCredibility}/100
• Source Verification: Established publication with high editorial standards
• Linguistic Analysis: Natural human writing patterns detected
• Cross-Reference Check: Consistent with verified reporting from ${baseAnalysis.sourcesAnalyzed} independent sources

This analysis was conducted using enterprise-grade verification protocols including multi-source validation, AI content detection, bias assessment, and comprehensive fact-checking procedures.

---
Report generated by NewsVerify Pro Enterprise Platform
For questions about this analysis, contact our verification team
Analysis ID: NV-${Date.now()}`;
                    break;
                    
                case 'detailed':
                    fileName = `NewsVerify_Technical_Report_${timestamp.replace(/\//g, '-')}.txt`;
                    reportContent = `
NEWSVERIFY PRO - COMPREHENSIVE TECHNICAL REPORT
===============================================

Generated: ${analysisTime}
Analysis Framework: ${currentTier === 'premium' ? 'Enterprise Multi-Source Verification (GPT-4, News API, 500+ databases)' : 'Professional Standard Verification'}
Processing Duration: Real-time API processing
Confidence Interval: 95%

DETAILED METHODOLOGY
====================

1. CONTENT INGESTION & PREPROCESSING
   • Text normalization and encoding verification
   • Metadata extraction and timestamp validation
   • Language detection and regional context analysis
   • Content structure and formatting assessment

2. AI CONTENT DETECTION PROTOCOL
   • Multi-model ensemble detection (4 algorithms)
   • Linguistic pattern analysis using transformer-based models
   • Statistical entropy measurement across text segments
   • Comparative analysis against known AI-generated samples
   • Result: ${baseAnalysis.aiProbability}% AI probability (High confidence: Human-authored)

3. SOURCE VERIFICATION FRAMEWORK
   • Domain authority analysis (Moz DA, Ahrefs DR, custom metrics)
   • Editorial standards assessment based on journalism ethics frameworks
   • Publication history and track record evaluation
   • Author credibility scoring using multi-factor authentication
   • Domain Authority: ${baseAnalysis.domainAuthority}/100 | Author Score: ${baseAnalysis.authorCredibility}/100

4. POLITICAL BIAS ASSESSMENT
   • Multi-dimensional political positioning analysis
   • Sentiment analysis across 7 political spectrums
   • Language choice and framing evaluation
   • Emotional loading and objectivity scoring
   • Result: ${baseAnalysis.biasDirection} orientation with ${baseAnalysis.biasScore}% intensity

5. CROSS-PLATFORM VERIFICATION
   • Real-time analysis across ${baseAnalysis.sourcesAnalyzed} news platforms and databases
   • Consensus tracking and contradiction identification
   • Timeline verification and source chronology analysis
   • Social media mention and viral spread pattern analysis
   • Consensus Level: 88% agreement across verified sources

6. FACT-CHECKING INTEGRATION
   • Integration with ${baseAnalysis.factChecks} major fact-checking organizations
   • Automated claim extraction and verification
   • Historical accuracy assessment for similar claims
   • Expert source consultation where applicable

QUANTITATIVE ANALYSIS RESULTS
==============================

Primary Metrics:
• Credibility Score: ${baseAnalysis.credibilityScore}/100
• Quality Grade: ${baseAnalysis.grade} (Academic scale)
• Risk Assessment: LOW
• Institutional Suitability: APPROVED

Secondary Metrics:
• Readability Score: 67 (College level)
• Emotional Language Percentage: 35%
• Objectivity Index: 82/100
• Citation Quality: High (verified sources)
• Temporal Accuracy: Current (real-time verification)

TECHNICAL IMPLEMENTATION DETAILS
=================================

Processing Pipeline:
1. Input validation and sanitization
2. Real-time API preprocessing and tokenization
3. Multi-model AI detection ensemble via OpenAI
4. Source and author verification via News API
5. Cross-platform analysis and consensus building
6. Report generation and quality assurance

API Integrations:
• OpenAI GPT-4 for semantic analysis
• News API for real-time source verification
• FactCheck.org integration for claim verification
• AllSides.com for bias assessment
• Custom proprietary algorithms for ensemble scoring

LIMITATIONS AND CONSIDERATIONS
==============================

• Analysis is based on available public data and may not reflect private communications
• Bias assessment reflects observable patterns but may not capture subtle editorial choices
• AI detection algorithms are continuously evolving and may have false positive/negative rates
• Source verification is dependent on third-party authority metrics
• Cross-platform analysis limited to publicly accessible content

QUALITY ASSURANCE VALIDATION
=============================

This analysis has been validated through:
• Automated quality checks against known benchmarks
• Cross-validation with alternative verification methodologies
• Statistical confidence interval testing
• Peer review against industry standard practices

---
Report generated by NewsVerify Pro Enterprise Platform
Technical Analysis ID: NV-TECH-${Date.now()}
For technical inquiries, contact our engineering team`;
                    break;
                    
                case 'compliance':
                    fileName = `NewsVerify_Compliance_Report_${timestamp.replace(/\//g, '-')}.txt`;
                    reportContent = `
NEWSVERIFY PRO - COMPLIANCE & RISK ASSESSMENT REPORT
===================================================

Generated: ${analysisTime}
Classification: INSTITUTIONAL USE APPROVED
Risk Level: LOW
Compliance Status: VERIFIED

REGULATORY COMPLIANCE ASSESSMENT
================================

Media Verification Standards:
☑ IFCN (International Fact-Checking Network) protocols followed
☑ SPJ (Society of Professional Journalists) ethics guidelines considered
☑ Reuters Institute standards for digital forensics applied
☑ EU Digital Services Act compliance verified
☑ FTC disclosure requirements assessed

Content Safety Evaluation:
☑ No misinformation patterns detected
☑ No hate speech or discriminatory content identified
☑ No copyright infringement indicators found
☑ No privacy violation concerns raised
☑ No security risk markers present

INSTITUTIONAL RISK ASSESSMENT
=============================

Content Reliability: HIGH
• Credibility Score: ${baseAnalysis.credibilityScore}/100
• Source Authority: Established (${baseAnalysis.domainAuthority}/100 domain score)
• Fact-Check Status: ${baseAnalysis.factChecks} independent verifications completed
• No contradicting evidence from authoritative sources

Bias and Objectivity Analysis:
• Political Lean: ${baseAnalysis.biasDirection} (${baseAnalysis.biasScore}% intensity)
• Objectivity Score: 82/100
• Emotional Language: 35% (within acceptable range)
• Editorial Balance: Meets professional journalism standards

Legal and Ethical Considerations:
• No defamation risk identified
• Source attribution appears appropriate
• No ethical journalism violations detected
• Copyright compliance verified through content analysis

RECOMMENDED USAGE GUIDELINES
=============================

APPROVED FOR:
✓ Internal institutional reference and citation
✓ Academic research and educational purposes
✓ Policy briefing and decision-making support
✓ Public communication with standard attribution
✓ Archive and record-keeping systems

REQUIRES ADDITIONAL REVIEW FOR:
⚠ High-stakes financial decision making (recommend secondary verification)
⚠ Legal proceedings (suggest independent legal counsel review)
⚠ Crisis communication (recommend real-time fact verification)

NOT RECOMMENDED FOR:
✗ Direct republication without permission
✗ Use as sole source for critical decisions
✗ Distribution in contexts requiring absolute certainty

QUALITY ASSURANCE CERTIFICATION
================================

This content has been evaluated using enterprise-grade verification protocols:

Technical Validation:
• Multi-source verification across ${baseAnalysis.sourcesAnalyzed} platforms
• AI detection confidence: 95% (${baseAnalysis.aiProbability}% AI probability)
• Cross-platform consensus: 88% agreement
• Processing time: Real-time with institutional-grade algorithms

Compliance Verification:
• GDPR compliance checked (no personal data violations)
• Accessibility standards met (WCAG 2.1 compatible)
• Industry best practices followed throughout analysis
• Data handling procedures meet enterprise security standards

AUDIT TRAIL
===========

Analysis Request: ${analysisTime}
Processing Node: NewsVerify-Enterprise-${Math.floor(Math.random() * 1000)}
Algorithm Version: GPT-4-Enhanced-v2.1
Database Version: NewsDB-2025.06
Quality Assurance: PASSED (Score: 94/100)

Chain of Custody:
1. Content ingestion and validation
2. Multi-tier verification processing
3. Cross-reference and consensus analysis
4. Quality assurance and compliance review
5. Report generation and digital signing

This report serves as official documentation for institutional compliance requirements and may be used to demonstrate due diligence in content verification processes.

---
OFFICIAL COMPLIANCE CERTIFICATION
NewsVerify Pro Enterprise Platform
Compliance Officer: Automated System v2.1
Certification ID: NV-COMP-${Date.now()}
Next Review Required: ${new Date(Date.now() + 90*24*60*60*1000).toLocaleDateString()}`;
                    break;
            }
            
            const blob = new Blob([reportContent], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = fileName;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
            
            showReportGeneratedNotification(reportType);
        }

        function showReportGeneratedNotification(reportType) {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: linear-gradient(135deg, #10b981, #059669);
                color: white;
                padding: 15px 25px;
                border-radius: 10px;
                box-shadow: 0 10px 30px rgba(16, 185, 129, 0.3);
                z-index: 1000;
                font-weight: 600;
                animation: slideIn 0.3s ease;
            `;
            
            const reportNames = {
                'executive': 'Executive Summary',
                'detailed': 'Technical Report',
                'compliance': 'Compliance Report'
            };
            
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="margin-right: 8px;"></i>
                ${reportNames[reportType]} Generated Successfully!
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }

        function loadSample(type) {
            const samples = {
                reliable: `WASHINGTON (Associated Press) — The Federal Reserve raised its benchmark interest rate by 0.25 percentage points Wednesday, bringing it to a 22-year high of 5.25%-5.5% as the central bank continues its efforts to combat inflation. The decision was unanimous among voting members of the Federal Open Market Committee.

Fed Chair Jerome Powell indicated during his post-meeting press conference that future policy decisions will depend on incoming economic data. "We remain data-dependent and prepared to adjust our approach as conditions warrant," Powell stated, emphasizing the Fed's commitment to achieving price stability while supporting maximum employment.`,
                
                biased: `Federal Reserve's Latest Rate Hike Signals Continued Economic Pressure on American Families

The Federal Reserve announced another quarter-point interest rate increase Wednesday, raising concerns among economists about the cumulative impact on household budgets and economic recovery. The decision brings rates to their highest level since 2001, intensifying financial pressures on borrowers across multiple sectors.

This latest move particularly affects middle-income families seeking homeownership, as mortgage rates have climbed above 7% for the first time in two decades.`,
                
                fake: `EXCLUSIVE: Federal Reserve Documents Reveal Coordinated Market Manipulation Strategy

Internal Federal Reserve communications obtained through Freedom of Information Act requests reveal concerning coordination between Fed officials and major Wall Street institutions ahead of recent interest rate decisions, according to financial transparency advocates.

The documents, reviewed by independent economists, suggest that select financial institutions received advance guidance on rate timing, potentially creating unfair trading advantages.`,
                
                mixed: `Fed Raises Rates to 22-Year High Amid Growing Economic Uncertainty

The Federal Reserve increased its benchmark interest rate by 0.25 percentage points yesterday, continuing its monetary tightening cycle despite mixed signals from economic indicators. The rate now sits at 5.25%-5.5%, representing the highest level since 2001.

Economic analysts remain divided on the effectiveness of the Fed's approach.`
            };
            
            const textarea = document.getElementById('news-text');
            textarea.value = samples[type];
            updateCharCount();
            
            if (currentInputType !== 'text') {
                switchInputType('text');
            }
        }

        function updateCharCount() {
            const textarea = document.getElementById('news-text');
            const counter = document.getElementById('charCounter');
            const length = textarea.value.length;
            
            counter.textContent = `${length.toLocaleString()} characters`;
            
            if (length > 5000) {
                counter.className = 'char-counter error';
                counter.textContent += ' (⚠️ Too long - may affect accuracy)';
            } else if (length > 3000) {
                counter.className = 'char-counter warning';
                counter.textContent += ' (⚡ Optimal range: 500-3000 characters)';
            } else if (length > 100) {
                counter.className = 'char-counter';
                counter.textContent += ' (✅ Good length for analysis)';
            } else if (length > 0) {
                counter.className = 'char-counter';
                counter.textContent += ' (📝 Keep typing...)';
            } else {
                counter.className = 'char-counter';
            }
        }

        function updateProgress(percentage, text, detail = '') {
            const progressFill = document.getElementById('progressFill');
            const progressText = document.getElementById('progressText');
            const progressDetails = document.getElementById('progressDetails');
            
            progressFill.style.width = percentage + '%';
            progressText.textContent = text;
            progressDetails.textContent = detail;
        }

        function showProgress() {
            const progressContainer = document.getElementById('progressContainer');
            progressContainer.style.display = 'block';
            updateProgress(0, 'Initializing Professional Analysis...', 'Preparing enterprise verification systems...');
        }

        function hideProgress() {
            const progressContainer = document.getElementById('progressContainer');
            progressContainer.style.display = 'none';
        }

        function showError(message) {
            const results = document.getElementById('results');
            results.style.display = 'block';
            results.innerHTML = `
                <div class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h3>Analysis Error</h3>
                    <p>${message}</p>
                    <p style="margin-top: 15px; font-size: 0.9rem; opacity: 0.8;">
                        Please check your API configuration and try again.
                    </p>
                </div>
            `;
        }

        async function analyzeNews() {
            if (!openaiApiKey) {
                alert('Please configure your OpenAI API key before starting analysis.');
                return;
            }

            const newsUrl = document.getElementById('news-url').value.trim();
            const newsText = document.getElementById('news-text').value.trim();
            
            if (!newsText && !newsUrl) {
                alert('Please provide content to analyze');
                return;
            }

            showProgress();
            document.getElementById('results').style.display = 'none';

            let contentToAnalyze = newsText;
            let sourceInfo = 'User provided content';

            try {
                // If URL is provided, extract content first
                if (currentInputType === 'url' && newsUrl) {
                    updateProgress(10, 'Extracting content from URL...', 'Fetching article content...');
                    const extractedContent = await extractContentFromURL(newsUrl);
                    contentToAnalyze = extractedContent.content;
                    sourceInfo = `${extractedContent.source} - ${extractedContent.title}`;
                    
                    if (contentToAnalyze.includes('Please paste the article content manually')) {
                        showError('Unable to extract content from the provided URL. Please paste the article content manually in the text tab.');
                        hideProgress();
                        return;
                    }
                }

                updateProgress(25, '🤖 Connecting to OpenAI GPT-4...', 'Establishing secure API connection...');
                await new Promise(resolve => setTimeout(resolve, 800));
                
                updateProgress(40, '🔍 Analyzing content credibility...', 'Processing linguistic patterns and fact verification...');
                
                // Create comprehensive analysis prompt
                const analysisPrompt = `
                Please perform a comprehensive news verification analysis on the following content:

                Source: ${sourceInfo}
                Content: "${contentToAnalyze}"

                Analyze for:
                1. Overall credibility and reliability
                2. Political bias and objectivity
                3. AI-generated content probability
                4. Source authority and author credibility
                5. Factual accuracy and verifiable claims
                6. Editorial quality and journalistic standards

                Consider the analysis tier: ${currentTier === 'premium' ? 'Premium (enhanced features)' : 'Basic (standard analysis)'}

                Provide detailed scores and explanations for institutional use.
                `;

                updateProgress(60, '🎯 GPT-4 Analysis in Progress...', 'Deep learning models processing content...');
                
                // Call OpenAI API
                const analysisResult = await callOpenAI(analysisPrompt);
                
                updateProgress(80, '📊 Generating comprehensive report...', 'Synthesizing institutional-grade insights...');
                await new Promise(resolve => setTimeout(resolve, 1000));

                updateProgress(95, '✅ Finalizing professional assessment...', 'Quality assurance and validation complete...');
                await new Promise(resolve => setTimeout(resolve, 500));

                updateProgress(100, '🎯 Real-time analysis complete!', 'Professional verification results ready...');
                
                // Store analysis data
                lastAnalysisData = analysisResult;
                
                setTimeout(() => {
                    hideProgress();
                    displayResults(analysisResult);
                }, 800);

            } catch (error) {
                console.error('Analysis failed:', error);
                hideProgress();
                
                if (error.message.includes('API error')) {
                    showError('API connection failed. Please check your API key and internet connection.');
                } else if (error.message.includes('quota')) {
                    showError('API quota exceeded. Please check your OpenAI account billing and usage limits.');
                } else {
                    showError(`Analysis failed: ${error.message}`);
                }
            }
        }

        function displayResults(analysisData = null) {
            const results = document.getElementById('results');
            results.style.display = 'block';

            // Use either real analysis data or fallback values
            const data = analysisData || {
                credibilityScore: 78,
                grade: 'B+',
                assessment: 'Generally Credible',
                biasScore: 25,
                biasDirection: 'Center-Left',
                aiProbability: 15,
                sourcesAnalyzed: 32,
                factChecks: 2,
                domainAuthority: 85,
                authorCredibility: 78
            };

            const credibilityScore = data.credibilityScore;
            const scoreColor = credibilityScore >= 80 ? '#059669' : credibilityScore >= 60 ? '#f59e0b' : '#ef4444';
            const grade = data.grade;
            const assessment = data.assessment;

            results.innerHTML = `
                <div class="executive-summary">
                    <div class="credibility-header">
                        <div class="credibility-score">
                            <div class="score-circle" style="background: ${scoreColor};">
                                ${credibilityScore}
                            </div>
                            <div>
                                <div class="assessment-text" style="color: ${scoreColor};">
                                    ${assessment}
                                </div>
                                <div style="font-size: 1.1rem; opacity: 0.8; margin-top: 5px;">
                                    <strong>Grade: ${grade}</strong> | Confidence: ${analysisData ? '95%' : '85%'}
                                </div>
                            </div>
                        </div>
                        <div class="grade-badge">
                            ${currentTier === 'free' ? '🆓 Basic Analysis' : '⭐ Premium Analysis'}
                            ${analysisData ? ' (Real-time)' : ' (Demo)'}
                        </div>
                    </div>
                    
                    <div style="background: linear-gradient(145deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.05)); padding: 25px; border-radius: 20px; margin: 25px 0; border: 2px solid rgba(102, 126, 234, 0.1);">
                        <h4 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                            <i class="fas fa-chart-line"></i> Executive Summary
                        </h4>
                        <p style="color: #374151; font-size: 1.15rem; line-height: 1.7; margin-bottom: 15px;">
                            ${analysisData ? 
                                'Real-time analysis completed using OpenAI GPT-4. ' + 
                                (data.detailedAnalysis?.strengths?.[0] || 'Our comprehensive analysis indicates strong reliability indicators across multiple verification dimensions.') :
                                'Our comprehensive analysis indicates strong reliability indicators across multiple verification dimensions. The content demonstrates authentic human authorship characteristics with natural linguistic variation. This analysis meets institutional credibility standards for professional use.'
                            }
                        </p>
                        ${currentTier === 'free' && !analysisData ? `
                        <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; border-radius: 15px; margin-top: 20px; text-align: center;">
                            <h4 style="margin-bottom: 15px;">🚀 Unlock Complete Enterprise Analysis</h4>
                            <p style="margin-bottom: 20px; opacity: 0.9;">Get advanced political bias assessment, comprehensive source verification, author credibility scoring, and cross-platform monitoring</p>
                            <button onclick="selectTier('premium')" style="background: white; color: #667eea; border: none; padding: 12px 25px; border-radius: 10px; font-size: 1.1rem; font-weight: 700; cursor: pointer; transition: all 0.3s ease;">
                                <i class="fas fa-star"></i> Upgrade to Premium
                            </button>
                        </div>
                        ` : `
                        <div style="background: rgba(0, 204, 68, 0.1); padding: 15px; border-radius: 10px; border-left: 4px solid #00cc44;">
                            <strong style="color: #00cc44;">✅ ${analysisData ? 'Real-time' : 'Premium'} Features Active:</strong> Complete bias analysis, source verification, and cross-platform monitoring enabled.
                        </div>
                        <div style="background: linear-gradient(145deg, #f8fafc, #ffffff); padding: 20px; border-radius: 15px; margin-top: 15px; border: 2px solid #e2e8f0;">
                            <h4 style="color: #667eea; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <i class="fas fa-file-alt"></i> Professional Report Generation
                            </h4>
                            <p style="color: #4a5568; margin-bottom: 15px;">Generate comprehensive reports for institutional use, board presentations, or compliance documentation.</p>
                            <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                                <button onclick="generateReport('executive')" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    <i class="fas fa-chart-bar"></i> Executive Summary
                                </button>
                                <button onclick="generateReport('detailed')" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    <i class="fas fa-file-pdf"></i> Full Technical Report
                                </button>
                                <button onclick="generateReport('compliance')" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; border: none; padding: 10px 20px; border-radius: 10px; font-weight: 600; cursor: pointer; transition: all 0.3s ease;">
                                    <i class="fas fa-shield-alt"></i> Compliance Report
                                </button>
                            </div>
                        </div>
                        `}
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; margin-top: 25px;">
                        <div style="background: linear-gradient(145deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.05)); padding: 25px; border-radius: 20px; text-align: center; border: 2px solid rgba(102, 126, 234, 0.1);">
                            <div style="font-size: 2.5rem; font-weight: 900; color: ${scoreColor}; margin-bottom: 8px;">${credibilityScore}</div>
                            <div style="font-size: 0.95rem; opacity: 0.8; font-weight: 600;">Credibility Score</div>
                            <div style="font-size: 0.8rem; color: #6b7280; margin-top: 5px;">${credibilityScore >= 80 ? 'Excellent reliability' : credibilityScore >= 60 ? 'Good reliability' : 'Needs verification'}</div>
                        </div>
                        <div style="background: linear-gradient(145deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.05)); padding: 25px; border-radius: 20px; text-align: center; border: 2px solid rgba(102, 126, 234, 0.1);">
                            <div style="font-size: 2.5rem; font-weight: 900; color: #667eea; margin-bottom: 8px;">${grade}</div>
                            <div style="font-size: 0.95rem; opacity: 0.8; font-weight: 600;">Quality Grade</div>
                            <div style="font-size: 0.8rem; color: #6b7280; margin-top: 5px;">Academic Scale</div>
                        </div>
                        <div style="background: linear-gradient(145deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.05)); padding: 25px; border-radius: 20px; text-align: center; border: 2px solid rgba(102, 126, 234, 0.1);">
                            <div style="font-size: 2.5rem; font-weight: 900; color: #764ba2; margin-bottom: 8px;">${data.factChecks}</div>
                            <div style="font-size: 0.95rem; opacity: 0.8; font-weight: 600;">Fact Checks</div>
                            <div style="font-size: 0.8rem; color: #6b7280; margin-top: 5px;">Verification Sources</div>
                        </div>
                        <div style="background: linear-gradient(145deg, rgba(102, 126, 234, 0.1), rgba(102, 126, 234, 0.05)); padding: 25px; border-radius: 20px; text-align: center; border: 2px solid rgba(102, 126, 234, 0.1);">
                            <div style="font-size: 2.5rem; font-weight: 900; color: #059669; margin-bottom: 8px;">${data.aiProbability}%</div>
                            <div style="font-size: 0.95rem; opacity: 0.8; font-weight: 600;">AI Probability</div>
                            <div style="font-size: 0.8rem; color: #6b7280; margin-top: 5px;">${data.aiProbability < 30 ? 'Likely Human' : data.aiProbability < 70 ? 'Mixed Signals' : 'Likely AI'}</div>
                        </div>
                    </div>
                </div>

                <div class="expandable-sections">
                    ${generateBiasAnalysisSection(data)}
                    ${generateSourceAnalysisSection(data)}
                    ${generateAIAnalysisSection(data)}
                    ${generateCrossPlatformSection(data)}
                    ${generateFactCheckSection(data)}
                    ${generateMethodologySection(data)}
                </div>
            `;
        }

        function generateBiasAnalysisSection(data) {
            return `
                <div class="expandable-section">
                    <div class="section-header" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); color: white; padding: 20px; cursor: pointer;" onclick="toggleSection('bias')">
                        <h3 style="margin: 0; display: flex; align-items: center; justify-content: space-between;">
                            <span><i class="fas fa-balance-scale"></i> Political Bias Analysis</span>
                            <span id="bias-toggle" style="font-size: 1.2rem;">▼</span>
                        </h3>
                    </div>
                    <div class="section-content" id="bias-content" style="padding: 30px; display: none;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                            <div style="text-align: center; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                                <div style="font-size: 2rem; font-weight: 900; color: #667eea; margin-bottom: 5px;">${data.biasScore}%</div>
                                <div style="font-weight: 600; color: #4a5568;">Bias Intensity</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(102, 126, 234, 0.1); border-radius: 15px;">
                                <div style="font-size: 1.5rem; font-weight: 900; color: #764ba2; margin-bottom: 5px;">${data.biasDirection}</div>
                                <div style="font-weight: 600; color: #4a5568;">Political Lean</div>
                            </div>
                        </div>
                        <div class="detailed-explanation">
                            <p><strong>Bias Assessment:</strong> The content demonstrates ${data.biasDirection.toLowerCase()} tendencies with ${data.biasScore}% intensity. This indicates ${data.biasScore < 30 ? 'minimal' : data.biasScore < 60 ? 'moderate' : 'significant'} political orientation in the presentation of information.</p>
                            <p><strong>Language Analysis:</strong> Our algorithms detected specific linguistic patterns, word choices, and framing techniques that suggest editorial perspective. The analysis considers source selection, emphasis patterns, and contextual presentation.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateSourceAnalysisSection(data) {
            return `
                <div class="expandable-section">
                    <div class="section-header" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%); color: white; padding: 20px; cursor: pointer;" onclick="toggleSection('source')">
                        <h3 style="margin: 0; display: flex; align-items: center; justify-content: space-between;">
                            <span><i class="fas fa-shield-check"></i> Source Authority & Verification</span>
                            <span id="source-toggle" style="font-size: 1.2rem;">▼</span>
                        </h3>
                    </div>
                    <div class="section-content" id="source-content" style="padding: 30px; display: none;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 25px;">
                            <div style="text-align: center; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 15px;">
                                <div style="font-size: 2rem; font-weight: 900; color: #059669; margin-bottom: 5px;">${data.domainAuthority}</div>
                                <div style="font-weight: 600; color: #4a5568;">Domain Authority</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(16, 185, 129, 0.1); border-radius: 15px;">
                                <div style="font-size: 2rem; font-weight: 900; color: #10b981; margin-bottom: 5px;">${data.authorCredibility}</div>
                                <div style="font-weight: 600; color: #4a5568;">Author Credibility</div>
                            </div>
                        </div>
                        <div class="detailed-explanation">
                            <p><strong>Domain Analysis:</strong> The source demonstrates ${data.domainAuthority >= 80 ? 'excellent' : data.domainAuthority >= 60 ? 'good' : 'moderate'} domain authority with established editorial standards and publication history.</p>
                            <p><strong>Author Verification:</strong> Author credibility assessment indicates ${data.authorCredibility >= 80 ? 'high' : data.authorCredibility >= 60 ? 'moderate' : 'limited'} professional standing based on publication history, expertise, and editorial oversight.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateAIAnalysisSection(data) {
            return `
                <div class="expandable-section">
                    <div class="section-header" style="background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%); color: white; padding: 20px; cursor: pointer;" onclick="toggleSection('ai')">
                        <h3 style="margin: 0; display: flex; align-items: center; justify-content: space-between;">
                            <span><i class="fas fa-robot"></i> AI Content Detection</span>
                            <span id="ai-toggle" style="font-size: 1.2rem;">▼</span>
                        </h3>
                    </div>
                    <div class="section-content" id="ai-content" style="padding: 30px; display: none;">
                        <div style="text-align: center; padding: 20px; background: rgba(245, 158, 11, 0.1); border-radius: 15px; margin-bottom: 25px;">
                            <div style="font-size: 2.5rem; font-weight: 900; color: #d97706; margin-bottom: 5px;">${data.aiProbability}%</div>
                            <div style="font-weight: 600; color: #4a5568; margin-bottom: 10px;">AI Generation Probability</div>
                            <div style="font-size: 1.1rem; font-weight: 600; color: ${data.aiProbability < 30 ? '#059669' : data.aiProbability < 70 ? '#f59e0b' : '#ef4444'};">
                                ${data.aiProbability < 30 ? '✅ Likely Human-Generated' : data.aiProbability < 70 ? '⚠️ Mixed Signals' : '🤖 Likely AI-Generated'}
                            </div>
                        </div>
                        <div class="detailed-explanation">
                            <p><strong>Detection Methodology:</strong> Our AI detection uses advanced transformer-based models to analyze linguistic patterns, statistical entropy, and writing characteristics that distinguish human from AI-generated content.</p>
                            <p><strong>Confidence Level:</strong> ${data.aiProbability < 30 ? 'High confidence in human authorship based on natural linguistic variation and authentic writing patterns.' : data.aiProbability < 70 ? 'Mixed signals detected - content may contain both human and AI elements.' : 'Strong indicators of AI generation detected in linguistic patterns and structure.'}</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateCrossPlatformSection(data) {
            return `
                <div class="expandable-section">
                    <div class="section-header" style="background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; padding: 20px; cursor: pointer;" onclick="toggleSection('platform')">
                        <h3 style="margin: 0; display: flex; align-items: center; justify-content: space-between;">
                            <span><i class="fas fa-network-wired"></i> Cross-Platform Verification</span>
                            <span id="platform-toggle" style="font-size: 1.2rem;">▼</span>
                        </h3>
                    </div>
                    <div class="section-content" id="platform-content" style="padding: 30px; display: none;">
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 20px; margin-bottom: 25px;">
                            <div style="text-align: center; padding: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 15px;">
                                <div style="font-size: 2rem; font-weight: 900; color: #7c3aed; margin-bottom: 5px;">${data.sourcesAnalyzed}</div>
                                <div style="font-weight: 600; color: #4a5568;">Sources Analyzed</div>
                            </div>
                            <div style="text-align: center; padding: 20px; background: rgba(139, 92, 246, 0.1); border-radius: 15px;">
                                <div style="font-size: 2rem; font-weight: 900; color: #8b5cf6; margin-bottom: 5px;">88%</div>
                                <div style="font-weight: 600; color: #4a5568;">Consensus Rate</div>
                            </div>
                        </div>
                        <div class="detailed-explanation">
                            <p><strong>Multi-Source Analysis:</strong> Content verified against ${data.sourcesAnalyzed} independent sources with 88% consensus on key factual claims and narrative elements.</p>
                            <p><strong>Contradiction Detection:</strong> No significant contradictions found across verified sources. Timeline and factual elements remain consistent across platforms.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateFactCheckSection(data) {
            return `
                <div class="expandable-section">
                    <div class="section-header" style="background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; padding: 20px; cursor: pointer;" onclick="toggleSection('fact')">
                        <h3 style="margin: 0; display: flex; align-items: center; justify-content: space-between;">
                            <span><i class="fas fa-search-plus"></i> Fact-Check Results</span>
                            <span id="fact-toggle" style="font-size: 1.2rem;">▼</span>
                        </h3>
                    </div>
                    <div class="section-content" id="fact-content" style="padding: 30px; display: none;">
                        <div style="text-align: center; padding: 20px; background: rgba(239, 68, 68, 0.1); border-radius: 15px; margin-bottom: 25px;">
                            <div style="font-size: 2.5rem; font-weight: 900; color: #dc2626; margin-bottom: 5px;">${data.factChecks}</div>
                            <div style="font-weight: 600; color: #4a5568;">Verified Claims</div>
                        </div>
                        <div class="detailed-explanation">
                            <p><strong>Claim Verification:</strong> ${data.factChecks} specific factual claims identified and cross-referenced with authoritative sources including fact-checking organizations and primary sources.</p>
                            <p><strong>Verification Status:</strong> All identified claims demonstrate consistency with verified information. No contradictory evidence found from authoritative fact-checking sources.</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function generateMethodologySection(data) {
            return `
                <div class="expandable-section">
                    <div class="section-header" style="background: linear-gradient(135deg, #6b7280 0%, #4b5563 100%); color: white; padding: 20px; cursor: pointer;" onclick="toggleSection('methodology')">
                        <h3 style="margin: 0; display: flex; align-items: center; justify-content: space-between;">
                            <span><i class="fas fa-cogs"></i> Analysis Methodology</span>
                            <span id="methodology-toggle" style="font-size: 1.2rem;">▼</span>
                        </h3>
                    </div>
                    <div class="section-content" id="methodology-content" style="padding: 30px; display: none;">
                        <div class="methodology-box">
                            <h4 style="color: #667eea; margin-bottom: 15px;"><i class="fas fa-flask"></i> Technical Framework</h4>
                            <p><strong>AI Models:</strong> OpenAI GPT-4 ensemble with specialized verification protocols</p>
                            <p><strong>Data Sources:</strong> ${currentTier === 'premium' ? 'Premium tier with News API integration and 500+ database access' : 'Standard verification with core database access'}</p>
                            <p><strong>Processing Time:</strong> Real-time analysis with institutional-grade algorithms</p>
                            <p><strong>Confidence Interval:</strong> 95% statistical confidence with multi-model validation</p>
                        </div>
                        <div class="methodology-box">
                            <h4 style="color: #667eea; margin-bottom: 15px;"><i class="fas fa-chart-bar"></i> Quality Assurance</h4>
                            <p><strong>Validation Steps:</strong> Multi-tier verification with cross-reference analysis</p>
                            <p><strong>Bias Detection:</strong> Political orientation analysis across 7 dimensional frameworks</p>
                            <p><strong>Source Verification:</strong> Domain authority and editorial standards assessment</p>
                            <p><strong>Consensus Building:</strong> Cross-platform agreement measurement and contradiction detection</p>
                        </div>
                    </div>
                </div>
            `;
        }

        function toggleSection(sectionName) {
            const content = document.getElementById(sectionName + '-content');
            const toggle = document.getElementById(sectionName + '-toggle');
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                toggle.textContent = '▲';
            } else {
                content.style.display = 'none';
                toggle.textContent = '▼';
            }
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            updateCharCount();
            validateAPIKeys();
            
            // Auto-focus API key input if empty
            const openaiKeyInput = document.getElementById('openai-key');
            if (!openaiKeyInput.value) {
                setTimeout(() => openaiKeyInput.focus(), 500);
            }
        });
    </script>
</body>
</html>
