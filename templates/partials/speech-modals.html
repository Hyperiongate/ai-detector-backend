<!-- Speech Analysis Modals -->

<!-- Analysis Process Overview Modal -->
<div id="speechProcessModal" class="modal-overlay" style="display: none;">
    <div class="modal-container">
        <div class="modal-header">
            <h2>How We Analyze Speeches</h2>
            <button class="modal-close" onclick="closeSpeechProcessModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="process-timeline">
                <div class="timeline-item">
                    <div class="timeline-marker">1</div>
                    <div class="timeline-content">
                        <h3>Audio Extraction & Transcription</h3>
                        <p>We extract audio from your uploaded file or YouTube link and convert it to text using advanced speech recognition AI.</p>
                        <div class="methodology-snippet">
                            <code>Accuracy Rate: 95%+ for clear audio</code>
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker">2</div>
                    <div class="timeline-content">
                        <h3>Claim Identification</h3>
                        <p>Our AI identifies factual claims, statistics, and verifiable statements within the speech.</p>
                        <div class="methodology-snippet">
                            <code>GPT-4 Analysis + Pattern Recognition</code>
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker">3</div>
                    <div class="timeline-content">
                        <h3>Multi-Source Fact Checking</h3>
                        <p>Each claim is verified against multiple trusted sources and fact-checking databases.</p>
                        <div class="methodology-snippet">
                            <code>Sources: Reuters, AP, Snopes, FactCheck.org</code>
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker">4</div>
                    <div class="timeline-content">
                        <h3>Speaker Analysis</h3>
                        <p>We analyze the speaker's historical accuracy and expertise in the subject matter.</p>
                        <div class="methodology-snippet">
                            <code>Historical Accuracy Score + Domain Expertise</code>
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker">5</div>
                    <div class="timeline-content">
                        <h3>Emotional & Rhetorical Analysis</h3>
                        <p>Detection of emotional manipulation, logical fallacies, and persuasion techniques.</p>
                        <div class="methodology-snippet">
                            <code>Sentiment Analysis + Fallacy Detection</code>
                        </div>
                    </div>
                </div>
                
                <div class="timeline-item">
                    <div class="timeline-marker">6</div>
                    <div class="timeline-content">
                        <h3>Comprehensive Report</h3>
                        <p>All findings are compiled into a detailed report with confidence scores and explanations.</p>
                        <div class="methodology-snippet">
                            <code>Truth Score = Weighted Average of All Factors</code>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="confidence-explanation">
                <h3>Understanding Confidence Scores</h3>
                <div class="confidence-levels">
                    <div class="confidence-level">
                        <span class="confidence-badge high">90-100%</span>
                        <span>High confidence - Multiple sources confirm</span>
                    </div>
                    <div class="confidence-level">
                        <span class="confidence-badge medium">70-89%</span>
                        <span>Medium confidence - Some verification available</span>
                    </div>
                    <div class="confidence-level">
                        <span class="confidence-badge low">Below 70%</span>
                        <span>Low confidence - Limited verification possible</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-button" onclick="closeSpeechProcessModal()">Got It!</button>
        </div>
    </div>
</div>

<!-- File Format Info Modal -->
<div id="speechFormatModal" class="modal-overlay" style="display: none;">
    <div class="modal-container modal-small">
        <div class="modal-header">
            <h2>Supported File Formats</h2>
            <button class="modal-close" onclick="closeSpeechFormatModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="format-grid">
                <div class="format-item">
                    <i class="fas fa-file-audio"></i>
                    <h4>Audio Files</h4>
                    <p>MP3, WAV, M4A, OGG, FLAC</p>
                    <small>Max size: 100MB</small>
                </div>
                <div class="format-item">
                    <i class="fas fa-file-video"></i>
                    <h4>Video Files</h4>
                    <p>MP4, AVI, MOV, WMV, MKV</p>
                    <small>Max size: 500MB</small>
                </div>
                <div class="format-item">
                    <i class="fab fa-youtube"></i>
                    <h4>YouTube Links</h4>
                    <p>Any public YouTube video</p>
                    <small>Auto-caption supported</small>
                </div>
            </div>
            <div class="format-tips">
                <h4>Tips for Best Results:</h4>
                <ul>
                    <li>Use high-quality audio for better transcription</li>
                    <li>Ensure speech is clear and not overlapping</li>
                    <li>Videos with captions provide more accurate results</li>
                    <li>Shorter clips (under 30 minutes) process faster</li>
                </ul>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-button" onclick="closeSpeechFormatModal()">Close</button>
        </div>
    </div>
</div>

<!-- Results Share Modal -->
<div id="speechShareModal" class="modal-overlay" style="display: none;">
    <div class="modal-container modal-small">
        <div class="modal-header">
            <h2>Share Analysis Results</h2>
            <button class="modal-close" onclick="closeSpeechShareModal()">&times;</button>
        </div>
        <div class="modal-body">
            <div class="share-options">
                <button class="share-button" onclick="shareSpeechResults('twitter')">
                    <i class="fab fa-twitter"></i>
                    Share on Twitter
                </button>
                <button class="share-button" onclick="shareSpeechResults('facebook')">
                    <i class="fab fa-facebook"></i>
                    Share on Facebook
                </button>
                <button class="share-button" onclick="shareSpeechResults('linkedin')">
                    <i class="fab fa-linkedin"></i>
                    Share on LinkedIn
                </button>
                <button class="share-button" onclick="copySpeechResultsLink()">
                    <i class="fas fa-link"></i>
                    Copy Link
                </button>
            </div>
            <div class="share-preview">
                <h4>Preview:</h4>
                <div class="preview-box">
                    <p><strong>Speech Analysis Results</strong></p>
                    <p>Truth Score: <span id="shareScorePreview">--</span>%</p>
                    <p>Verified Claims: <span id="shareClaimsPreview">--</span></p>
                    <p>via Facts & Fakes AI</p>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="modal-button modal-button-secondary" onclick="closeSpeechShareModal()">Cancel</button>
        </div>
    </div>
</div>

<style>
/* Modal Styles */
.modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 10000;
    animation: fadeIn 0.3s ease;
}

.modal-container {
    background: white;
    border-radius: 20px;
    width: 90%;
    max-width: 800px;
    max-height: 90vh;
    overflow: hidden;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    animation: slideUp 0.3s ease;
}

.modal-container.modal-small {
    max-width: 500px;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes slideUp {
    from { transform: translateY(50px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}

.modal-header {
    padding: 30px;
    border-bottom: 1px solid #eee;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.modal-header h2 {
    color: #333;
    font-size: 24px;
    margin: 0;
}

.modal-close {
    background: none;
    border: none;
    font-size: 30px;
    color: #999;
    cursor: pointer;
    transition: color 0.3s ease;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
}

.modal-close:hover {
    color: #333;
    background: #f5f5f5;
}

.modal-body {
    padding: 30px;
    overflow-y: auto;
    max-height: calc(90vh - 180px);
}

.modal-footer {
    padding: 20px 30px;
    border-top: 1px solid #eee;
    display: flex;
    justify-content: flex-end;
    gap: 10px;
}

.modal-button {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border: none;
    padding: 12px 30px;
    border-radius: 25px;
    font-size: 16px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.modal-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
}

.modal-button-secondary {
    background: #f5f5f5;
    color: #666;
}

.modal-button-secondary:hover {
    background: #e9e9e9;
    box-shadow: none;
}

/* Process Timeline */
.process-timeline {
    position: relative;
    padding-left: 40px;
}

.timeline-item {
    position: relative;
    padding-bottom: 40px;
}

.timeline-item:last-child {
    padding-bottom: 0;
}

.timeline-item::before {
    content: '';
    position: absolute;
    left: -25px;
    top: 40px;
    bottom: 0;
    width: 2px;
    background: #e9ecef;
}

.timeline-item:last-child::before {
    display: none;
}

.timeline-marker {
    position: absolute;
    left: -40px;
    top: 0;
    width: 30px;
    height: 30px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 14px;
}

.timeline-content h3 {
    color: #333;
    font-size: 18px;
    margin-bottom: 10px;
}

.timeline-content p {
    color: #666;
    line-height: 1.6;
    margin-bottom: 15px;
}

.methodology-snippet {
    background: #f8f0ff;
    border-left: 3px solid #764ba2;
    padding: 10px 15px;
    border-radius: 5px;
    margin-top: 10px;
}

.methodology-snippet code {
    color: #764ba2;
    font-size: 13px;
    font-family: 'Courier New', monospace;
}

/* Confidence Explanation */
.confidence-explanation {
    margin-top: 40px;
    padding: 25px;
    background: #f8f9fa;
    border-radius: 15px;
}

.confidence-explanation h3 {
    color: #333;
    margin-bottom: 20px;
}

.confidence-levels {
    display: flex;
    flex-direction: column;
    gap: 15px;
}

.confidence-level {
    display: flex;
    align-items: center;
    gap: 15px;
}

.confidence-badge {
    padding: 5px 15px;
    border-radius: 20px;
    font-weight: bold;
    font-size: 14px;
    min-width: 80px;
    text-align: center;
}

.confidence-badge.high {
    background: #d4edda;
    color: #155724;
}

.confidence-badge.medium {
    background: #fff3cd;
    color: #856404;
}

.confidence-badge.low {
    background: #f8d7da;
    color: #721c24;
}

/* Format Grid */
.format-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.format-item {
    text-align: center;
    padding: 20px;
    background: #f8f9fa;
    border-radius: 15px;
    transition: all 0.3s ease;
}

.format-item:hover {
    background: #e9ecef;
    transform: translateY(-3px);
}

.format-item i {
    font-size: 40px;
    color: #667eea;
    margin-bottom: 15px;
}

.format-item h4 {
    color: #333;
    margin-bottom: 10px;
}

.format-item p {
    color: #666;
    font-size: 14px;
    margin-bottom: 5px;
}

.format-item small {
    color: #999;
    font-size: 12px;
}

.format-tips {
    background: #f0f7ff;
    padding: 20px;
    border-radius: 10px;
    border-left: 4px solid #667eea;
}

.format-tips h4 {
    color: #333;
    margin-bottom: 15px;
}

.format-tips ul {
    color: #666;
    line-height: 1.8;
    padding-left: 20px;
}

/* Share Options */
.share-options {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    margin-bottom: 30px;
}

.share-button {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 10px;
    padding: 15px;
    border: 2px solid #e9ecef;
    background: white;
    border-radius: 10px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 16px;
    color: #333;
}

.share-button:hover {
    border-color: #667eea;
    background: #f8f9fa;
    transform: translateY(-2px);
}

.share-button i {
    font-size: 20px;
}

.share-button:nth-child(1) i { color: #1DA1F2; }
.share-button:nth-child(2) i { color: #4267B2; }
.share-button:nth-child(3) i { color: #0077B5; }
.share-button:nth-child(4) i { color: #667eea; }

.share-preview {
    background: #f8f9fa;
    padding: 20px;
    border-radius: 10px;
}

.share-preview h4 {
    color: #333;
    margin-bottom: 15px;
}

.preview-box {
    background: white;
    padding: 15px;
    border-radius: 8px;
    border: 1px solid #e9ecef;
}

.preview-box p {
    margin: 5px 0;
    color: #666;
}

.preview-box p:first-child {
    color: #333;
    margin-bottom: 10px;
}

/* Responsive */
@media (max-width: 768px) {
    .modal-container {
        width: 95%;
        margin: 20px;
    }
    
    .modal-header {
        padding: 20px;
    }
    
    .modal-body {
        padding: 20px;
    }
    
    .process-timeline {
        padding-left: 20px;
    }
    
    .timeline-marker {
        left: -30px;
    }
    
    .timeline-item::before {
        left: -15px;
    }
    
    .share-options {
        grid-template-columns: 1fr;
    }
}
</style>

<script>
// Modal Functions
function showSpeechProcessModal() {
    document.getElementById('speechProcessModal').style.display = 'flex';
}

function closeSpeechProcessModal() {
    document.getElementById('speechProcessModal').style.display = 'none';
}

function showSpeechFormatModal() {
    document.getElementById('speechFormatModal').style.display = 'flex';
}

function closeSpeechFormatModal() {
    document.getElementById('speechFormatModal').style.display = 'none';
}

function showSpeechShareModal(score, claims) {
    document.getElementById('shareScorePreview').textContent = score;
    document.getElementById('shareClaimsPreview').textContent = claims;
    document.getElementById('speechShareModal').style.display = 'flex';
}

function closeSpeechShareModal() {
    document.getElementById('speechShareModal').style.display = 'none';
}

function shareSpeechResults(platform) {
    const score = document.getElementById('shareScorePreview').textContent;
    const claims = document.getElementById('shareClaimsPreview').textContent;
    const text = `Speech Analysis: Truth Score ${score}%, ${claims} verified claims. Check it out on Facts & Fakes AI!`;
    const url = window.location.href;
    
    let shareUrl;
    switch(platform) {
        case 'twitter':
            shareUrl = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`;
            break;
        case 'facebook':
            shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`;
            break;
        case 'linkedin':
            shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(url)}`;
            break;
    }
    
    window.open(shareUrl, '_blank', 'width=600,height=400');
    closeSpeechShareModal();
}

function copySpeechResultsLink() {
    navigator.clipboard.writeText(window.location.href).then(() => {
        // Show success message
        const button = event.target.closest('.share-button');
        const originalText = button.innerHTML;
        button.innerHTML = '<i class="fas fa-check"></i> Copied!';
        button.style.background = '#d4edda';
        button.style.borderColor = '#28a745';
        
        setTimeout(() => {
            button.innerHTML = originalText;
            button.style.background = '';
            button.style.borderColor = '';
        }, 2000);
    });
}

// Close modals when clicking outside
window.addEventListener('click', function(event) {
    if (event.target.classList.contains('modal-overlay')) {
        event.target.style.display = 'none';
    }
});
</script>
