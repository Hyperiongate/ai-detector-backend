<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Truth Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
        }

        /* URL Input */
        .input-section {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        #urlInput {
            flex: 1;
            padding: 14px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        #urlInput:focus {
            outline: none;
            border-color: #3498db;
        }

        #analyzeBtn {
            padding: 14px 30px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        #analyzeBtn:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        #analyzeBtn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .free-limit-warning {
            background: #fff3cd;
            color: #856404;
            padding: 12px 16px;
            border-radius: 6px;
            font-size: 14px;
            display: none;
        }

        /* Loading State */
        .loading {
            display: none;
            text-align: center;
            padding: 60px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Results Section */
        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        /* Overall Assessment Box */
        .overall-assessment {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .trust-score-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .trust-score {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }

        .trust-score svg {
            transform: rotate(-90deg);
        }

        .trust-score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
        }

        .trust-label {
            font-size: 18px;
            margin-top: 15px;
            font-weight: 600;
        }

        .source-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .source-info h3 {
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .article-summary {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .key-findings {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }

        .key-findings h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .key-findings ul {
            list-style: none;
        }

        .key-findings li {
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
        }

        .key-findings li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #27ae60;
        }

        .key-findings li.warning:before {
            content: "⚠";
            color: #f39c12;
        }

        .key-findings li.danger:before {
            content: "✗";
            color: #e74c3c;
        }

        /* Pro Features Section */
        .pro-features {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .pro-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .pro-badge {
            background: #9b59b6;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        /* Analysis Cards */
        .analysis-card {
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 12px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .analysis-card.expanded {
            border-color: #3498db;
            box-shadow: 0 4px 12px rgba(52, 152, 219, 0.15);
        }

        .analysis-card.locked {
            opacity: 0.7;
        }

        .card-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.3s;
            background: #f0f3f5;
        }

        .card-header:hover {
            background: #e3e8ec;
        }

        .analysis-card.expanded .card-header {
            background: #e8f4f8;
            border-bottom: 2px solid #3498db;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background: #3498db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 20px;
        }

        .card-info {
            flex: 1;
        }

        .card-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .card-preview {
            font-size: 14px;
            color: #7f8c8d;
        }

        .expand-icon {
            font-size: 20px;
            color: #7f8c8d;
            transition: transform 0.3s;
        }

        .analysis-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .analysis-card.expanded .card-content {
            max-height: 1000px;
        }

        .card-body {
            padding: 0 20px 20px;
        }

        .explanation-box {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .explanation-box h4 {
            color: #2980b9;
            margin-bottom: 12px;
            font-size: 18px;
        }

        .explanation-box p {
            margin-bottom: 10px;
            line-height: 1.6;
        }

        .methodology-note {
            background: #fff9e6;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            border-left: 4px solid #f39c12;
            font-size: 14px;
        }

        .methodology-note strong {
            color: #e67e22;
        }

        .analysis-details {
            background: white;
            padding: 20px;
            border-radius: 6px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-label {
            font-weight: 600;
            color: #2c3e50;
            flex: 1;
        }

        .metric-description {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 4px;
        }

        .metric-bar {
            width: 150px;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .metric-fill {
            height: 100%;
            transition: width 0.5s;
        }

        .metric-fill.high {
            background: #27ae60;
        }

        .metric-fill.medium {
            background: #f39c12;
        }

        .metric-fill.low {
            background: #e74c3c;
        }

        /* Upgrade CTA */
        .upgrade-cta {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-top: 30px;
        }

        .upgrade-cta h3 {
            margin-bottom: 15px;
        }

        .upgrade-cta p {
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .upgrade-btn {
            background: white;
            color: #9b59b6;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .input-group {
                flex-direction: column;
            }

            #analyzeBtn {
                width: 100%;
            }

            .trust-score {
                width: 150px;
                height: 150px;
            }

            .trust-score-text {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔍 News Truth Analyzer</h1>
            <p>Professional news verification powered by AI</p>
        </div>

        <div class="input-section">
            <div class="input-group">
                <input type="url" id="urlInput" placeholder="Enter news article URL..." value="https://www.cnn.com/2024/11/06/politics/trump-wins-2024-presidential-election/index.html">
                <button id="analyzeBtn">Analyze Article</button>
            </div>
            <div class="free-limit-warning" id="freeLimitWarning">
                ⚠️ Free tier limit: 1 analysis per day. <a href="#upgrade">Upgrade to Pro</a> for unlimited analyses.
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <h3>Analyzing Article...</h3>
            <p>Running comprehensive verification checks</p>
        </div>

        <div class="results" id="results">
            <!-- Overall Assessment (Free Tier) -->
            <div class="overall-assessment">
                <div class="trust-score-container">
                    <div class="trust-score">
                        <svg width="200" height="200">
                            <circle cx="100" cy="100" r="90" fill="none" stroke="#e0e0e0" stroke-width="20"/>
                            <circle id="trustCircle" cx="100" cy="100" r="90" fill="none" stroke="#3498db" stroke-width="20" stroke-dasharray="565.5" stroke-dashoffset="565.5"/>
                        </svg>
                        <div class="trust-score-text" id="trustScoreText">0</div>
                    </div>
                    <div class="trust-label" id="trustLabel">Calculating...</div>
                </div>

                <div class="source-info">
                    <h3>Source & Author</h3>
                    <p id="sourceAuthor">Loading...</p>
                </div>

                <div class="article-summary">
                    <h3>Article Summary</h3>
                    <p id="articleSummary">Loading...</p>
                </div>

                <div class="key-findings">
                    <h3>Key Findings</h3>
                    <ul id="keyFindings">
                        <li>Loading analysis results...</li>
                    </ul>
                </div>
            </div>

            <!-- Pro Features -->
            <div class="pro-features">
                <div class="pro-header">
                    <h2>Detailed Analysis</h2>
                    <span class="pro-badge">PRO</span>
                </div>

                <!-- Analysis Cards -->
                <div id="analysisCards">
                    <!-- Cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Upgrade CTA -->
            <div class="upgrade-cta" id="upgradeCTA" style="display: none;">
                <h3>🚀 Unlock Full Analysis</h3>
                <p>Get detailed insights, fact-checking, bias detection, and more with Pro</p>
                <button class="upgrade-btn">Upgrade to Pro - $9.99/month</button>
            </div>
        </div>
    </div>

    <script>
        // Analysis system
        class NewsAnalyzer {
            constructor() {
                this.isProUser = true;  // ENABLED FOR TESTING - All features unlocked
                this.freeUsageCount = 0;  // Reset counter
                this.lastUsageDate = '';
                // Skip daily limit check for testing
                this.initializeEventListeners();
            }

            checkDailyLimit() {
                // Disabled for testing
                return;
            }

            initializeEventListeners() {
                document.getElementById('analyzeBtn').addEventListener('click', () => this.analyzeArticle());
                document.getElementById('urlInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.analyzeArticle();
                });
            }

            async analyzeArticle() {
                const url = document.getElementById('urlInput').value.trim();
                if (!url) {
                    alert('Please enter a valid URL');
                    return;
                }

                // Skip free tier limit check - always allow analysis
                
                // Show loading
                document.getElementById('loading').classList.add('active');
                document.getElementById('results').classList.remove('active');

                // Simulate analysis (in real implementation, this would call your backend)
                setTimeout(() => {
                    this.displayResults(this.getMockAnalysisData());
                }, 2000);
            }

            getMockAnalysisData() {
                return {
                    trustScore: 82,
                    trustLabel: "Mostly Trustworthy",
                    source: "CNN",
                    author: "Kevin Liptak",
                    summary: "Analysis of Donald Trump's victory in the 2024 presidential election, covering key swing states, voter demographics, and factors that led to his return to the White House. The article examines the political landscape and implications for both parties.",
                    keyFindings: [
                        { text: "Credible mainstream news source with established reputation", type: "success" },
                        { text: "Author is a verified political correspondent with track record", type: "success" },
                        { text: "Some partisan language detected in analysis sections", type: "warning" },
                        { text: "Facts cross-verified with multiple sources", type: "success" },
                        { text: "Timeline and claims are logically consistent", type: "success" },
                        { text: "Recommended: Cross-reference with other sources for complete picture", type: "info" }
                    ],
                    detailedAnalysis: {
                        sourceCredibility: {
                            score: 85,
                            details: "CNN is an established news organization with professional editorial standards",
                            metrics: {
                                "Domain Authority": { value: 92, level: "high" },
                                "Fact-Check History": { value: 78, level: "high" },
                                "Transparency": { value: 80, level: "high" },
                                "Editorial Standards": { value: 85, level: "high" }
                            }
                        },
                        authorBackground: {
                            score: 88,
                            details: "Kevin Liptak is a White House reporter with 10+ years experience",
                            metrics: {
                                "Experience Level": { value: 90, level: "high" },
                                "Subject Expertise": { value: 85, level: "high" },
                                "Verification Status": { value: 95, level: "high" },
                                "Previous Work": { value: 82, level: "high" }
                            }
                        },
                        biasDetection: {
                            score: 72,
                            details: "Slight left-leaning bias detected in word choice and framing",
                            metrics: {
                                "Language Neutrality": { value: 68, level: "medium" },
                                "Source Diversity": { value: 75, level: "high" },
                                "Opinion vs Fact": { value: 70, level: "medium" },
                                "Emotional Language": { value: 65, level: "medium" }
                            }
                        },
                        factVerification: {
                            score: 90,
                            details: "Key claims verified against official sources and data",
                            metrics: {
                                "Claim Accuracy": { value: 92, level: "high" },
                                "Source Citations": { value: 88, level: "high" },
                                "Data Verification": { value: 95, level: "high" },
                                "Quote Accuracy": { value: 85, level: "high" }
                            }
                        },
                        crossValidation: {
                            score: 87,
                            details: "Story corroborated by 12+ other major news outlets",
                            metrics: {
                                "Source Agreement": { value: 90, level: "high" },
                                "Timeline Match": { value: 88, level: "high" },
                                "Detail Consistency": { value: 85, level: "high" },
                                "Coverage Breadth": { value: 82, level: "high" }
                            }
                        },
                        aiDetection: {
                            score: 15,
                            details: "Human-written content with natural language patterns",
                            metrics: {
                                "AI Probability": { value: 15, level: "low" },
                                "Writing Patterns": { value: 12, level: "low" },
                                "Stylistic Markers": { value: 18, level: "low" },
                                "Content Originality": { value: 90, level: "high" }
                            }
                        },
                        logicalConsistency: {
                            score: 88,
                            details: "Claims and timeline are internally consistent",
                            metrics: {
                                "Timeline Logic": { value: 90, level: "high" },
                                "Claim Consistency": { value: 87, level: "high" },
                                "Data Alignment": { value: 85, level: "high" },
                                "Narrative Flow": { value: 88, level: "high" }
                            }
                        },
                        timeliness: {
                            score: 95,
                            details: "Article updated with latest information and corrections",
                            metrics: {
                                "Publication Date": { value: 95, level: "high" },
                                "Update Frequency": { value: 92, level: "high" },
                                "Information Currency": { value: 98, level: "high" },
                                "Correction History": { value: 90, level: "high" }
                            }
                        }
                    }
                };
            }

            displayResults(data) {
                // Hide loading, show results
                document.getElementById('loading').classList.remove('active');
                document.getElementById('results').classList.add('active');

                // Update trust score with animation
                this.animateTrustScore(data.trustScore);
                document.getElementById('trustLabel').textContent = data.trustLabel;

                // Update basic info
                document.getElementById('sourceAuthor').textContent = `${data.source} - by ${data.author}`;
                document.getElementById('articleSummary').textContent = data.summary;

                // Update key findings
                const findingsList = document.getElementById('keyFindings');
                findingsList.innerHTML = '';
                data.keyFindings.forEach(finding => {
                    const li = document.createElement('li');
                    li.textContent = finding.text;
                    if (finding.type === 'warning') li.classList.add('warning');
                    if (finding.type === 'danger') li.classList.add('danger');
                    findingsList.appendChild(li);
                });

                // Create analysis cards
                this.createAnalysisCards(data.detailedAnalysis);

                // Hide upgrade CTA since we're in Pro mode for testing
                document.getElementById('upgradeCTA').style.display = 'none';
            }

            animateTrustScore(score) {
                const circle = document.getElementById('trustCircle');
                const text = document.getElementById('trustScoreText');
                const circumference = 2 * Math.PI * 90;
                const offset = circumference - (score / 100) * circumference;
                
                // Set color based on score
                let color = '#e74c3c'; // red
                if (score >= 70) color = '#27ae60'; // green
                else if (score >= 40) color = '#f39c12'; // orange
                
                circle.style.stroke = color;
                
                // Animate
                let currentScore = 0;
                const increment = score / 50;
                const timer = setInterval(() => {
                    currentScore += increment;
                    if (currentScore >= score) {
                        currentScore = score;
                        clearInterval(timer);
                    }
                    text.textContent = Math.round(currentScore);
                    circle.style.strokeDashoffset = circumference - (currentScore / 100) * circumference;
                }, 20);
            }

            createAnalysisCards(analysis) {
                const container = document.getElementById('analysisCards');
                container.innerHTML = '';

                const cards = [
                    {
                        id: 'sourceCredibility',
                        icon: '🏛️',
                        title: 'Source Credibility Analysis',
                        preview: `Trust score: ${analysis.sourceCredibility.score}/100`,
                        explanation: `This analysis evaluates the news outlet's overall trustworthiness by examining multiple factors:
                        
                        • Historical accuracy of their reporting
                        • Editorial standards and corrections policy  
                        • Transparency about ownership and funding
                        • Recognition by journalism organizations
                        
                        We compared this source against our database of 2,500+ news outlets and fact-checking records from the past 5 years.`,
                        methodology: `Our AI analyzed 15,000+ articles from this source and cross-referenced with fact-checking databases including Snopes, FactCheck.org, and PolitiFact.`,
                        data: analysis.sourceCredibility
                    },
                    {
                        id: 'authorBackground',
                        icon: '👤',
                        title: 'Author Background Check',
                        preview: `Credibility: ${analysis.authorBackground.score}/100`,
                        explanation: `We verify the author's credentials and track record:
                        
                        • Professional journalism experience and education
                        • Previous work and accuracy history
                        • Subject matter expertise in the topic area
                        • Awards, recognitions, and professional affiliations
                        
                        A high score indicates an established journalist with relevant expertise.`,
                        methodology: `We searched 500+ news databases and professional networks to verify the author's background and previous work.`,
                        data: analysis.authorBackground,
                        authorLink: 'https://twitter.com/kevinliptakcnn' // Example - would be dynamic
                    },
                    {
                        id: 'biasDetection',
                        icon: '⚖️',
                        title: 'Bias & Objectivity Report',
                        preview: `Objectivity: ${analysis.biasDetection.score}/100`,
                        explanation: `This measures political bias and objectivity in the article:
                        
                        • Language analysis for loaded or emotional terms
                        • Balance of sources and viewpoints presented
                        • Distinction between facts and opinions
                        • Comparison with neutral reporting standards
                        
                        Important: Bias is neither right nor wrong, but rather an indicator of the author's perspective and intended audience. All news sources have some degree of bias.`,
                        methodology: `Our AI analyzed word choice, source selection, and framing against a baseline of 10,000+ articles from across the political spectrum.`,
                        data: analysis.biasDetection,
                        showBiasGauge: true
                    },
                    {
                        id: 'factVerification',
                        icon: '✓',
                        title: 'Fact Verification Results',
                        preview: `Accuracy: ${analysis.factVerification.score}/100`,
                        explanation: `We verify specific claims made in the article:
                        
                        • Cross-referencing with official sources and databases
                        • Checking quotes against original sources
                        • Verifying statistics and data points
                        • Confirming dates, locations, and events
                        
                        Each claim is rated as verified, unverified, or disputed based on available evidence.`,
                        methodology: `We checked ${Math.floor(15 + Math.random() * 10)} specific claims against official records, academic sources, and verified databases.`,
                        data: analysis.factVerification
                    },
                    {
                        id: 'crossValidation',
                        icon: '🔄',
                        title: 'Cross-Source Validation',
                        preview: `Corroboration: ${analysis.crossValidation.score}/100`,
                        explanation: `We check if other reputable sources report the same information:
                        
                        • Number of independent sources confirming the story
                        • Quality and diversity of corroborating sources
                        • Consistency of key facts across sources
                        • Timing of reports (who reported first)
                        
                        Higher scores indicate widespread, consistent reporting across multiple trusted outlets.`,
                        methodology: `We analyzed ${12 + Math.floor(Math.random() * 8)} other news sources covering this story, including international outlets.`,
                        data: analysis.crossValidation
                    },
                    {
                        id: 'aiDetection',
                        icon: '🤖',
                        title: 'AI/Manipulation Detection',
                        preview: `AI probability: ${analysis.aiDetection.score}%`,
                        explanation: `We detect signs of AI-generated content or manipulation:
                        
                        • Writing patterns typical of AI systems
                        • Unusual sentence structures or repetitions
                        • Factual inconsistencies common in AI text
                        • Image manipulation or deepfake detection
                        
                        Low scores (under 20%) indicate human-written content. High scores suggest possible AI involvement.`,
                        methodology: `Using advanced pattern recognition trained on millions of human and AI-written samples, plus image forensics for visual content.`,
                        data: analysis.aiDetection
                    },
                    {
                        id: 'logicalConsistency',
                        icon: '🧩',
                        title: 'Logical Consistency Check',
                        preview: `Consistency: ${analysis.logicalConsistency.score}/100`,
                        explanation: `We analyze the internal logic and consistency of the article:
                        
                        • Timeline consistency (do dates and sequences make sense?)
                        • Logical flow of arguments and evidence
                        • Contradictions within the article
                        • Cause-and-effect relationships
                        
                        High scores indicate clear, consistent reporting without logical flaws.`,
                        methodology: `Our AI performed deep semantic analysis on the article structure, checking for ${8 + Math.floor(Math.random() * 5)} potential logical inconsistencies.`,
                        data: analysis.logicalConsistency
                    },
                    {
                        id: 'timeliness',
                        icon: '📅',
                        title: 'Timeliness & Updates',
                        preview: `Currency: ${analysis.timeliness.score}/100`,
                        explanation: `We check if the information is current and properly updated:
                        
                        • Publication date vs. event date
                        • Updates and corrections history
                        • Inclusion of latest developments
                        • Proper dating of all information
                        
                        High scores indicate timely, up-to-date reporting with clear timestamps.`,
                        methodology: `We tracked the story timeline and checked for ${5 + Math.floor(Math.random() * 5)} updates or corrections since initial publication.`,
                        data: analysis.timeliness
                    },
                    {
                        id: 'download',
                        icon: '📄',
                        title: 'Download Full Report',
                        preview: 'Get detailed PDF analysis with all findings',
                        isDownload: true
                    }
                ];

                cards.forEach(card => {
                    const cardElement = this.createCard(card);
                    container.appendChild(cardElement);
                });
            }

            createCard(cardData) {
                const card = document.createElement('div');
                card.className = 'analysis-card';  // No locked class since isProUser = true
                
                const header = document.createElement('div');
                header.className = 'card-header';
                header.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <div class="card-icon">${cardData.icon}</div>
                        <div class="card-info">
                            <div class="card-title">${cardData.title}</div>
                            <div class="card-preview">${cardData.preview}</div>
                        </div>
                    </div>
                    <div class="expand-icon">▼</div>
                `;

                if (cardData.isDownload) {
                    header.style.cursor = 'pointer';
                    header.addEventListener('click', () => {
                        this.downloadReport();
                    });
                } else {
                    header.addEventListener('click', () => {
                        card.classList.toggle('expanded');
                    });
                }

                card.appendChild(header);

                if (!cardData.isDownload && cardData.data) {
                    const content = document.createElement('div');
                    content.className = 'card-content';
                    
                    const body = document.createElement('div');
                    body.className = 'card-body';
                    
                    body.innerHTML = `
                        <div class="explanation-box">
                            <h4>What this analysis tells you:</h4>
                            <p>${cardData.explanation}</p>
                            ${cardData.methodology ? `<div class="methodology-note"><strong>How we did this:</strong> ${cardData.methodology}</div>` : ''}
                        </div>
                        <div class="analysis-details">
                            <p style="margin-bottom: 20px;"><strong>Analysis Result:</strong> ${cardData.data.details}</p>
                            ${cardData.authorLink ? `<p style="margin-bottom: 20px;"><a href="${cardData.authorLink}" target="_blank" style="color: #3498db;">View author's profile →</a></p>` : ''}
                            ${cardData.showBiasGauge ? this.createBiasGauge(cardData.data) : ''}
                            <div class="metrics">
                                <h5 style="margin-bottom: 15px; color: #2c3e50;">Detailed Metrics:</h5>
                                ${Object.entries(cardData.data.metrics).map(([key, metric]) => `
                                    <div class="metric-item">
                                        <div>
                                            <div class="metric-label">${key}</div>
                                            ${this.getMetricDescription(key, metric.value)}
                                        </div>
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <div class="metric-bar">
                                                <div class="metric-fill ${metric.level}" style="width: ${metric.value}%"></div>
                                            </div>
                                            <span style="font-weight: 600; color: ${this.getScoreColor(metric.value)}; min-width: 40px;">${metric.value}%</span>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                            <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 6px; text-align: center;">
                                <p style="color: #7f8c8d; font-size: 14px; margin: 0;">
                                    <strong>Facts & Fakes AI</strong> uses advanced machine learning and cross-references multiple databases to provide you with the most comprehensive news verification available.
                                </p>
                            </div>
                        </div>
                    `;
                    
                    content.appendChild(body);
                    card.appendChild(content);
                }

                return card;
            }

            downloadReport() {
                alert('PDF generation is being connected to your backend. This will generate a comprehensive report with all analysis data.');
                // Will be connected to your /api/generate-pdf endpoint
            }

            getMetricDescription(metricName, value) {
                const descriptions = {
                    'Domain Authority': `<div class="metric-description">Website's overall credibility ranking. ${value > 80 ? 'Very established source' : value > 60 ? 'Well-known source' : 'Less established source'}</div>`,
                    'Fact-Check History': `<div class="metric-description">Track record of accurate reporting. ${value > 80 ? 'Excellent accuracy record' : value > 60 ? 'Generally accurate' : 'Some accuracy concerns'}</div>`,
                    'Transparency': `<div class="metric-description">Openness about ownership, funding, and corrections. ${value > 80 ? 'Very transparent' : value > 60 ? 'Reasonably transparent' : 'Limited transparency'}</div>`,
                    'Editorial Standards': `<div class="metric-description">Quality of editorial oversight and ethics. ${value > 80 ? 'High standards' : value > 60 ? 'Good standards' : 'Basic standards'}</div>`,
                    'Experience Level': `<div class="metric-description">Author's years in journalism. ${value > 80 ? '10+ years experience' : value > 60 ? '5-10 years' : 'Less than 5 years'}</div>`,
                    'Subject Expertise': `<div class="metric-description">Knowledge in this specific topic area. ${value > 80 ? 'Subject matter expert' : value > 60 ? 'Good knowledge' : 'General reporter'}</div>`,
                    'Language Neutrality': `<div class="metric-description">Use of neutral vs charged language. ${value > 80 ? 'Very neutral tone' : value > 60 ? 'Mostly neutral' : 'Some charged language'}</div>`,
                    'Source Diversity': `<div class="metric-description">Range of viewpoints included. ${value > 80 ? 'Very balanced sources' : value > 60 ? 'Good variety' : 'Limited perspectives'}</div>`,
                    'AI Probability': `<div class="metric-description">Likelihood of AI-generated content. ${value < 20 ? 'Definitely human-written' : value < 50 ? 'Possibly AI-assisted' : 'Likely AI-generated'}</div>`,
                    'Timeline Logic': `<div class="metric-description">Whether dates and sequences are logical. ${value > 80 ? 'Perfect timeline' : value > 60 ? 'Minor issues' : 'Timeline problems'}</div>`
                };
                
                return descriptions[metricName] || '<div class="metric-description">Score indicates quality level</div>';
            }

            getScoreColor(value) {
                if (value >= 80) return '#27ae60';
                if (value >= 60) return '#f39c12';
                return '#e74c3c';
            }

            createBiasGauge(biasData) {
                // This would create a visual bias gauge
                const biasScore = biasData.metrics['Language Neutrality'].value;
                const biasDirection = biasScore < 40 ? 'left' : biasScore > 60 ? 'right' : 'center';
                
                return `
                    <div style="margin: 20px 0; padding: 20px; background: #fff; border-radius: 8px; border: 1px solid #e0e0e0;">
                        <h5 style="text-align: center; margin-bottom: 15px;">Political Bias Indicator</h5>
                        <div style="position: relative; height: 40px; background: linear-gradient(to right, #3498db 0%, #ecf0f1 50%, #e74c3c 100%); border-radius: 20px; margin: 10px 0;">
                            <div style="position: absolute; top: 50%; left: ${biasScore}%; transform: translate(-50%, -50%); width: 20px; height: 20px; background: #2c3e50; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 4px rgba(0,0,0,0.2);"></div>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-top: 10px; font-size: 14px;">
                            <span style="color: #3498db;">← Left-leaning</span>
                            <span style="color: #7f8c8d;">Neutral</span>
                            <span style="color: #e74c3c;">Right-leaning →</span>
                        </div>
                        <p style="text-align: center; margin-top: 15px; color: #7f8c8d; font-size: 14px; font-style: italic;">
                            Remember: Bias indicates perspective, not truthfulness. Quality journalism can exist across the political spectrum.
                        </p>
                    </div>
                `;
            }
        }

        // Initialize the analyzer
        const analyzer = new NewsAnalyzer();
    </script>
</body>
</html>
