<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>News Truth Analyzer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #f5f7fa;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Header */
        .header {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
            text-align: center;
        }

        .header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .header p {
            color: #7f8c8d;
        }

        /* URL Input */
        .input-section {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .input-group {
            display: flex;
            gap: 12px;
            margin-bottom: 15px;
        }

        #urlInput {
            flex: 1;
            padding: 14px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }

        #urlInput:focus {
            outline: none;
            border-color: #3498db;
        }

        #analyzeBtn {
            padding: 14px 30px;
            background: #3498db;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        #analyzeBtn:hover {
            background: #2980b9;
            transform: translateY(-1px);
        }

        #analyzeBtn:disabled {
            background: #95a5a6;
            cursor: not-allowed;
            transform: none;
        }

        .free-limit-warning {
            background: #fff3cd;
            color: #856404;
            padding: 12px 16px;
            border-radius: 6px;
            font-size: 14px;
            display: none;
        }

        /* Loading State */
        .loading {
            display: none;
            text-align: center;
            padding: 60px;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }

        .loading.active {
            display: block;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            margin: 0 auto 20px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Results Section */
        .results {
            display: none;
        }

        .results.active {
            display: block;
        }

        /* Overall Assessment Box */
        .overall-assessment {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .trust-score-container {
            text-align: center;
            margin-bottom: 30px;
        }

        .trust-score {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }

        .trust-score svg {
            transform: rotate(-90deg);
        }

        .trust-score-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
        }

        .trust-label {
            font-size: 18px;
            margin-top: 15px;
            font-weight: 600;
        }

        .source-info {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .source-info h3 {
            color: #2c3e50;
            margin-bottom: 8px;
        }

        .article-summary {
            background: #e8f4f8;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .key-findings {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 8px;
        }

        .key-findings h3 {
            color: #2c3e50;
            margin-bottom: 15px;
        }

        .key-findings ul {
            list-style: none;
        }

        .key-findings li {
            padding: 8px 0;
            padding-left: 24px;
            position: relative;
        }

        .key-findings li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #27ae60;
        }

        .key-findings li.warning:before {
            content: "⚠";
            color: #f39c12;
        }

        .key-findings li.danger:before {
            content: "✗";
            color: #e74c3c;
        }

        /* Pro Features Section */
        .pro-features {
            background: #fff;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 30px;
        }

        .pro-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .pro-badge {
            background: #9b59b6;
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
        }

        /* Analysis Cards */
        .analysis-card {
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 12px;
            overflow: hidden;
            transition: all 0.3s;
        }

        .analysis-card.locked {
            opacity: 0.7;
        }

        .card-header {
            padding: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
            transition: background 0.3s;
        }

        .card-header:hover {
            background: #e9ecef;
        }

        .card-icon {
            width: 40px;
            height: 40px;
            background: #3498db;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 20px;
        }

        .card-info {
            flex: 1;
        }

        .card-title {
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 4px;
        }

        .card-preview {
            font-size: 14px;
            color: #7f8c8d;
        }

        .expand-icon {
            font-size: 20px;
            color: #7f8c8d;
            transition: transform 0.3s;
        }

        .analysis-card.expanded .expand-icon {
            transform: rotate(180deg);
        }

        .card-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .analysis-card.expanded .card-content {
            max-height: 1000px;
        }

        .card-body {
            padding: 0 20px 20px;
        }

        .explanation-box {
            background: #e8f4f8;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            border-left: 4px solid #3498db;
        }

        .explanation-box h4 {
            color: #2980b9;
            margin-bottom: 8px;
        }

        .analysis-details {
            background: white;
            padding: 20px;
            border-radius: 6px;
        }

        .metric-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
        }

        .metric-item:last-child {
            border-bottom: none;
        }

        .metric-bar {
            width: 150px;
            height: 8px;
            background: #e0e0e0;
            border-radius: 4px;
            overflow: hidden;
        }

        .metric-fill {
            height: 100%;
            transition: width 0.5s;
        }

        .metric-fill.high {
            background: #27ae60;
        }

        .metric-fill.medium {
            background: #f39c12;
        }

        .metric-fill.low {
            background: #e74c3c;
        }

        /* Upgrade CTA */
        .upgrade-cta {
            background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
            color: white;
            padding: 30px;
            border-radius: 12px;
            text-align: center;
            margin-top: 30px;
        }

        .upgrade-cta h3 {
            margin-bottom: 15px;
        }

        .upgrade-cta p {
            margin-bottom: 20px;
            opacity: 0.9;
        }

        .upgrade-btn {
            background: white;
            color: #9b59b6;
            padding: 12px 30px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .input-group {
                flex-direction: column;
            }

            #analyzeBtn {
                width: 100%;
            }

            .trust-score {
                width: 150px;
                height: 150px;
            }

            .trust-score-text {
                font-size: 36px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🔍 News Truth Analyzer</h1>
            <p>Professional news verification powered by AI</p>
        </div>

        <div class="input-section">
            <div class="input-group">
                <input type="url" id="urlInput" placeholder="Enter news article URL..." value="https://www.cnn.com/2024/11/06/politics/trump-wins-2024-presidential-election/index.html">
                <button id="analyzeBtn">Analyze Article</button>
            </div>
            <div class="free-limit-warning" id="freeLimitWarning">
                ⚠️ Free tier limit: 1 analysis per day. <a href="#upgrade">Upgrade to Pro</a> for unlimited analyses.
            </div>
        </div>

        <div class="loading" id="loading">
            <div class="spinner"></div>
            <h3>Analyzing Article...</h3>
            <p>Running comprehensive verification checks</p>
        </div>

        <div class="results" id="results">
            <!-- Overall Assessment (Free Tier) -->
            <div class="overall-assessment">
                <div class="trust-score-container">
                    <div class="trust-score">
                        <svg width="200" height="200">
                            <circle cx="100" cy="100" r="90" fill="none" stroke="#e0e0e0" stroke-width="20"/>
                            <circle id="trustCircle" cx="100" cy="100" r="90" fill="none" stroke="#3498db" stroke-width="20" stroke-dasharray="565.5" stroke-dashoffset="565.5"/>
                        </svg>
                        <div class="trust-score-text" id="trustScoreText">0</div>
                    </div>
                    <div class="trust-label" id="trustLabel">Calculating...</div>
                </div>

                <div class="source-info">
                    <h3>Source & Author</h3>
                    <p id="sourceAuthor">Loading...</p>
                </div>

                <div class="article-summary">
                    <h3>Article Summary</h3>
                    <p id="articleSummary">Loading...</p>
                </div>

                <div class="key-findings">
                    <h3>Key Findings</h3>
                    <ul id="keyFindings">
                        <li>Loading analysis results...</li>
                    </ul>
                </div>
            </div>

            <!-- Pro Features -->
            <div class="pro-features">
                <div class="pro-header">
                    <h2>Detailed Analysis</h2>
                    <span class="pro-badge">PRO</span>
                </div>

                <!-- Analysis Cards -->
                <div id="analysisCards">
                    <!-- Cards will be dynamically inserted here -->
                </div>
            </div>

            <!-- Upgrade CTA -->
            <div class="upgrade-cta" id="upgradeCTA" style="display: none;">
                <h3>🚀 Unlock Full Analysis</h3>
                <p>Get detailed insights, fact-checking, bias detection, and more with Pro</p>
                <button class="upgrade-btn">Upgrade to Pro - $9.99/month</button>
            </div>
        </div>
    </div>

    <script>
        // Analysis system
        class NewsAnalyzer {
            constructor() {
                this.isProUser = false;
                this.freeUsageCount = parseInt(localStorage.getItem('freeUsageCount') || '0');
                this.lastUsageDate = localStorage.getItem('lastUsageDate') || '';
                this.checkDailyLimit();
                this.initializeEventListeners();
            }

            checkDailyLimit() {
                const today = new Date().toDateString();
                if (this.lastUsageDate !== today) {
                    this.freeUsageCount = 0;
                    this.lastUsageDate = today;
                    localStorage.setItem('lastUsageDate', today);
                    localStorage.setItem('freeUsageCount', '0');
                }
            }

            initializeEventListeners() {
                document.getElementById('analyzeBtn').addEventListener('click', () => this.analyzeArticle());
                document.getElementById('urlInput').addEventListener('keypress', (e) => {
                    if (e.key === 'Enter') this.analyzeArticle();
                });
            }

            async analyzeArticle() {
                const url = document.getElementById('urlInput').value.trim();
                if (!url) {
                    alert('Please enter a valid URL');
                    return;
                }

                // Check free tier limit
                if (false) {  // Disabled for development
                    document.getElementById('freeLimitWarning').style.display = 'block';
                    document.getElementById('upgradeCTA').style.display = 'block';
                    return;
                }

                // Show loading
                document.getElementById('loading').classList.add('active');
                document.getElementById('results').classList.remove('active');

                // Simulate analysis (in real implementation, this would call your backend)
                setTimeout(() => {
                    this.displayResults(this.getMockAnalysisData());
                    
                    // Increment usage count for free users
                    if (!this.isProUser) {
                        this.freeUsageCount++;
                        localStorage.setItem('freeUsageCount', this.freeUsageCount.toString());
                    }
                }, 2000);
            }

            getMockAnalysisData() {
                return {
                    trustScore: 82,
                    trustLabel: "Mostly Trustworthy",
                    source: "CNN",
                    author: "Kevin Liptak",
                    summary: "Analysis of Donald Trump's victory in the 2024 presidential election, covering key swing states, voter demographics, and factors that led to his return to the White House. The article examines the political landscape and implications for both parties.",
                    keyFindings: [
                        { text: "Credible mainstream news source with established reputation", type: "success" },
                        { text: "Author is a verified political correspondent with track record", type: "success" },
                        { text: "Some partisan language detected in analysis sections", type: "warning" },
                        { text: "Facts cross-verified with multiple sources", type: "success" },
                        { text: "Timeline and claims are logically consistent", type: "success" },
                        { text: "Recommended: Cross-reference with other sources for complete picture", type: "info" }
                    ],
                    detailedAnalysis: {
                        sourceCredibility: {
                            score: 85,
                            details: "CNN is an established news organization with professional editorial standards",
                            metrics: {
                                "Domain Authority": { value: 92, level: "high" },
                                "Fact-Check History": { value: 78, level: "high" },
                                "Transparency": { value: 80, level: "high" },
                                "Editorial Standards": { value: 85, level: "high" }
                            }
                        },
                        authorBackground: {
                            score: 88,
                            details: "Kevin Liptak is a White House reporter with 10+ years experience",
                            metrics: {
                                "Experience Level": { value: 90, level: "high" },
                                "Subject Expertise": { value: 85, level: "high" },
                                "Verification Status": { value: 95, level: "high" },
                                "Previous Work": { value: 82, level: "high" }
                            }
                        },
                        biasDetection: {
                            score: 72,
                            details: "Slight left-leaning bias detected in word choice and framing",
                            metrics: {
                                "Language Neutrality": { value: 68, level: "medium" },
                                "Source Diversity": { value: 75, level: "high" },
                                "Opinion vs Fact": { value: 70, level: "medium" },
                                "Emotional Language": { value: 65, level: "medium" }
                            }
                        },
                        factVerification: {
                            score: 90,
                            details: "Key claims verified against official sources and data",
                            metrics: {
                                "Claim Accuracy": { value: 92, level: "high" },
                                "Source Citations": { value: 88, level: "high" },
                                "Data Verification": { value: 95, level: "high" },
                                "Quote Accuracy": { value: 85, level: "high" }
                            }
                        },
                        crossValidation: {
                            score: 87,
                            details: "Story corroborated by 12+ other major news outlets",
                            metrics: {
                                "Source Agreement": { value: 90, level: "high" },
                                "Timeline Match": { value: 88, level: "high" },
                                "Detail Consistency": { value: 85, level: "high" },
                                "Coverage Breadth": { value: 82, level: "high" }
                            }
                        },
                        aiDetection: {
                            score: 15,
                            details: "Human-written content with natural language patterns",
                            metrics: {
                                "AI Probability": { value: 15, level: "low" },
                                "Writing Patterns": { value: 12, level: "low" },
                                "Stylistic Markers": { value: 18, level: "low" },
                                "Content Originality": { value: 90, level: "high" }
                            }
                        },
                        logicalConsistency: {
                            score: 88,
                            details: "Claims and timeline are internally consistent",
                            metrics: {
                                "Timeline Logic": { value: 90, level: "high" },
                                "Claim Consistency": { value: 87, level: "high" },
                                "Data Alignment": { value: 85, level: "high" },
                                "Narrative Flow": { value: 88, level: "high" }
                            }
                        },
                        timeliness: {
                            score: 95,
                            details: "Article updated with latest information and corrections",
                            metrics: {
                                "Publication Date": { value: 95, level: "high" },
                                "Update Frequency": { value: 92, level: "high" },
                                "Information Currency": { value: 98, level: "high" },
                                "Correction History": { value: 90, level: "high" }
                            }
                        }
                    }
                };
            }

            displayResults(data) {
                // Hide loading, show results
                document.getElementById('loading').classList.remove('active');
                document.getElementById('results').classList.add('active');

                // Update trust score with animation
                this.animateTrustScore(data.trustScore);
                document.getElementById('trustLabel').textContent = data.trustLabel;

                // Update basic info
                document.getElementById('sourceAuthor').textContent = `${data.source} - by ${data.author}`;
                document.getElementById('articleSummary').textContent = data.summary;

                // Update key findings
                const findingsList = document.getElementById('keyFindings');
                findingsList.innerHTML = '';
                data.keyFindings.forEach(finding => {
                    const li = document.createElement('li');
                    li.textContent = finding.text;
                    if (finding.type === 'warning') li.classList.add('warning');
                    if (finding.type === 'danger') li.classList.add('danger');
                    findingsList.appendChild(li);
                });

                // Create analysis cards
                this.createAnalysisCards(data.detailedAnalysis);

                // Show upgrade CTA for free users
                if (!this.isProUser) {
                    document.getElementById('upgradeCTA').style.display = 'block';
                }
            }

            animateTrustScore(score) {
                const circle = document.getElementById('trustCircle');
                const text = document.getElementById('trustScoreText');
                const circumference = 2 * Math.PI * 90;
                const offset = circumference - (score / 100) * circumference;
                
                // Set color based on score
                let color = '#e74c3c'; // red
                if (score >= 70) color = '#27ae60'; // green
                else if (score >= 40) color = '#f39c12'; // orange
                
                circle.style.stroke = color;
                
                // Animate
                let currentScore = 0;
                const increment = score / 50;
                const timer = setInterval(() => {
                    currentScore += increment;
                    if (currentScore >= score) {
                        currentScore = score;
                        clearInterval(timer);
                    }
                    text.textContent = Math.round(currentScore);
                    circle.style.strokeDashoffset = circumference - (currentScore / 100) * circumference;
                }, 20);
            }

            createAnalysisCards(analysis) {
                const container = document.getElementById('analysisCards');
                container.innerHTML = '';

                const cards = [
                    {
                        id: 'sourceCredibility',
                        icon: '🏛️',
                        title: 'Source Credibility Analysis',
                        preview: `Trust score: ${analysis.sourceCredibility.score}/100`,
                        explanation: 'Evaluates the news outlet\'s reputation, fact-checking history, and editorial standards.',
                        data: analysis.sourceCredibility
                    },
                    {
                        id: 'authorBackground',
                        icon: '👤',
                        title: 'Author Background Check',
                        preview: `Credibility: ${analysis.authorBackground.score}/100`,
                        explanation: 'Verifies the author\'s credentials, expertise, and track record.',
                        data: analysis.authorBackground
                    },
                    {
                        id: 'biasDetection',
                        icon: '⚖️',
                        title: 'Bias & Objectivity Report',
                        preview: `Objectivity: ${analysis.biasDetection.score}/100`,
                        explanation: 'Detects political bias, emotional language, and opinion vs fact ratios.',
                        data: analysis.biasDetection
                    },
                    {
                        id: 'factVerification',
                        icon: '✓',
                        title: 'Fact Verification Results',
                        preview: `Accuracy: ${analysis.factVerification.score}/100`,
                        explanation: 'Verifies claims against trusted sources and official data.',
                        data: analysis.factVerification
                    },
                    {
                        id: 'crossValidation',
                        icon: '🔄',
                        title: 'Cross-Source Validation',
                        preview: `Corroboration: ${analysis.crossValidation.score}/100`,
                        explanation: 'Checks if other reputable sources report the same information.',
                        data: analysis.crossValidation
                    },
                    {
                        id: 'aiDetection',
                        icon: '🤖',
                        title: 'AI/Manipulation Detection',
                        preview: `AI probability: ${analysis.aiDetection.score}%`,
                        explanation: 'Detects AI-generated content and manipulation techniques.',
                        data: analysis.aiDetection
                    },
                    {
                        id: 'logicalConsistency',
                        icon: '🧩',
                        title: 'Logical Consistency Check',
                        preview: `Consistency: ${analysis.logicalConsistency.score}/100`,
                        explanation: 'Ensures claims don\'t contradict each other and timelines make sense.',
                        data: analysis.logicalConsistency
                    },
                    {
                        id: 'timeliness',
                        icon: '📅',
                        title: 'Timeliness & Updates',
                        preview: `Currency: ${analysis.timeliness.score}/100`,
                        explanation: 'Checks if information is current and properly updated.',
                        data: analysis.timeliness
                    },
                    {
                        id: 'download',
                        icon: '📄',
                        title: 'Download Full Report',
                        preview: 'Get detailed PDF analysis',
                        isDownload: true
                    }
                ];

                cards.forEach(card => {
                    const cardElement = this.createCard(card);
                    container.appendChild(cardElement);
                });
            }

            createCard(cardData) {
                const card = document.createElement('div');
                card.className = 'analysis-card' + (this.isProUser ? '' : ' locked');
                
                const header = document.createElement('div');
                header.className = 'card-header';
                header.innerHTML = `
                    <div style="display: flex; align-items: center;">
                        <div class="card-icon">${cardData.icon}</div>
                        <div class="card-info">
                            <div class="card-title">${cardData.title}</div>
                            <div class="card-preview">${cardData.preview}</div>
                        </div>
                    </div>
                    <div class="expand-icon">▼</div>
                `;

                if (cardData.isDownload) {
                    header.style.cursor = 'pointer';
                    header.addEventListener('click', () => {
                        if (this.isProUser) {
                            this.downloadReport();
                        } else {
                            alert('Upgrade to Pro to download detailed reports');
                        }
                    });
                } else {
                    header.addEventListener('click', () => {
                        if (this.isProUser) {
                            card.classList.toggle('expanded');
                        } else {
                            alert('Upgrade to Pro to see detailed analysis');
                        }
                    });
                }

                card.appendChild(header);

                if (!cardData.isDownload && cardData.data) {
                    const content = document.createElement('div');
                    content.className = 'card-content';
                    
                    const body = document.createElement('div');
                    body.className = 'card-body';
                    
                    body.innerHTML = `
                        <div class="explanation-box">
                            <h4>What this tells you:</h4>
                            <p>${cardData.explanation}</p>
                        </div>
                        <div class="analysis-details">
                            <p style="margin-bottom: 20px;"><strong>Analysis:</strong> ${cardData.data.details}</p>
                            <div class="metrics">
                                ${Object.entries(cardData.data.metrics).map(([key, metric]) => `
                                    <div class="metric-item">
                                        <span>${key}</span>
                                        <div class="metric-bar">
                                            <div class="metric-fill ${metric.level}" style="width: ${metric.value}%"></div>
                                        </div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    
                    content.appendChild(body);
                    card.appendChild(content);
                }

                return card;
            }

            downloadReport() {
                alert('PDF download would be implemented here');
                // In real implementation, this would generate and download a PDF
            }
        }

        // Initialize the analyzer
        const analyzer = new NewsAnalyzer();
    </script>
</body>
</html>
