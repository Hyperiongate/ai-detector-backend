<!DOCTYPE html>
<html lang="en">  
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>AI Detection Pro - Content Analysis Platform</title>
    
    <!-- Google Analytics 4 Integration -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9CLSNV2S8Q"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date()); 
        gtag('config', 'G-9CLSNV2S8Q');
        
        // Custom Analytics Events for AI Detection Page
        function trackAIEvent(eventName, eventData = {}) {
            gtag('event', eventName, {
                event_category: 'AI_Detection',
                page_title: 'AI Detection Pro - Content Analysis Platform',
                ...eventData
            });
            
            // Backend analytics tracking
            if (typeof backendAnalytics !== 'undefined') {
                backendAnalytics.track(eventName, {
                    page: 'ai_detection',
                    timestamp: new Date().toISOString(),
                    ...eventData
                });
            }
        }
        
        // Track page view
        gtag('event', 'page_view', {
            page_title: 'AI Detection Pro - Content Analysis Platform',
            page_location: window.location.href,
            content_group1: 'AI Detection'
        });
    </script>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🤖</text></svg>">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            padding-top: 60px;
        }

        /* Beta Banner */
        .beta-banner {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            padding: 8px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .beta-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 3s infinite;
            transform: rotate(45deg);
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .beta-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            color: white;
            font-weight: 600;
        }

        .beta-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .beta-join-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 6px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .beta-join-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .modal-header h2 {
            color: white;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }

        .modal-header p {
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-body .input-group {
            margin-bottom: 1rem;
        }

        .modal-body input {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            width: 100%;
            font-size: 1rem;
        }

        .modal-body input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .modal-footer {
            padding: 1.5rem 2rem 2rem;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            color: rgba(255,255,255,0.8);
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        /* Container adjustments */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Combined Header - NEW COMPACT DESIGN */
        .header {
            text-align: center;
            margin-bottom: 20px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .header .description {
            font-size: 0.95rem;
            opacity: 0.85;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Navigation Bar */
        .nav-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-links-secondary {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-links-secondary a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-links-secondary a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-links-secondary a.active {
            background: rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }

        /* Tool Container */
        .tool-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Compact Dropdown Grid - NEW LAYOUT */
        .dropdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        /* Compact Dropdown Section - REDESIGNED */
        .dropdown-section {
            border: 2px solid rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            overflow: hidden;
            background: white;
            transition: all 0.3s ease;
        }

        .dropdown-section:hover {
            border-color: rgba(102, 126, 234, 0.3);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .dropdown-header {
            background: rgba(102, 126, 234, 0.05);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 600;
            color: #4a5568;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            cursor: pointer;
            min-height: 48px;
        }

        .dropdown-header:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .dropdown-header.open {
            background: rgba(102, 126, 234, 0.15);
            border-bottom: 2px solid #667eea;
        }

        .dropdown-header span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dropdown-header i {
            font-size: 1.1rem;
            color: #667eea;
        }

        .dropdown-icon {
            transition: transform 0.3s ease;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .dropdown-header.open .dropdown-icon {
            transform: rotate(180deg);
        }

        .dropdown-content {
            display: none;
            padding: 20px;
            background: white;
            border-top: 1px solid rgba(102, 126, 234, 0.1);
            max-height: 600px;
            overflow-y: auto;
        }

        .dropdown-content.open {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Tools Section */
        .tools-employed {
            background: linear-gradient(145deg, #f8fafc, #ffffff);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: relative;
            overflow: hidden;
        }

        .tools-employed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #667eea, #764ba2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .tools-title {
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .tool-item {
            background: rgba(102, 126, 234, 0.05);
            padding: 15px 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            font-size: 0.95rem;
            font-weight: 600;
            color: #4a5568;
            transition: all 0.3s ease;
        }

        .tool-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .tool-item i {
            margin-right: 8px;
            color: #667eea;
        }

        /* Enhanced Progress Section with Rainbow Animation */
        .progress-section {
            margin-bottom: 30px;
            background: linear-gradient(145deg, #f8fafc, #ffffff);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: sticky;
            top: 80px;
            z-index: 100;
            overflow: hidden;
        }

        .progress-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #10b981, #764ba2, #667eea);
            background-size: 300% 100%;
            animation: rainbow-flow 4s ease-in-out infinite;
        }

        @keyframes rainbow-flow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .progress-title {
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 25px;
            font-size: 1.3rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Enhanced colorful progress bar */
        .progress-bar {
            background: #e2e8f0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                #ff6b6b 0%, 
                #f06595 14%, 
                #cc5de8 28%, 
                #845ef7 42%, 
                #5c7cfa 56%, 
                #339af0 70%, 
                #22b8cf 84%, 
                #20c997 100%);
            border-radius: 13px;
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
            background-size: 200% 100%;
            animation: gradient-shift 3s ease-in-out infinite;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.6), 
                transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Progress percentage display */
        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-size: 1.1rem;
            z-index: 2;
        }

        /* Spinning icon and status text */
        .progress-status {
            text-align: center;
            color: #6b7280;
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .progress-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid transparent;
            border-top: 3px solid #667eea;
            border-right: 3px solid #10b981;
            border-bottom: 3px solid #764ba2;
            border-left: 3px solid #f59e0b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Input Section */
        .input-section {
            margin-bottom: 30px;
        }

        .input-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .input-tab {
            padding: 12px 24px;
            border: none;
            background: #f8fafc;
            color: #6b7280;
            font-weight: 600;
            cursor: pointer;
            border-radius: 10px 10px 0 0;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .input-tab:hover {
            background: #f1f5f9;
            color: #374151;
        }

        .input-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            transform: translateY(2px);
        }

        .input-content {
            display: none;
        }

        .input-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: #4a5568;
            font-size: 1rem;
        }

        .input-group input, .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            font-family: inherit;
        }

        .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-group textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.5;
        }

        /* File Upload Section */
        .file-upload-section {
            border: 2px dashed #667eea;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            background: rgba(102, 126, 234, 0.05);
        }

        .file-upload-section:hover {
            border-color: #764ba2;
            background: rgba(102, 126, 234, 0.1);
        }

        .file-upload-section.dragover {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .file-input {
            display: none;
        }

        .file-upload-label {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .file-upload-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* Button Styles */
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-test {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-test:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }

        /* Results Section */
        .results {
            display: none;
            margin-top: 30px;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Version Badge */
        .version-badge {
            position: absolute;
            top: -12px;
            right: 20px;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 700;
            color: white;
            z-index: 10;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .version-badge.free {
            background: linear-gradient(135deg, #6b7280, #4b5563);
        }

        .version-badge.pro {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }

        /* Result Cards */
        .result-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: relative;
            overflow: hidden;
        }

        .result-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #667eea, #764ba2);
        }

        .result-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
            color: #4a5568;
            font-weight: 700;
            font-size: 1.3rem;
        }

        .result-header i {
            color: #667eea;
            font-size: 1.4rem;
        }

        /* Score Circle */
        .score-circle {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.6rem;
            font-weight: 900;
            position: relative;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
            flex-shrink: 0;
            background: #e5e7eb;
        }

        .score-circle::before {
            content: '';
            position: absolute;
            width: 70px;
            height: 70px;
            background: white;
            border-radius: 50%;
            z-index: 1;
        }

        .score-text {
            position: relative;
            z-index: 2;
        }

        /* Data Grid */
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .data-item {
            background: #f8fafc;
            padding: 18px;
            border-radius: 12px;
            text-align: center;
            border: 2px solid rgba(102, 126, 234, 0.1);
            transition: all 0.3s ease;
        }

        .data-item:hover {
            background: #f1f5f9;
            transform: translateY(-2px);
        }

        .data-value {
            font-size: 1.6rem;
            font-weight: 700;
            color: #667eea;
            margin-bottom: 8px;
        }

        .data-label {
            font-size: 0.9rem;
            color: #6b7280;
            font-weight: 600;
        }

        /* Sample Buttons */
        .sample-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .sample-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .sample-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            z-index: 10000;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: none;
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            background: #10b981;
            color: white;
        }

        .notification.error {
            background: #ef4444;
            color: white;
        }

        .notification.info {
            background: #667eea;
            color: white;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* Pro Results Styles */
        .pro-summary-card {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 25px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: relative;
            overflow: hidden;
        }

        .pro-summary-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #10b981, #764ba2);
        }

        .pro-summary-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .pro-summary-header h2 {
            font-size: 1.8rem;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .pro-summary-metrics {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
        }

        .pro-metric {
            text-align: center;
        }

        .pro-circular-progress {
            width: 150px;
            height: 150px;
            margin: 0 auto 15px;
            position: relative;
        }

        .pro-progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .pro-progress-text .percentage {
            font-size: 2rem;
            font-weight: bold;
            display: block;
        }

        .pro-progress-text .label {
            font-size: 0.85rem;
            color: #6b7280;
        }

        /* Pro Dropdown Styles */
        .pro-dropdown {
            background: white;
            border-radius: 15px;
            margin-bottom: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 2px solid rgba(102, 126, 234, 0.1);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .pro-dropdown:hover {
            border-color: rgba(102, 126, 234, 0.3);
        }

        .pro-dropdown-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 20px 25px;
            cursor: pointer;
            background: #fafbfc;
            transition: all 0.3s ease;
        }

        .pro-dropdown-header:hover {
            background: #f1f5f9;
        }

        .pro-dropdown-header.active {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .pro-dropdown-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.1rem;
            font-weight: 600;
        }

        .pro-dropdown-title i {
            font-size: 1.2rem;
        }

        .pro-dropdown-toggle {
            transition: transform 0.3s ease;
        }

        .pro-dropdown-header.active .pro-dropdown-toggle {
            transform: rotate(180deg);
        }

        .pro-dropdown-content {
            display: none;
            padding: 25px;
            border-top: 1px solid rgba(102, 126, 234, 0.1);
        }

        .pro-dropdown-content.active {
            display: block;
            animation: slideDown 0.3s ease;
        }

        .pro-review {
            font-size: 1.05rem;
            line-height: 1.7;
            color: #374151;
            margin-bottom: 20px;
        }

        .pro-infographic {
            background: #f8fafc;
            border-radius: 12px;
            padding: 25px;
            margin: 20px 0;
            text-align: center;
        }

        /* Plagiarism Lines */
        .plagiarism-lines-btn {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 15px;
        }

        .plagiarism-lines-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(245, 158, 11, 0.3);
        }

        .plagiarism-lines {
            display: none;
            margin-top: 20px;
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 10px;
            padding: 20px;
        }

        .plagiarism-line {
            background: white;
            border-left: 4px solid #f59e0b;
            padding: 15px;
            margin-bottom: 12px;
            border-radius: 6px;
        }

        .line-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .similarity-badge {
            background: #ef4444;
            color: white;
            padding: 2px 10px;
            border-radius: 12px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .line-text {
            font-style: italic;
            color: #1f2937;
            margin-bottom: 8px;
        }

        .line-source {
            font-size: 0.85rem;
            color: #6b7280;
        }

        /* Pattern Grid */
        .pro-pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 12px;
            margin: 20px 0;
        }

        .pro-pattern-item {
            background: #f3f4f6;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
        }

        .pro-pattern-score {
            font-size: 1.8rem;
            font-weight: bold;
            color: #667eea;
            display: block;
        }

        .pro-pattern-label {
            font-size: 0.85rem;
            color: #6b7280;
        }

        @media (max-width: 768px) {
            body {
                padding-top: 60px;
            }
            
            .container {
                padding: 15px;
            }
            
            .tool-container {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .button-group .btn {
                width: 100%;
                justify-content: center;
            }
            
            .nav-links-secondary {
                flex-direction: column;
                gap: 10px;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }
            
            .data-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .beta-content {
                flex-direction: column;
                gap: 8px;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
            }

            .modal-footer {
                flex-direction: column;
            }
            
            .progress-section {
                position: relative;
                top: auto;
            }

            .sample-buttons {
                flex-direction: column;
            }

            .sample-btn {
                width: 100%;
            }

            .dropdown-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 8px;
            }

            .pro-summary-metrics {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .pro-pattern-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    {% include 'header.html' %}

    <!-- Beta Banner -->
    <div class="beta-banner">
        <div class="beta-content">
            <span class="beta-badge">BETA</span>
            <span>🚀 Advanced AI detection & content analysis platform - Join our beta!</span>
            <button class="beta-join-btn" onclick="openBetaModal()">Join Beta</button>
        </div>
    </div>

    <div class="container">
        <!-- Combined Header - NEW COMPACT DESIGN -->
        <div class="header">
            <h1>
                <i class="fas fa-robot"></i> 
                AI Detection Pro
                <i class="fas fa-microscope"></i>
            </h1>
            <p class="subtitle">Professional AI Detection Engine</p>
            <p class="description">Comprehensive content analysis with AI detection, plagiarism check, and writing quality assessment</p>
        </div>

        <nav class="nav-bar">
            <div class="nav-links-secondary">
                <a href="/"><i class="fas fa-home"></i> Home</a>
                <a href="/news"><i class="fas fa-newspaper"></i> News Verification</a>
                <a href="/unified" class="active"><i class="fas fa-search"></i> AI Detection</a>
                <a href="/imageanalysis"><i class="fas fa-image"></i> Image Analysis</a>
                <a href="/missionstatement"><i class="fas fa-bullseye"></i> Our Mission</a>
                <a href="/pricingplan"><i class="fas fa-tags"></i> Pricing</a>
            </div>
        </nav>

        <div class="tool-container">
            <!-- Compact Dropdown Grid - NEW LAYOUT -->
            <div class="dropdown-grid">
                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown(this)">
                        <span><i class="fas fa-cogs"></i> 12 Analysis Methods</span>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                    </div>
                    <div class="dropdown-content">
                        <div class="tools-employed" style="border: none; margin: 0; padding: 0;">
                            <div class="tools-grid">
                                <div class="tool-item">
                                    <i class="fas fa-robot"></i> Advanced AI Pattern Recognition
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-fingerprint"></i> Linguistic Fingerprinting
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-chart-line"></i> Sentence Structure Analysis
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-brain"></i> Neural Network Detection
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-search"></i> Plagiarism Database Search
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-book"></i> Academic Database Check
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-language"></i> Vocabulary Complexity Analysis
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-balance-scale"></i> Writing Style Consistency
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-graduation-cap"></i> Reading Level Assessment
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-comments"></i> Sentiment Analysis
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-code"></i> GPT/Claude/Bard Detection
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-database"></i> 100M+ Document Database
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown(this)">
                        <span><i class="fas fa-info-circle"></i> How to Use</span>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                    </div>
                    <div class="dropdown-content">
                        <div style="display: grid; gap: 15px;">
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">1</div>
                                <div>
                                    <strong style="color: #4c1d95;">Input Your Content:</strong><br>
                                    <span style="color: #6b7280;">Paste text directly or upload documents (PDF, DOCX, TXT)</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">2</div>
                                <div>
                                    <strong style="color: #4c1d95;">Select Analysis Type:</strong><br>
                                    <span style="color: #6b7280;">FREE: Basic AI detection | PRO: Complete analysis with all features</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">3</div>
                                <div>
                                    <strong style="color: #4c1d95;">Review Results:</strong><br>
                                    <span style="color: #6b7280;">Get AI probability scores, plagiarism matches, and writing analysis</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown(this)">
                        <span><i class="fas fa-crown"></i> Free vs Pro</span>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                    </div>
                    <div class="dropdown-content">
                        <div style="display: grid; gap: 20px;">
                            <div style="background: white; padding: 25px; border-radius: 12px; border: 2px solid #e5e7eb;">
                                <h4 style="color: #6b7280; margin-bottom: 15px; font-size: 1.2rem;"><i class="fas fa-gift"></i> FREE Version</h4>
                                <ul style="list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px;">
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> Basic AI detection</li>
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> Simple plagiarism check</li>
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> Word count & statistics</li>
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> 5 analyses per day</li>
                                    <li style="color: #9ca3af;"><i class="fas fa-times" style="color: #ef4444; margin-right: 8px;"></i> No pattern details</li>
                                    <li style="color: #9ca3af;"><i class="fas fa-times" style="color: #ef4444; margin-right: 8px;"></i> Limited plagiarism sources</li>
                                </ul>
                            </div>
                            <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 25px; border-radius: 12px; border: 2px solid #667eea; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);">
                                <h4 style="color: white; margin-bottom: 15px; font-size: 1.2rem;"><i class="fas fa-crown"></i> PRO Version</h4>
                                <ul style="list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px;">
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Advanced AI detection</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Deep plagiarism analysis</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Pattern recognition details</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Unlimited analyses</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Downloadable reports</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Writing improvement tips</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> All 12 analysis methods</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Priority support</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Section -->
            <div class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-title">
                    <i class="fas fa-cogs fa-spin" style="color: #667eea;"></i>
                    AI Detection Analysis in Progress...
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar">
                        <span class="progress-percentage" id="progressPercentage">0%</span>
                    </div>
                </div>
                
                <div class="progress-status">
                    <div class="progress-spinner"></div>
                    <span id="progressStatus">Initializing AI detection systems...</span>
                </div>
            </div>

            <div class="input-section">
                <div class="input-tabs">
                    <button class="input-tab active" onclick="switchInputType('text')">📝 Text Analysis</button>
                    <button class="input-tab" onclick="switchInputType('file')">📁 File Upload</button>
                </div>
                
                <div class="input-content active" id="textInput">
                    <div class="input-group">
                        <label for="content-text"><i class="fas fa-file-text"></i> Enter Text for Analysis</label>
                        <textarea id="content-text" placeholder="Paste your text here for AI detection, plagiarism check, and writing analysis..."></textarea>
                        
                        <!-- Sample Text Buttons -->
                        <div class="sample-buttons">
                            <button class="sample-btn" onclick="loadSampleText('ai')">🤖 AI Sample</button>
                            <button class="sample-btn" onclick="loadSampleText('human')">👤 Human Sample</button>
                            <button class="sample-btn" onclick="loadSampleText('academic')">🎓 Academic Sample</button>
                            <button class="sample-btn" onclick="loadSampleText('mixed')">🔀 Mixed Sample</button>
                        </div>
                    </div>
                </div>
                
                <div class="input-content" id="fileInput">
                    <div class="file-upload-section" id="fileUploadSection">
                        <input type="file" id="file-input" class="file-input" accept=".txt,.pdf,.doc,.docx">
                        <label for="file-input" class="file-upload-label">
                            <i class="fas fa-cloud-upload-alt"></i> Choose File or Drag & Drop
                        </label>
                        <p style="margin-top: 1rem; color: #6b7280; font-size: 0.9rem;">
                            Supported formats: TXT, PDF, DOC, DOCX (Max 10MB)
                        </p>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="runAnalysis('free')">
                    <i class="fas fa-play"></i> Start Free Analysis
                </button>
                <button class="btn btn-primary" onclick="runAnalysis('pro')" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                    <i class="fas fa-crown"></i> Start Pro Analysis
                </button>
                <button class="btn btn-test" onclick="loadTestData()">
                    <i class="fas fa-flask"></i> Load Sample Text
                </button>
                <button class="btn btn-secondary" onclick="resetForm()">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>

            <div class="results" id="results">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <!-- Beta Modal -->
    <div id="betaModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBetaModal()">&times;</span>
            <div class="modal-header">
                <h2>🚀 Join Our Beta Program</h2>
                <p>Get exclusive early access to advanced AI detection features!</p>
            </div>
            <div class="modal-body">
                <form id="betaSignupForm">
                    <div class="input-group">
                        <input type="email" id="betaEmail" placeholder="Enter your email address" required>
                    </div>
                    <div class="input-group">
                        <input type="text" id="betaName" placeholder="Your name (optional)">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeBetaModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitBetaSignup()">Join Beta Program</button>
            </div>
        </div>
    </div>

    <script src="/static/auth-analysis.js"></script>
    <script>
        // Global variables
        let currentInputType = 'text';
        let currentAnalysisData = null;
        let currentTier = 'free';

        // Sample texts
        const sampleTexts = {
            ai: "The implementation of artificial intelligence in modern healthcare systems represents a paradigm shift in medical diagnostics and treatment protocols. Through sophisticated machine learning algorithms, healthcare providers can now analyze vast datasets with unprecedented accuracy, leading to improved patient outcomes and more efficient resource allocation. Furthermore, the integration of AI-powered predictive analytics enables early disease detection and personalized treatment plans, revolutionizing the traditional approach to medicine.",
            human: "I went to the doctor yesterday and honestly, it was such a weird experience. They had this new AI thing that was supposed to help diagnose stuff, but the nurse seemed confused about how to use it. I'm not sure if it actually helped or just made things take longer. Still got my prescription though, so I guess it worked out okay in the end. Has anyone else dealt with these AI medical systems? I'd love to hear your thoughts.",
            academic: "This study examines the correlation between social media usage patterns and academic performance among undergraduate students (N=1,247). Through a mixed-methods approach incorporating quantitative surveys and qualitative interviews, our findings suggest a statistically significant negative correlation (r=-0.34, p<0.001) between excessive social media consumption and GPA scores. However, structured educational use of social platforms demonstrated positive outcomes in collaborative learning scenarios.",
            mixed: "Recent advances in quantum computing have opened new possibilities for cryptography and data processing. While traditional computers use bits that exist in either 0 or 1 states, quantum computers utilize qubits that can exist in superposition. I've been following this field for years, and it's honestly mind-blowing how fast things are progressing. The implications for cybersecurity are particularly significant, as current encryption methods may become obsolete. However, practical implementation remains challenging due to technical constraints."
        };

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.display = 'block';
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.display = 'none';
                document.body.removeChild(notification);
            }, 3000);
        }

        // Beta Modal Functions
        function openBetaModal() {
            trackAIEvent('beta_modal_opened');
            document.getElementById('betaModal').style.display = 'block';
        }

        function closeBetaModal() {
            trackAIEvent('beta_modal_closed');
            document.getElementById('betaModal').style.display = 'none';
        }

        function submitBetaSignup() {
            const email = document.getElementById('betaEmail').value;
            const name = document.getElementById('betaName').value;

            if (!email) {
                alert('Please enter your email address');
                return;
            }

            trackAIEvent('beta_signup_attempted', { email: email });

            // Simulate signup
            setTimeout(() => {
                trackAIEvent('beta_signup_completed', { email: email });
                alert('🎉 Welcome to the beta! Check your email for access details.');
                closeBetaModal();
                document.getElementById('betaSignupForm').reset();
            }, 1000);
        }

        // Dropdown toggle
        function toggleDropdown(header) {
            const content = header.nextElementSibling;
            const isOpen = header.classList.contains('open');
            
            header.classList.toggle('open');
            content.classList.toggle('open');
        }

        // Input type switching
        function switchInputType(type) {
            currentInputType = type;
            
            document.querySelectorAll('.input-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.input-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(type + 'Input').classList.add('active');
            
            trackAIEvent('input_type_switched', { type: type });
        }

        // Load sample text
        function loadSampleText(type) {
            document.getElementById('content-text').value = sampleTexts[type];
            showNotification(`${type.charAt(0).toUpperCase() + type.slice(1)} sample text loaded`, 'success');
            trackAIEvent('sample_text_loaded', { type: type });
        }

        // Load test data (alias for loadSampleText)
        function loadTestData() {
            loadSampleText('ai');
        }

        // Setup file upload
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('file-input');
            const uploadSection = document.getElementById('fileUploadSection');
            
            // File input change
            fileInput.addEventListener('change', handleFileUpload);
            
            // Drag and drop
            uploadSection.addEventListener('dragover', (e) => {
                e.preventDefault();
                uploadSection.classList.add('dragover');
            });
            
            uploadSection.addEventListener('dragleave', () => {
                uploadSection.classList.remove('dragover');
            });
            
            uploadSection.addEventListener('drop', (e) => {
                e.preventDefault();
                uploadSection.classList.remove('dragover');
                
                const files = e.dataTransfer.files;
                if (files.length > 0) {
                    fileInput.files = files;
                    handleFileUpload({ target: { files: files } });
                }
            });
        });

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (file.size > 10 * 1024 * 1024) {
                showNotification('File too large. Maximum size is 10MB.', 'error');
                return;
            }
            
            showNotification(`File "${file.name}" uploaded successfully`, 'success');
            trackAIEvent('file_uploaded', { 
                file_type: file.type,
                file_size: file.size
            });
        }

        // Reset form
        function resetForm() {
            document.getElementById('content-text').value = '';
            document.getElementById('file-input').value = '';
            document.getElementById('results').style.display = 'none';
            document.getElementById('results').innerHTML = '';
            showNotification('Form reset successfully', 'success');
            trackAIEvent('form_reset');
        }

        // Main analysis function
        async function runAnalysis(tier) {
            tier = tier || 'free';
            currentTier = tier;
            
            trackAIEvent('analysis_started', { tier: tier });
            
            // Get input
            const textInput = document.getElementById('content-text').value.trim();
            
            if (!textInput) {
                showNotification('Please enter text to analyze', 'error');
                return;
            }
            
            if (textInput.length < 50) {
                showNotification('Please enter at least 50 characters for meaningful analysis', 'error');
                return;
            }
            
            // Show progress
            const progressSection = document.getElementById('progressSection');
            const progressBar = document.getElementById('progressBar');
            const progressPercentage = document.getElementById('progressPercentage');
            const progressStatus = document.getElementById('progressStatus');
            progressSection.style.display = 'block';
            
            // Reset progress
            progressBar.style.width = '0%';
            progressPercentage.textContent = '0%';
            
            // Progress messages
            const progressMessages = [
                'Initializing AI detection systems...',
                'Analyzing linguistic patterns...',
                'Checking plagiarism databases...',
                'Evaluating writing style...',
                'Calculating final scores...',
                'Preparing detailed report...'
            ];
            
            let currentProgress = 0;
            let messageIndex = 0;
            
            // Animate progress
            const progressInterval = setInterval(() => {
                currentProgress += 20;
                progressBar.style.width = currentProgress + '%';
                progressPercentage.textContent = currentProgress + '%';
                
                if (messageIndex < progressMessages.length) {
                    progressStatus.textContent = progressMessages[messageIndex];
                    messageIndex++;
                }
                
                if (currentProgress >= 100) {
                    clearInterval(progressInterval);
                    progressStatus.textContent = 'Analysis complete!';
                }
            }, 800);
            
            try {
                // Call API
                const response = await fetch('/api/analyze-unified', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: textInput,
                        text: textInput,
                        type: 'all'
                    })
                });
                
                if (!response.ok) {
                    throw new Error('Analysis failed');
                }
                
                const results = await response.json();
                currentAnalysisData = results;
                
                // Hide progress and show results
                setTimeout(() => {
                    progressSection.style.display = 'none';
                    showResults(results, tier);
                }, 1000);
                
                trackAIEvent('analysis_completed', {
                    tier: tier,
                    ai_probability: results.ai_analysis?.ai_probability || 0
                });
                
            } catch (error) {
                console.error('Analysis error:', error);
                clearInterval(progressInterval);
                progressSection.style.display = 'none';
                showNotification('Analysis failed. Please try again.', 'error');
                trackAIEvent('analysis_failed', { error: error.message });
            }
        }

        // Show results - UPDATED WITH PRO VERSION
        function showResults(results, tier) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            resultsDiv.style.display = 'block';
            
            const aiAnalysis = results.ai_analysis || {};
            const aiProb = aiAnalysis.ai_probability || 0;
            const humanProb = aiAnalysis.human_probability || 100 - aiProb;
            const plagiarismCheck = aiAnalysis.plagiarism_check || {};
            const originalityScore = plagiarismCheck.originality_score || 100;
            
            if (tier === 'pro') {
                // PRO VERSION RESULTS
                resultsDiv.innerHTML = `
                    <div id="proResultsContent">
                        <!-- Summary Card -->
                        <div class="pro-summary-card">
                            <div class="version-badge pro">PRO ANALYSIS</div>
                            
                            <div class="pro-summary-header">
                                <h2><i class="fas fa-crown" style="color: #f59e0b;"></i> Professional Analysis Complete</h2>
                                <p style="color: #6b7280; font-size: 1rem;">Comprehensive AI Detection & Plagiarism Report</p>
                            </div>
                            
                            <div class="pro-summary-metrics">
                                <!-- AI Detection Summary -->
                                <div class="pro-metric">
                                    <div class="pro-circular-progress">
                                        <svg width="150" height="150">
                                            <circle cx="75" cy="75" r="65" stroke="#e5e7eb" stroke-width="12" fill="none"></circle>
                                            <circle cx="75" cy="75" r="65" stroke="${aiProb > 70 ? '#ef4444' : aiProb > 40 ? '#f59e0b' : '#10b981'}" 
                                                    stroke-width="12" fill="none"
                                                    stroke-dasharray="${aiProb * 4.08} 408"
                                                    stroke-linecap="round"
                                                    style="transform: rotate(-90deg); transform-origin: center;"></circle>
                                        </svg>
                                        <div class="pro-progress-text">
                                            <span class="percentage" style="color: ${aiProb > 70 ? '#ef4444' : aiProb > 40 ? '#f59e0b' : '#10b981'};">${aiProb}%</span>
                                            <span class="label">AI Probability</span>
                                        </div>
                                    </div>
                                    <h3 style="font-size: 1.2rem; color: #1f2937; margin-bottom: 5px;">${aiProb > 70 ? 'AI Generated' : aiProb > 40 ? 'Mixed Content' : 'Human Written'}</h3>
                                    <p style="color: #6b7280; font-size: 0.9rem;">Confidence: ${aiAnalysis.indicators?.coherence_score || 85}%</p>
                                </div>
                                
                                <!-- Plagiarism Summary -->
                                <div class="pro-metric">
                                    <div class="pro-circular-progress">
                                        <svg width="150" height="150">
                                            <circle cx="75" cy="75" r="65" stroke="#e5e7eb" stroke-width="12" fill="none"></circle>
                                            <circle cx="75" cy="75" r="65" stroke="${originalityScore >= 90 ? '#10b981' : originalityScore >= 70 ? '#f59e0b' : '#ef4444'}" 
                                                    stroke-width="12" fill="none"
                                                    stroke-dasharray="${originalityScore * 4.08} 408"
                                                    stroke-linecap="round"
                                                    style="transform: rotate(-90deg); transform-origin: center;"></circle>
                                        </svg>
                                        <div class="pro-progress-text">
                                            <span class="percentage" style="color: ${originalityScore >= 90 ? '#10b981' : originalityScore >= 70 ? '#f59e0b' : '#ef4444'};">${originalityScore}%</span>
                                            <span class="label">Original</span>
                                        </div>
                                    </div>
                                    <h3 style="font-size: 1.2rem; color: #1f2937; margin-bottom: 5px;">${plagiarismCheck.matched_sources || 0} Sources Found</h3>
                                    <p style="color: #6b7280; font-size: 0.9rem;">Highest match: ${plagiarismCheck.highest_match || 0}%</p>
                                </div>
                            </div>
                        </div>

                        <!-- Detailed Analysis Dropdowns -->
                        
                        <!-- 1. AI Model Detection -->
                        <div class="pro-dropdown">
                            <div class="pro-dropdown-header" onclick="toggleProDropdown(this)">
                                <div class="pro-dropdown-title">
                                    <i class="fas fa-robot"></i>
                                    <span>AI Model Detection & Pattern Analysis</span>
                                </div>
                                <i class="fas fa-chevron-down pro-dropdown-toggle"></i>
                            </div>
                            <div class="pro-dropdown-content">
                                <div class="pro-review">
                                    <strong>What we found:</strong> Your text shows ${aiProb}% probability of AI generation. ${
                                        aiProb > 70 ? "This content exhibits strong AI characteristics including consistent structure, formal transitions, and predictable patterns typical of large language models." :
                                        aiProb > 40 ? "This appears to be a mix of human and AI writing. Some sections show natural variation while others have telltale AI patterns." :
                                        "Great news! This appears to be genuinely human-written with natural flow and authentic voice."
                                    }
                                    <br><br>
                                    <strong>How we detected this:</strong> We analyzed ${aiAnalysis.detected_patterns?.transition_words || 0} transition words, 
                                    ${aiAnalysis.detected_patterns?.repeated_phrases || 0} repeated phrases, and found ${aiAnalysis.detected_patterns?.ai_phrases || 0} common AI phrases.
                                </div>
                                
                                <div class="pro-infographic">
                                    <h4 style="color: #374151; margin-bottom: 15px;">Pattern Detection Results</h4>
                                    <div class="pro-pattern-grid">
                                        <div class="pro-pattern-item">
                                            <span class="pro-pattern-score">${aiAnalysis.indicators?.repetitive_patterns || 0}%</span>
                                            <span class="pro-pattern-label">Repetitive Patterns</span>
                                        </div>
                                        <div class="pro-pattern-item">
                                            <span class="pro-pattern-score">${aiAnalysis.indicators?.vocabulary_diversity || 0}%</span>
                                            <span class="pro-pattern-label">Vocabulary Diversity</span>
                                        </div>
                                        <div class="pro-pattern-item">
                                            <span class="pro-pattern-score">${aiAnalysis.indicators?.sentence_complexity || 0}%</span>
                                            <span class="pro-pattern-label">Sentence Complexity</span>
                                        </div>
                                        <div class="pro-pattern-item">
                                            <span class="pro-pattern-score">${aiAnalysis.detected_patterns?.quotes_found || 0}</span>
                                            <span class="pro-pattern-label">Quotes Found</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 2. Plagiarism Deep Analysis -->
                        <div class="pro-dropdown">
                            <div class="pro-dropdown-header" onclick="toggleProDropdown(this)">
                                <div class="pro-dropdown-title">
                                    <i class="fas fa-search"></i>
                                    <span>Plagiarism Analysis & Source Matching</span>
                                </div>
                                <i class="fas fa-chevron-down pro-dropdown-toggle"></i>
                            </div>
                            <div class="pro-dropdown-content">
                                <div class="pro-review">
                                    <strong>Originality assessment:</strong> Your content is ${originalityScore}% original. 
                                    ${plagiarismCheck.plagiarized_lines?.length > 0 ? 
                                        `We found ${plagiarismCheck.plagiarized_lines.length} lines with potential matches to existing sources. The highest similarity is ${plagiarismCheck.highest_match}%.` :
                                        "Excellent! We didn't find any significant matches in our database."
                                    }
                                    <br><br>
                                    <strong>Database coverage:</strong> We checked your text against academic databases, web content, and published works.
                                </div>
                                
                                ${plagiarismCheck.plagiarized_lines?.length > 0 ? `
                                    <button class="plagiarism-lines-btn" onclick="togglePlagiarismLines(this)">
                                        <i class="fas fa-eye"></i> View Flagged Lines (${plagiarismCheck.plagiarized_lines.length})
                                    </button>
                                    
                                    <div class="plagiarism-lines" id="plagiarismLinesDiv">
                                        ${plagiarismCheck.plagiarized_lines.map(line => `
                                            <div class="plagiarism-line">
                                                <div class="line-info">
                                                    <span><strong>Line ${line.line_number + 1}</strong></span>
                                                    <span class="similarity-badge">${line.similarity}% Similar</span>
                                                </div>
                                                <div class="line-text">"${line.text}"</div>
                                                <div class="line-source">
                                                    <i class="fas fa-link"></i> Source: ${line.source}
                                                </div>
                                            </div>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                        </div>

                        <!-- 3. Writing Quality Analysis -->
                        <div class="pro-dropdown">
                            <div class="pro-dropdown-header" onclick="toggleProDropdown(this)">
                                <div class="pro-dropdown-title">
                                    <i class="fas fa-pen-fancy"></i>
                                    <span>Writing Quality & Style Assessment</span>
                                </div>
                                <i class="fas fa-chevron-down pro-dropdown-toggle"></i>
                            </div>
                            <div class="pro-dropdown-content">
                                <div class="pro-review">
                                    <strong>Writing analysis:</strong> Your text contains ${aiAnalysis.statistics?.word_count || 0} words with an average sentence length of 
                                    ${aiAnalysis.statistics?.average_sentence_length || 0} words. The reading level is ${aiAnalysis.statistics?.reading_level || 'Unknown'}.
                                    <br><br>
                                    <strong>Style notes:</strong> ${aiAnalysis.detected_patterns?.contractions > 0 ? 
                                        `You use contractions naturally (${aiAnalysis.detected_patterns.contractions} found), which adds a conversational tone.` :
                                        "Your writing is formal with no contractions, which may indicate academic or AI-generated content."
                                    }
                                </div>
                                
                                <div class="pro-infographic">
                                    <h4 style="color: #374151; margin-bottom: 15px;">Writing Statistics</h4>
                                    <div class="data-grid">
                                        <div class="data-item">
                                            <div class="data-value">${aiAnalysis.statistics?.word_count || 0}</div>
                                            <div class="data-label">Total Words</div>
                                        </div>
                                        <div class="data-item">
                                            <div class="data-value">${aiAnalysis.statistics?.sentence_count || 0}</div>
                                            <div class="data-label">Sentences</div>
                                        </div>
                                        <div class="data-item">
                                            <div class="data-value">${aiAnalysis.statistics?.average_word_length || 0}</div>
                                            <div class="data-label">Avg Word Length</div>
                                        </div>
                                        <div class="data-item">
                                            <div class="data-value">${aiAnalysis.detected_patterns?.personal_pronouns || 0}</div>
                                            <div class="data-label">Personal Pronouns</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 4. Detailed Pattern Recognition -->
                        <div class="pro-dropdown">
                            <div class="pro-dropdown-header" onclick="toggleProDropdown(this)">
                                <div class="pro-dropdown-title">
                                    <i class="fas fa-fingerprint"></i>
                                    <span>Advanced Pattern Recognition</span>
                                </div>
                                <i class="fas fa-chevron-down pro-dropdown-toggle"></i>
                            </div>
                            <div class="pro-dropdown-content">
                                <div class="pro-review">
                                    <strong>Pattern analysis:</strong> We detected ${aiAnalysis.detected_patterns?.transition_words || 0} transition words 
                                    (${aiAnalysis.detected_patterns?.transition_words > 10 ? "high usage - typical of AI" : "normal usage"}), 
                                    ${aiAnalysis.detected_patterns?.repeated_phrases || 0} repeated phrase patterns, and 
                                    ${aiAnalysis.detected_patterns?.ai_phrases || 0} common AI expressions.
                                    <br><br>
                                    <strong>Key findings:</strong> ${
                                        aiAnalysis.detected_patterns?.quotes_found > 2 ? "Multiple quotes detected - common in AI-generated content. " : ""
                                    }${
                                        aiAnalysis.indicators?.coherence_score > 80 ? "Very high coherence score suggests structured/planned writing. " : ""
                                    }${
                                        aiAnalysis.indicators?.vocabulary_diversity < 50 ? "Low vocabulary diversity indicates repetitive language use." : ""
                                    }
                                </div>
                                
                                <div class="pro-infographic">
                                    <h4 style="color: #374151; margin-bottom: 15px;">Linguistic Patterns Detected</h4>
                                    <div class="pro-pattern-grid">
                                        <div class="pro-pattern-item" style="background: ${aiAnalysis.detected_patterns?.transition_words > 10 ? '#fee2e2' : '#f3f4f6'};">
                                            <span class="pro-pattern-score">${aiAnalysis.detected_patterns?.transition_words || 0}</span>
                                            <span class="pro-pattern-label">Transitions</span>
                                        </div>
                                        <div class="pro-pattern-item" style="background: ${aiAnalysis.detected_patterns?.ai_phrases > 3 ? '#fee2e2' : '#f3f4f6'};">
                                            <span class="pro-pattern-score">${aiAnalysis.detected_patterns?.ai_phrases || 0}</span>
                                            <span class="pro-pattern-label">AI Phrases</span>
                                        </div>
                                        <div class="pro-pattern-item">
                                            <span class="pro-pattern-score">${aiAnalysis.detected_patterns?.contractions || 0}</span>
                                            <span class="pro-pattern-label">Contractions</span>
                                        </div>
                                        <div class="pro-pattern-item">
                                            <span class="pro-pattern-score">${aiAnalysis.detected_patterns?.personal_pronouns || 0}</span>
                                            <span class="pro-pattern-label">Personal Pronouns</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 5. Recommendations -->
                        <div class="pro-dropdown">
                            <div class="pro-dropdown-header" onclick="toggleProDropdown(this)">
                                <div class="pro-dropdown-title">
                                    <i class="fas fa-lightbulb"></i>
                                    <span>Recommendations & Improvements</span>
                                </div>
                                <i class="fas fa-chevron-down pro-dropdown-toggle"></i>
                            </div>
                            <div class="pro-dropdown-content">
                                <div class="pro-review">
                                    <strong>How to improve:</strong> Based on our analysis, here are specific ways to enhance your content:
                                </div>
                                
                                <div style="background: #dbeafe; border-radius: 10px; padding: 20px; margin-top: 15px;">
                                    <ul style="margin: 0; padding-left: 20px; color: #1e40af;">
                                        ${aiProb > 70 ? `
                                            <li>Add personal anecdotes or experiences to make content more human</li>
                                            <li>Vary sentence structure - mix short and long sentences</li>
                                            <li>Use more contractions and informal language where appropriate</li>
                                            <li>Include specific examples rather than general statements</li>
                                        ` : aiProb > 40 ? `
                                            <li>Maintain consistency in writing style throughout</li>
                                            <li>Review sections that show AI characteristics</li>
                                            <li>Add more personal voice to formal sections</li>
                                        ` : `
                                            <li>Your writing is already quite natural!</li>
                                            <li>Consider adding citations for factual claims</li>
                                            <li>Maybe break up very long sentences for readability</li>
                                        `}
                                        ${originalityScore < 90 ? `
                                            <li>Rephrase sections with high similarity scores</li>
                                            <li>Add proper citations for referenced content</li>
                                        ` : ''}
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                
                // Add the toggle functions to the window scope
                window.toggleProDropdown = function(header) {
                    const content = header.nextElementSibling;
                    const isActive = header.classList.contains('active');
                    
                    // Close all other dropdowns
                    document.querySelectorAll('.pro-dropdown-header').forEach(h => {
                        if (h !== header) {
                            h.classList.remove('active');
                            h.nextElementSibling.classList.remove('active');
                        }
                    });
                    
                    // Toggle current dropdown
                    header.classList.toggle('active');
                    content.classList.toggle('active');
                };
                
                window.togglePlagiarismLines = function(button) {
                    const linesDiv = document.getElementById('plagiarismLinesDiv');
                    const isVisible = linesDiv.style.display === 'block';
                    
                    if (isVisible) {
                        linesDiv.style.display = 'none';
                        button.innerHTML = '<i class="fas fa-eye"></i> View Flagged Lines (' + (plagiarismCheck.plagiarized_lines?.length || 0) + ')';
                    } else {
                        linesDiv.style.display = 'block';
                        button.innerHTML = '<i class="fas fa-eye-slash"></i> Hide Flagged Lines';
                    }
                };
                
            } else {
                // FREE VERSION - Your existing code
                const resultsContainer = document.createElement('div');
                resultsContainer.style.cssText = 'display: grid; gap: 25px;';
                
                // AI Detection Card
                const aiCard = document.createElement('div');
                aiCard.className = 'result-card';
                aiCard.style.cssText = 'background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%); position: relative; overflow: visible;';
                
                // Determine AI status and styling
                let aiStatus, aiColor, aiIcon, aiMessage;
                if (aiProb > 70) {
                    aiStatus = 'AI DETECTED';
                    aiColor = '#ef4444';
                    aiIcon = 'fa-robot';
                    aiMessage = "Hold up! This looks like it was written by AI. The patterns are pretty clear - structured sentences, perfect grammar, and that telltale AI style.";
                } else if (aiProb > 40) {
                    aiStatus = 'MIXED CONTENT';
                    aiColor = '#f59e0b';
                    aiIcon = 'fa-user-robot';
                    aiMessage = "Interesting... This seems to be a mix of human and AI writing. Maybe AI-assisted or edited? It's got characteristics of both.";
                } else {
                    aiStatus = 'HUMAN WRITTEN';
                    aiColor = '#10b981';
                    aiIcon = 'fa-user-check';
                    aiMessage = "Looking good! This appears to be genuinely human-written. Natural flow, personal voice, and authentic style detected.";
                }
                
                aiCard.innerHTML = `
                    <div style="position: absolute; top: -15px; left: 30px; background: ${aiColor}; color: white; padding: 8px 20px; border-radius: 20px; font-weight: bold; font-size: 0.9rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                        <i class="fas ${aiIcon}"></i> ${aiStatus}
                    </div>
                    
                    <div style="padding: 40px 30px 30px;">
                        <h3 style="font-size: 1.8rem; margin-bottom: 25px; color: #1f2937; display: flex; align-items: center; gap: 15px;">
                            <i class="fas fa-brain" style="color: ${aiColor};"></i>
                            Is This AI Generated?
                        </h3>
                        
                        <!-- Visual Infographic -->
                        <div style="display: flex; gap: 40px; align-items: center; margin-bottom: 30px;">
                            <div style="position: relative; width: 180px; height: 180px;">
                                <svg width="180" height="180" style="transform: rotate(-90deg);">
                                    <circle cx="90" cy="90" r="80" stroke="#e5e7eb" stroke-width="20" fill="none"></circle>
                                    <circle cx="90" cy="90" r="80" stroke="${aiColor}" stroke-width="20" fill="none"
                                            stroke-dasharray="${aiProb * 5.03} 503"
                                            stroke-linecap="round"></circle>
                                </svg>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                    <div style="font-size: 2.5rem; font-weight: bold; color: ${aiColor};">${aiProb}%</div>
                                    <div style="font-size: 0.9rem; color: #6b7280;">AI Probability</div>
                                </div>
                            </div>
                            
                            <div style="flex: 1;">
                                <p style="font-size: 1.1rem; line-height: 1.8; color: #4b5563; margin-bottom: 20px;">
                                    ${aiMessage}
                                </p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div style="background: #f3f4f6; padding: 15px; border-radius: 10px;">
                                        <div style="font-size: 1.3rem; font-weight: bold; color: ${aiColor};">${humanProb}%</div>
                                        <div style="font-size: 0.8rem; color: #6b7280;">Human-like</div>
                                    </div>
                                    <div style="background: #f3f4f6; padding: 15px; border-radius: 10px;">
                                        <div style="font-size: 1.3rem; font-weight: bold; color: #667eea;">${aiAnalysis.indicators?.vocabulary_diversity || 0}%</div>
                                        <div style="font-size: 0.8rem; color: #6b7280;">Vocabulary Mix</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                            <h4 style="color: #374151; margin-bottom: 10px; font-size: 1rem;">
                                <i class="fas fa-microscope" style="color: #667eea;"></i> How We Checked
                            </h4>
                            <p style="color: #6b7280; font-size: 0.9rem; line-height: 1.6;">
                                We ran a basic AI detection scan using pattern recognition and linguistic analysis. This free version checks for common AI writing patterns and vocabulary usage.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 12px; text-align: center;">
                            <p style="color: white; font-weight: 600; margin-bottom: 10px;">
                                <i class="fas fa-lock"></i> Want the Complete Analysis?
                            </p>
                            <p style="color: rgba(255,255,255,0.9); font-size: 0.9rem; margin-bottom: 15px;">
                                Get detailed AI model detection, writing pattern analysis, and specific recommendations with Pro
                            </p>
                            <button onclick="window.location.href='/pricingplan'" style="background: white; color: #667eea; border: none; padding: 10px 25px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                                Upgrade to Pro <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                // Plagiarism Card
                const plagiarismCard = document.createElement('div');
                plagiarismCard.className = 'result-card';
                plagiarismCard.style.cssText = 'background: linear-gradient(135deg, #f8fafc 0%, #ffffff 100%); position: relative; overflow: visible;';
                
                // Determine plagiarism status
                let plagStatus, plagColor, plagIcon, plagMessage;
                if (originalityScore >= 90) {
                    plagStatus = 'ORIGINAL CONTENT';
                    plagColor = '#10b981';
                    plagIcon = 'fa-certificate';
                    plagMessage = "Great news! Your content appears to be original. We didn't find any significant matches in our database.";
                } else if (originalityScore >= 70) {
                    plagStatus = 'MOSTLY ORIGINAL';
                    plagColor = '#f59e0b';
                    plagIcon = 'fa-exclamation-triangle';
                    plagMessage = "Pretty good! Most of your content is original, but we found some similarities that might need attention.";
                } else {
                    plagStatus = 'SIMILARITIES FOUND';
                    plagColor = '#ef4444';
                    plagIcon = 'fa-copy';
                    plagMessage = "Uh oh... We found several matches in our database. This content has significant similarities to existing sources.";
                }
                
                plagiarismCard.innerHTML = `
                    <div style="position: absolute; top: -15px; right: 30px; background: ${plagColor}; color: white; padding: 8px 20px; border-radius: 20px; font-weight: bold; font-size: 0.9rem; box-shadow: 0 4px 15px rgba(0,0,0,0.2);">
                        <i class="fas ${plagIcon}"></i> ${plagStatus}
                    </div>
                    
                    <div style="padding: 40px 30px 30px;">
                        <h3 style="font-size: 1.8rem; margin-bottom: 25px; color: #1f2937; display: flex; align-items: center; gap: 15px;">
                            <i class="fas fa-search-plus" style="color: ${plagColor};"></i>
                            Is This Plagiarized?
                        </h3>
                        
                        <!-- Visual Infographic -->
                        <div style="display: flex; gap: 40px; align-items: center; margin-bottom: 30px;">
                            <div style="position: relative; width: 180px; height: 180px;">
                                <svg width="180" height="180">
                                    <defs>
                                        <pattern id="diagonalHatch" patternUnits="userSpaceOnUse" width="4" height="4">
                                            <path d="M-1,1 l2,-2 M0,4 l4,-4 M3,5 l2,-2" style="stroke:#f59e0b; stroke-width:0.5"/>
                                        </pattern>
                                    </defs>
                                    <circle cx="90" cy="90" r="80" fill="#10b981"/>
                                    <circle cx="90" cy="90" r="80" fill="url(#diagonalHatch)" 
                                            stroke="none"
                                            mask="url(#plagMask)"/>
                                    <mask id="plagMask">
                                        <rect width="180" height="180" fill="white"/>
                                        <path d="M 90 90 L 90 10 A 80 80 0 0 1 ${90 + 80 * Math.cos((originalityScore * 3.6 - 90) * Math.PI / 180)} ${90 + 80 * Math.sin((originalityScore * 3.6 - 90) * Math.PI / 180)} z" fill="black"/>
                                    </mask>
                                </svg>
                                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                                    <div style="font-size: 2.5rem; font-weight: bold; color: ${plagColor};">${originalityScore}%</div>
                                    <div style="font-size: 0.9rem; color: #6b7280;">Original</div>
                                </div>
                            </div>
                            
                            <div style="flex: 1;">
                                <p style="font-size: 1.1rem; line-height: 1.8; color: #4b5563; margin-bottom: 20px;">
                                    ${plagMessage}
                                </p>
                                
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 15px;">
                                    <div style="background: #f3f4f6; padding: 15px; border-radius: 10px;">
                                        <div style="font-size: 1.3rem; font-weight: bold; color: #667eea;">${plagiarismCheck.matched_sources || 0}</div>
                                        <div style="font-size: 0.8rem; color: #6b7280;">Sources Checked</div>
                                    </div>
                                    <div style="background: #f3f4f6; padding: 15px; border-radius: 10px;">
                                        <div style="font-size: 1.3rem; font-weight: bold; color: #f59e0b;">${plagiarismCheck.highest_match || 0}%</div>
                                        <div style="font-size: 0.8rem; color: #6b7280;">Highest Match</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div style="background: #f9fafb; padding: 20px; border-radius: 12px; margin-bottom: 20px;">
                            <h4 style="color: #374151; margin-bottom: 10px; font-size: 1rem;">
                                <i class="fas fa-database" style="color: #667eea;"></i> How We Checked
                            </h4>
                            <p style="color: #6b7280; font-size: 0.9rem; line-height: 1.6;">
                                We compared your text against our basic database of web content and academic sources. This free scan covers common plagiarism patterns and publicly available content.
                            </p>
                        </div>
                        
                        <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 20px; border-radius: 12px; text-align: center;">
                            <p style="color: white; font-weight: 600; margin-bottom: 10px;">
                                <i class="fas fa-lock"></i> Want Line-by-Line Results?
                            </p>
                            <p style="color: rgba(255,255,255,0.9); font-size: 0.9rem; margin-bottom: 15px;">
                                See exact matches, source citations, and similarity percentages for every flagged section with Pro
                            </p>
                            <button onclick="window.location.href='/pricingplan'" style="background: white; color: #667eea; border: none; padding: 10px 25px; border-radius: 8px; font-weight: 600; cursor: pointer; transition: all 0.3s;">
                                Upgrade to Pro <i class="fas fa-arrow-right"></i>
                            </button>
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(aiCard);
                resultsContainer.appendChild(plagiarismCard);
                
                // Add quick stats if pro
                if (tier === 'pro' && aiAnalysis.statistics) {
                    const statsCard = document.createElement('div');
                    statsCard.className = 'result-card';
                    statsCard.style.cssText = 'padding: 25px; background: #f9fafb;';
                    statsCard.innerHTML = `
                        <h4 style="color: #374151; margin-bottom: 15px; font-size: 1.2rem;">
                            <i class="fas fa-chart-bar" style="color: #667eea;"></i> Quick Stats
                        </h4>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px;">
                            <div style="text-align: center;">
                                <div style="font-size: 1.4rem; font-weight: bold; color: #667eea;">${aiAnalysis.statistics.word_count}</div>
                                <div style="font-size: 0.8rem; color: #6b7280;">Words</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.4rem; font-weight: bold; color: #667eea;">${aiAnalysis.statistics.sentence_count || 0}</div>
                                <div style="font-size: 0.8rem; color: #6b7280;">Sentences</div>
                            </div>
                            <div style="text-align: center;">
                                <div style="font-size: 1.4rem; font-weight: bold; color: #667eea;">${aiAnalysis.statistics.reading_level}</div>
                                <div style="font-size: 0.8rem; color: #6b7280;">Reading Level</div>
                            </div>
                        </div>
                    `;
                    resultsContainer.appendChild(statsCard);
                }
                
                resultsDiv.appendChild(resultsContainer);
            }
            
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('betaModal');
            if (event.target === modal) {
                closeBetaModal();
            }
        };

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            trackAIEvent('page_loaded');
        });
    </script>
</body>
</html>
