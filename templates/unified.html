<!DOCTYPE html>
<html lang="en">  
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> 
    <title>AI Detection Pro - Content Analysis Platform</title>
    
    <!-- Google Analytics 4 Integration -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-9CLSNV2S8Q"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date()); 
        gtag('config', 'G-9CLSNV2S8Q');
        
        // Custom Analytics Events for AI Detection Page
        function trackAIEvent(eventName, eventData = {}) {
            gtag('event', eventName, {
                event_category: 'AI_Detection',
                page_title: 'AI Detection Pro - Content Analysis Platform',
                ...eventData
            });
            
            // Backend analytics tracking
            if (typeof backendAnalytics !== 'undefined') {
                backendAnalytics.track(eventName, {
                    page: 'ai_detection',
                    timestamp: new Date().toISOString(),
                    ...eventData
                });
            }
        }
        
        // Track page view
        gtag('event', 'page_view', {
            page_title: 'AI Detection Pro - Content Analysis Platform',
            page_location: window.location.href,
            content_group1: 'AI Detection'
        });
    </script>
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ðŸ¤–</text></svg>">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            line-height: 1.6;
            padding-top: 60px;
        }

        /* Beta Banner */
        .beta-banner {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            padding: 8px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .beta-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 3s infinite;
            transform: rotate(45deg);
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .beta-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            color: white;
            font-weight: 600;
        }

        .beta-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .beta-join-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 6px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .beta-join-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        /* IMPORTANT DISCLAIMER BANNER */
        .disclaimer-banner {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            padding: 15px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
            border-bottom: 3px solid rgba(255,255,255,0.3);
        }

        .disclaimer-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: pulse-glow 4s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { opacity: 0.5; }
            50% { opacity: 1; }
        }

        .disclaimer-content {
            position: relative;
            z-index: 2;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            color: white;
        }

        .disclaimer-title {
            font-size: 1.2rem;
            font-weight: 700;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .disclaimer-text {
            font-size: 0.95rem;
            line-height: 1.5;
            opacity: 0.95;
            max-width: 900px;
            margin: 0 auto;
        }

        .disclaimer-highlight {
            background: rgba(255,255,255,0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-weight: 600;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .modal-header h2 {
            color: white;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }

        .modal-header p {
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-body .input-group {
            margin-bottom: 1rem;
        }

        .modal-body input {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            width: 100%;
            font-size: 1rem;
        }

        .modal-body input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .modal-footer {
            padding: 1.5rem 2rem 2rem;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            color: rgba(255,255,255,0.8);
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255,255,255,0.2);
            color: white;
        }

        /* Container adjustments */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        /* Combined Header - NEW COMPACT DESIGN */
        .header {
            text-align: center;
            margin-bottom: 20px;
            color: white;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 8px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
        }

        .header .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .header .description {
            font-size: 0.95rem;
            opacity: 0.85;
            max-width: 800px;
            margin: 0 auto;
        }

        /* Navigation Bar */
        .nav-bar {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(15px);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .nav-links-secondary {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-links-secondary a {
            color: white;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .nav-links-secondary a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .nav-links-secondary a.active {
            background: rgba(255, 255, 255, 0.3);
            font-weight: 600;
        }

        /* Tool Container */
        .tool-container {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(20px);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        /* Compact Dropdown Grid - NEW LAYOUT */
        .dropdown-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 12px;
            margin-bottom: 20px;
        }

        /* Compact Dropdown Section - REDESIGNED */
        .dropdown-section {
            border: 2px solid rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            overflow: hidden;
            background: white;
            transition: all 0.3s ease;
        }

        .dropdown-section:hover {
            border-color: rgba(102, 126, 234, 0.3);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.1);
        }

        .dropdown-header {
            background: rgba(102, 126, 234, 0.05);
            padding: 12px 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-weight: 600;
            color: #4a5568;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            cursor: pointer;
            min-height: 48px;
        }

        .dropdown-header:hover {
            background: rgba(102, 126, 234, 0.1);
        }

        .dropdown-header.open {
            background: rgba(102, 126, 234, 0.15);
            border-bottom: 2px solid #667eea;
        }

        .dropdown-header span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dropdown-header i {
            font-size: 1.1rem;
            color: #667eea;
        }

        .dropdown-icon {
            transition: transform 0.3s ease;
            font-size: 0.9rem;
            color: #6b7280;
        }

        .dropdown-header.open .dropdown-icon {
            transform: rotate(180deg);
        }

        .dropdown-content {
            display: none;
            padding: 20px;
            background: white;
            border-top: 1px solid rgba(102, 126, 234, 0.1);
            max-height: 600px;
            overflow-y: auto;
        }

        .dropdown-content.open {
            display: block;
            animation: slideDown 0.3s ease;
        }

        @keyframes slideDown {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Tools Section */
        .tools-employed {
            background: linear-gradient(145deg, #f8fafc, #ffffff);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: relative;
            overflow: hidden;
        }

        .tools-employed::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #10b981, #667eea, #764ba2);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; }
        }

        .tools-title {
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .tool-item {
            background: rgba(102, 126, 234, 0.05);
            padding: 15px 20px;
            border-radius: 12px;
            border-left: 4px solid #667eea;
            font-size: 0.95rem;
            font-weight: 600;
            color: #4a5568;
            transition: all 0.3s ease;
        }

        .tool-item:hover {
            background: rgba(102, 126, 234, 0.1);
            transform: translateY(-2px);
        }

        .tool-item i {
            margin-right: 8px;
            color: #667eea;
        }

        /* Enhanced Progress Section with Rainbow Animation */
        .progress-section {
            margin-bottom: 30px;
            background: linear-gradient(145deg, #f8fafc, #ffffff);
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.1);
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: sticky;
            top: 80px;
            z-index: 100;
            overflow: hidden;
        }

        .progress-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #10b981, #764ba2, #667eea);
            background-size: 300% 100%;
            animation: rainbow-flow 4s ease-in-out infinite;
        }

        @keyframes rainbow-flow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .progress-title {
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 25px;
            font-size: 1.3rem;
            text-align: center;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        /* Enhanced colorful progress bar */
        .progress-bar {
            background: #e2e8f0;
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            border: 2px solid rgba(255, 255, 255, 0.8);
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, 
                #ff6b6b 0%, 
                #f06595 14%, 
                #cc5de8 28%, 
                #845ef7 42%, 
                #5c7cfa 56%, 
                #339af0 70%, 
                #22b8cf 84%, 
                #20c997 100%);
            border-radius: 13px;
            width: 0%;
            transition: width 0.5s ease;
            position: relative;
            background-size: 200% 100%;
            animation: gradient-shift 3s ease-in-out infinite;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        @keyframes gradient-shift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        .progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, 
                transparent, 
                rgba(255,255,255,0.6), 
                transparent);
            animation: shine 2s infinite;
        }

        @keyframes shine {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(100%); }
        }

        /* Progress percentage display */
        .progress-percentage {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-weight: bold;
            color: white;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            font-size: 1.1rem;
            z-index: 2;
        }

        /* Spinning icon and status text */
        .progress-status {
            text-align: center;
            color: #6b7280;
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .progress-spinner {
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid transparent;
            border-top: 3px solid #667eea;
            border-right: 3px solid #10b981;
            border-bottom: 3px solid #764ba2;
            border-left: 3px solid #f59e0b;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Input Section */
        .input-section {
            margin-bottom: 30px;
        }

        .input-tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
            border-bottom: 2px solid #e2e8f0;
        }

        .input-tab {
            padding: 12px 24px;
            border: none;
            background: #f8fafc;
            color: #6b7280;
            font-weight: 600;
            cursor: pointer;
            border-radius: 10px 10px 0 0;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .input-tab:hover {
            background: #f1f5f9;
            color: #374151;
        }

        .input-tab.active {
            background: white;
            color: #667eea;
            border-bottom: 2px solid #667eea;
            transform: translateY(2px);
        }

        .input-content {
            display: none;
        }

        .input-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .input-group {
            margin-bottom: 20px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 700;
            color: #4a5568;
            font-size: 1rem;
        }

        .input-group input, .input-group textarea {
            width: 100%;
            padding: 15px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
            font-family: inherit;
        }

        .input-group input:focus, .input-group textarea:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .input-group textarea {
            min-height: 120px;
            resize: vertical;
            line-height: 1.5;
        }

        /* File Upload Section */
        .file-upload-section {
            border: 2px dashed #667eea;
            border-radius: 12px;
            padding: 30px;
            text-align: center;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            background: rgba(102, 126, 234, 0.05);
        }

        .file-upload-section:hover {
            border-color: #764ba2;
            background: rgba(102, 126, 234, 0.1);
        }

        .file-upload-section.dragover {
            border-color: #10b981;
            background: rgba(16, 185, 129, 0.1);
        }

        .file-input {
            display: none;
        }

        .file-upload-label {
            display: inline-block;
            padding: 12px 24px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .file-upload-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        /* Button Styles */
        .button-group {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .btn-secondary {
            background: #6b7280;
            color: white;
        }

        .btn-secondary:hover {
            background: #4b5563;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            flex: 1;
            justify-content: center;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        }

        .btn-test {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }

        .btn-test:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(16, 185, 129, 0.3);
        }

        /* Results Section */
        .results {
            display: none;
            margin-top: 30px;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Sample Buttons */
        .sample-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            flex-wrap: wrap;
        }

        .sample-btn {
            padding: 8px 16px;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            border-radius: 20px;
            font-size: 0.85rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .sample-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        /* Notification styles */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 25px;
            border-radius: 8px;
            z-index: 10000;
            max-width: 400px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            display: none;
            animation: slideIn 0.3s ease;
        }

        .notification.success {
            background: #10b981;
            color: white;
        }

        .notification.error {
            background: #ef4444;
            color: white;
        }

        .notification.info {
            background: #667eea;
            color: white;
        }

        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        /* NEW SPECTACULAR RESULTS STYLES */
        
        /* Summary Banner */
        .results-summary-banner {
            background: linear-gradient(135deg, #667eea, #764ba2);
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            color: white;
            position: relative;
            overflow: hidden;
            box-shadow: 0 15px 35px rgba(102, 126, 234, 0.3);
        }

        .results-summary-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
            animation: float 10s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) rotate(0deg); }
            50% { transform: translate(-30px, -30px) rotate(180deg); }
        }

        .summary-content {
            position: relative;
            z-index: 2;
        }

        .summary-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 25px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .summary-title {
            font-size: 2rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .summary-badges {
            display: flex;
            gap: 20px;
            align-items: center;
        }

        .summary-badge {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 15px 25px;
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .summary-badge:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }

        .badge-value {
            font-size: 2.5rem;
            font-weight: 900;
            line-height: 1;
        }

        .badge-label {
            font-size: 0.9rem;
            opacity: 0.9;
            margin-top: 5px;
        }

        .summary-narrative {
            font-size: 1.15rem;
            line-height: 1.8;
            opacity: 0.95;
            margin-bottom: 30px;
        }

        .summary-visual {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .visual-card {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            transition: all 0.3s ease;
        }

        .visual-card:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
        }

        .visual-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            display: block;
        }

        .visual-metric {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 5px;
        }

        .visual-description {
            font-size: 0.9rem;
            opacity: 0.85;
        }

        .summary-footnote {
            font-size: 0.95rem;
            opacity: 0.8;
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.2);
            font-style: italic;
        }

        /* Analysis Dropdowns */
        .analysis-dropdown {
            background: white;
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            overflow: hidden;
        }

        .analysis-dropdown:hover {
            border-color: rgba(102, 126, 234, 0.2);
            transform: translateY(-2px);
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.15);
        }

        .analysis-dropdown-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 25px 30px;
            cursor: pointer;
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            transition: all 0.3s ease;
            position: relative;
        }

        .analysis-dropdown-header::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .analysis-dropdown-header:hover {
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
        }

        .analysis-dropdown.active .analysis-dropdown-header::after {
            transform: scaleX(1);
        }

        .dropdown-title {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .dropdown-icon-main {
            width: 50px;
            height: 50px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
        }

        .dropdown-text {
            display: flex;
            flex-direction: column;
        }

        .dropdown-title-text {
            font-size: 1.2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 3px;
        }

        .dropdown-subtitle {
            font-size: 0.9rem;
            color: #6b7280;
        }

        .dropdown-chevron {
            font-size: 1.2rem;
            color: #6b7280;
            transition: transform 0.3s ease;
        }

        .analysis-dropdown.active .dropdown-chevron {
            transform: rotate(180deg);
        }

        .analysis-dropdown-content {
            display: none;
            padding: 30px;
            border-top: 1px solid rgba(102, 126, 234, 0.1);
        }

        .analysis-dropdown.active .analysis-dropdown-content {
            display: block;
            animation: expandContent 0.3s ease;
        }

        @keyframes expandContent {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* Analysis Explanation Box Styles */
        .analysis-explanation {
            background: linear-gradient(135deg, #f0f4ff, #e5edff);
            border: 1px solid #cbd5f0;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 25px;
            position: relative;
            overflow: hidden;
        }

        .analysis-explanation::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 5px;
            background: linear-gradient(180deg, #6366f1, #4f46e5);
        }

        .analysis-explanation-icon {
            color: #6366f1;
            margin-right: 10px;
            font-size: 1.1rem;
        }

        .analysis-explanation-text {
            color: #4b5563;
            font-size: 0.95rem;
            line-height: 1.6;
            font-weight: 500;
        }

        .analysis-explanation-text strong {
            color: #374151;
            font-weight: 700;
        }

        /* Pattern Visualization */
        .pattern-visualization {
            background: #f8fafc;
            border-radius: 15px;
            padding: 25px;
            margin: 25px 0;
        }

        .pattern-title {
            font-size: 1.1rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }

        .pattern-item {
            background: white;
            border-radius: 10px;
            padding: 20px 15px;
            text-align: center;
            border: 2px solid rgba(102, 126, 234, 0.1);
            transition: all 0.3s ease;
        }

        .pattern-item:hover {
            border-color: rgba(102, 126, 234, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.1);
        }

        .pattern-value {
            font-size: 2rem;
            font-weight: 900;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: block;
            margin-bottom: 5px;
        }

        .pattern-name {
            font-size: 0.85rem;
            color: #6b7280;
            font-weight: 600;
        }

        /* Download Section */
        .download-section {
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: relative;
            overflow: hidden;
        }

        .download-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #10b981, #f59e0b);
            animation: pulse 2s infinite;
        }

        .download-title {
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        /* Export Buttons */
        .export-section {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .export-btn {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.95rem;
        }

        .export-btn.pdf {
            background: linear-gradient(135deg, #dc2626, #b91c1c);
            color: white;
        }

        .export-btn.certificate {
            background: linear-gradient(135deg, #059669, #047857);
            color: white;
        }

        .export-btn.share {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }

        .export-btn.json {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }

        .export-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        /* Feedback Section Styles */
        .feedback-section {
            background: linear-gradient(135deg, #f8fafc, #ffffff);
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            border: 2px solid rgba(102, 126, 234, 0.1);
            position: relative;
            overflow: hidden;
            display: none;
            animation: fadeInUp 0.5s ease;
        }

        .feedback-section.show {
            display: block;
        }

        .feedback-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #667eea, #764ba2);
            animation: pulse 2s infinite;
        }

        .feedback-title {
            font-weight: 700;
            color: #4a5568;
            margin-bottom: 20px;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feedback-question {
            font-size: 1.05rem;
            color: #374151;
            margin-bottom: 20px;
            text-align: center;
        }

        .feedback-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
        }

        .feedback-btn {
            padding: 12px 30px;
            border: 2px solid #e5e7eb;
            background: white;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .feedback-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .feedback-btn.yes {
            color: #10b981;
            border-color: #10b981;
        }

        .feedback-btn.yes:hover {
            background: #10b981;
            color: white;
        }

        .feedback-btn.no {
            color: #ef4444;
            border-color: #ef4444;
        }

        .feedback-btn.no:hover {
            background: #ef4444;
            color: white;
        }

        .feedback-thank-you {
            display: none;
            text-align: center;
            padding: 20px;
            background: rgba(102, 126, 234, 0.1);
            border-radius: 10px;
            color: #667eea;
            font-weight: 600;
        }

        .feedback-thank-you.show {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @media (max-width: 768px) {
            body {
                padding-top: 60px;
            }
            
            .container {
                padding: 15px;
            }
            
            .tool-container {
                padding: 20px;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .button-group .btn {
                width: 100%;
                justify-content: center;
            }
            
            .nav-links-secondary {
                flex-direction: column;
                gap: 10px;
            }
            
            .tools-grid {
                grid-template-columns: 1fr;
            }

            .beta-content {
                flex-direction: column;
                gap: 8px;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
            }

            .modal-footer {
                flex-direction: column;
            }
            
            .progress-section {
                position: relative;
                top: auto;
            }

            .sample-buttons {
                flex-direction: column;
            }

            .sample-btn {
                width: 100%;
            }

            .dropdown-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
                flex-direction: column;
                gap: 8px;
            }

            .summary-header {
                flex-direction: column;
            }

            .summary-badges {
                width: 100%;
                justify-content: center;
            }

            .pattern-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .summary-visual {
                grid-template-columns: 1fr;
            }

            .disclaimer-content {
                padding: 0 10px;
            }

            .disclaimer-title {
                font-size: 1rem;
                flex-direction: column;
                gap: 5px;
            }

            .disclaimer-text {
                font-size: 0.85rem;
            }
        }
    </style>
</head>
<body>
    <!-- Beta Banner -->
    <div class="beta-banner">
        <div class="beta-content">
            <span class="beta-badge">BETA</span>
            <span>ðŸš€ Advanced AI detection & content analysis platform - Join our beta!</span>
            <button class="beta-join-btn" onclick="openBetaModal()">Join Beta</button>
        </div>
    </div>

    <!-- IMPORTANT DISCLAIMER BANNER -->
    <div class="disclaimer-banner">
        <div class="disclaimer-content">
            <div class="disclaimer-title">
                <i class="fas fa-exclamation-triangle"></i>
                Important Notice: AI Detection & Analysis Disclaimer
            </div>
            <div class="disclaimer-text">
                <span class="disclaimer-highlight">AI fact-checking and plagiarism detection are evolving challenges.</span> 
                While our advanced algorithms provide sophisticated analysis, results should be viewed with careful consideration and 
                <span class="disclaimer-highlight">not accepted as completely factual</span> without human verification. 
                Always cross-reference findings with multiple sources and use professional judgment when making important decisions based on these results.
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Combined Header - NEW COMPACT DESIGN -->
        <div class="header">
            <h1>
                <i class="fas fa-robot"></i> 
                AI Detection Pro
                <i class="fas fa-microscope"></i>
            </h1>
            <p class="subtitle">Professional AI Detection Engine</p>
            <p class="description">Comprehensive content analysis with AI detection, plagiarism check, and writing quality assessment</p>
        </div>

        <nav class="nav-bar">
            <div class="nav-links-secondary">
                <a href="/"><i class="fas fa-home"></i> Home</a>
                <a href="/news"><i class="fas fa-newspaper"></i> News Verification</a>
                <a href="/unified" class="active"><i class="fas fa-search"></i> AI Detection</a>
                <a href="/imageanalysis"><i class="fas fa-image"></i> Image Analysis</a>
                <a href="/missionstatement"><i class="fas fa-bullseye"></i> Our Mission</a>
                <a href="/pricingplan"><i class="fas fa-tags"></i> Pricing</a>
            </div>
        </nav>

        <div class="tool-container">
            <!-- Compact Dropdown Grid - NEW LAYOUT -->
            <div class="dropdown-grid">
                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown(this)">
                        <span><i class="fas fa-cogs"></i> 12 Analysis Methods</span>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                    </div>
                    <div class="dropdown-content">
                        <div class="tools-employed" style="border: none; margin: 0; padding: 0;">
                            <div class="tools-grid">
                                <div class="tool-item">
                                    <i class="fas fa-robot"></i> Advanced AI Pattern Recognition
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-fingerprint"></i> Linguistic Fingerprinting
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-chart-line"></i> Sentence Structure Analysis
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-brain"></i> Neural Network Detection
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-search"></i> Plagiarism Database Search
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-book"></i> Academic Database Check
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-language"></i> Vocabulary Complexity Analysis
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-balance-scale"></i> Writing Style Consistency
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-graduation-cap"></i> Reading Level Assessment
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-comments"></i> Sentiment Analysis
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-code"></i> GPT/Claude/Bard Detection
                                </div>
                                <div class="tool-item">
                                    <i class="fas fa-database"></i> 100M+ Document Database
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown(this)">
                        <span><i class="fas fa-info-circle"></i> How to Use</span>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                    </div>
                    <div class="dropdown-content">
                        <div style="display: grid; gap: 15px;">
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">1</div>
                                <div>
                                    <strong style="color: #4c1d95;">Input Your Content:</strong><br>
                                    <span style="color: #6b7280;">Paste text directly or upload documents (PDF, DOCX, TXT)</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">2</div>
                                <div>
                                    <strong style="color: #4c1d95;">Select Analysis Type:</strong><br>
                                    <span style="color: #6b7280;">FREE: Basic AI detection | PRO: Complete analysis with all features</span>
                                </div>
                            </div>
                            <div style="display: flex; align-items: start; gap: 15px;">
                                <div style="background: #667eea; color: white; width: 30px; height: 30px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; flex-shrink: 0;">3</div>
                                <div>
                                    <strong style="color: #4c1d95;">Review Results:</strong><br>
                                    <span style="color: #6b7280;">Get AI probability scores, plagiarism matches, and writing analysis</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="dropdown-section">
                    <div class="dropdown-header" onclick="toggleDropdown(this)">
                        <span><i class="fas fa-crown"></i> Free vs Pro</span>
                        <i class="fas fa-chevron-down dropdown-icon"></i>
                    </div>
                    <div class="dropdown-content">
                        <div style="display: grid; gap: 20px;">
                            <div style="background: white; padding: 25px; border-radius: 12px; border: 2px solid #e5e7eb;">
                                <h4 style="color: #6b7280; margin-bottom: 15px; font-size: 1.2rem;"><i class="fas fa-gift"></i> FREE Version</h4>
                                <ul style="list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px;">
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> Basic AI detection</li>
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> Simple plagiarism check</li>
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> Word count & statistics</li>
                                    <li style="color: #4b5563;"><i class="fas fa-check" style="color: #10b981; margin-right: 8px;"></i> 5 analyses per day</li>
                                    <li style="color: #9ca3af;"><i class="fas fa-times" style="color: #ef4444; margin-right: 8px;"></i> No pattern details</li>
                                    <li style="color: #9ca3af;"><i class="fas fa-times" style="color: #ef4444; margin-right: 8px;"></i> Limited plagiarism sources</li>
                                </ul>
                            </div>
                            <div style="background: linear-gradient(135deg, #667eea, #764ba2); padding: 25px; border-radius: 12px; border: 2px solid #667eea; box-shadow: 0 4px 15px rgba(102, 126, 234, 0.2);">
                                <h4 style="color: white; margin-bottom: 15px; font-size: 1.2rem;"><i class="fas fa-crown"></i> PRO Version</h4>
                                <ul style="list-style: none; padding: 0; margin: 0; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 10px;">
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Advanced AI detection</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Deep plagiarism analysis</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Pattern recognition details</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Unlimited analyses</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Downloadable reports</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Writing improvement tips</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> All 12 analysis methods</li>
                                    <li style="color: white;"><i class="fas fa-check" style="margin-right: 8px;"></i> Priority support</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Progress Section -->
            <div class="progress-section" id="progressSection" style="display: none;">
                <div class="progress-title">
                    <i class="fas fa-cogs fa-spin" style="color: #667eea;"></i>
                    AI Detection Analysis in Progress...
                </div>
                
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar">
                        <span class="progress-percentage" id="progressPercentage">0%</span>
                    </div>
                </div>
                
                <div class="progress-status">
                    <div class="progress-spinner"></div>
                    <span id="progressStatus">Initializing AI detection systems...</span>
                </div>
            </div>

            <div class="input-section">
                <div class="input-tabs">
                    <button class="input-tab active" onclick="switchInputType('text')">ðŸ“ Text Analysis</button>
                    <button class="input-tab" onclick="switchInputType('file')">ðŸ“ File Upload</button>
                </div>
                
                <div class="input-content active" id="textInput">
                    <div class="input-group">
                        <label for="content-text"><i class="fas fa-file-text"></i> Enter Text for Analysis</label>
                        <textarea id="content-text" placeholder="Paste your text here for AI detection, plagiarism check, and writing analysis..."></textarea>
                        
                        <!-- Sample Text Buttons -->
                        <div class="sample-buttons">
                            <button class="sample-btn" onclick="loadSampleText('ai')">ðŸ¤– AI Sample</button>
                            <button class="sample-btn" onclick="loadSampleText('human')">ðŸ‘¤ Human Sample</button>
                            <button class="sample-btn" onclick="loadSampleText('academic')">ðŸŽ“ Academic Sample</button>
                            <button class="sample-btn" onclick="loadSampleText('mixed')">ðŸ”€ Mixed Sample</button>
                        </div>
                    </div>
                </div>
                
                <div class="input-content" id="fileInput">
                    <div class="file-upload-section" id="fileUploadSection">
                        <input type="file" id="file-input" class="file-input" accept=".txt,.pdf,.doc,.docx">
                        <label for="file-input" class="file-upload-label">
                            <i class="fas fa-cloud-upload-alt"></i> Choose File or Drag & Drop
                        </label>
                        <p style="margin-top: 1rem; color: #6b7280; font-size: 0.9rem;">
                            Supported formats: TXT, PDF, DOC, DOCX (Max 10MB)
                        </p>
                    </div>
                </div>
            </div>

            <div class="button-group">
                <button class="btn btn-primary" onclick="runAnalysis('free')">
                    <i class="fas fa-play"></i> Start Free Analysis
                </button>
                <button class="btn btn-primary" onclick="runAnalysis('pro')" style="background: linear-gradient(135deg, #f59e0b, #d97706);">
                    <i class="fas fa-crown"></i> Start Pro Analysis
                </button>
                <button class="btn btn-test" onclick="loadTestData()">
                    <i class="fas fa-flask"></i> Load Sample Text
                </button>
                <button class="btn btn-secondary" onclick="resetForm()">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>

            <div class="results" id="results">
                <!-- Results will be populated here -->
            </div>
        </div>
    </div>

    <!-- Beta Modal -->
    <div id="betaModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBetaModal()">&times;</span>
            <div class="modal-header">
                <h2>ðŸš€ Join Our Beta Program</h2>
                <p>Get exclusive early access to advanced AI detection features!</p>
            </div>
            <div class="modal-body">
                <form id="betaSignupForm">
                    <div class="input-group">
                        <input type="email" id="betaEmail" placeholder="Enter your email address" required>
                    </div>
                    <div class="input-group">
                        <input type="text" id="betaName" placeholder="Your name (optional)">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeBetaModal()">Cancel</button>
                <button class="btn btn-primary" onclick="submitBetaSignup()">Join Beta Program</button>
            </div>
        </div>
    </div>

    <script src="/static/auth-analysis.js"></script>
    <script>
        // Global variables
        let currentInputType = 'text';
        let currentAnalysisData = null;
        let currentTier = 'free';

        // Sample texts
        const sampleTexts = {
            ai: "The implementation of artificial intelligence in modern healthcare systems represents a paradigm shift in medical diagnostics and treatment protocols. Through sophisticated machine learning algorithms, healthcare providers can now analyze vast datasets with unprecedented accuracy, leading to improved patient outcomes and more efficient resource allocation. Furthermore, the integration of AI-powered predictive analytics enables early disease detection and personalized treatment plans, revolutionizing the traditional approach to medicine.",
            human: "I went to the doctor yesterday and honestly, it was such a weird experience. They had this new AI thing that was supposed to help diagnose stuff, but the nurse seemed confused about how to use it. I'm not sure if it actually helped or just made things take longer. Still got my prescription though, so I guess it worked out okay in the end. Has anyone else dealt with these AI medical systems? I'd love to hear your thoughts.",
            academic: "This study examines the correlation between social media usage patterns and academic performance among undergraduate students (N=1,247). Through a mixed-methods approach incorporating quantitative surveys and qualitative interviews, our findings suggest a statistically significant negative correlation (r=-0.34, p<0.001) between excessive social media consumption and GPA scores. However, structured educational use of social platforms demonstrated positive outcomes in collaborative learning scenarios.",
            mixed: "Recent advances in quantum computing have opened new possibilities for cryptography and data processing. While traditional computers use bits that exist in either 0 or 1 states, quantum computers utilize qubits that can exist in superposition. I've been following this field for years, and it's honestly mind-blowing how fast things are progressing. The implications for cybersecurity are particularly significant, as current encryption methods may become obsolete. However, practical implementation remains challenging due to technical constraints."
        };

        // Show notification
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            notification.style.display = 'block';
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.display = 'none';
                document.body.removeChild(notification);
            }, 3000);
        }

        // Beta Modal Functions
        function openBetaModal() {
            trackAIEvent('beta_modal_opened');
            document.getElementById('betaModal').style.display = 'block';
        }

        function closeBetaModal() {
            trackAIEvent('beta_modal_closed');
            document.getElementById('betaModal').style.display = 'none';
        }

        function submitBetaSignup() {
            const email = document.getElementById('betaEmail').value;
            const name = document.getElementById('betaName').value;

            if (!email) {
                alert('Please enter your email address');
                return;
            }

            trackAIEvent('beta_signup_attempted', { email: email });

            // Simulate signup
            setTimeout(() => {
                trackAIEvent('beta_signup_completed', { email: email });
                alert('ðŸŽ‰ Welcome to the beta! Check your email for access details.');
                closeBetaModal();
                document.getElementById('betaSignupForm').reset();
            }, 1000);
        }

        // Dropdown toggle
        function toggleDropdown(header) {
            const content = header.nextElementSibling;
            const isOpen = header.classList.contains('open');
            
            header.classList.toggle('open');
            content.classList.toggle('open');
        }

        // Input type switching
        function switchInputType(type) {
            currentInputType = type;
            
            document.querySelectorAll('.input-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.input-content').forEach(content => {
                content.classList.remove('active');
            });
            
            event.target.classList.add('active');
            document.getElementById(type + 'Input').classList.add('active');
            
            trackAIEvent('input_type_switched', { type: type });
        }

        // Load sample text
        function loadSampleText(type) {
            document.getElementById('content-text').value = sampleTexts[type];
            showNotification(`${type.charAt(0).toUpperCase() + type.slice(1)} sample text loaded`, 'success');
            trackAIEvent('sample_text_loaded', { type: type });
        }

        // Load test data (alias for loadSampleText)
        function loadTestData() {
            loadSampleText('ai');
        }

        // Setup file upload
        document.addEventListener('DOMContentLoaded', function() {
            const fileInput = document.getElementById('file-input');
            const uploadSection = document.getElementById('fileUploadSection');
            
            // File input change
            if (fileInput) {
                fileInput.addEventListener('change', handleFileUpload);
            }
            
            // Drag and drop
            if (uploadSection) {
                uploadSection.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadSection.classList.add('dragover');
                });
                
                uploadSection.addEventListener('dragleave', () => {
                    uploadSection.classList.remove('dragover');
                });
                
                uploadSection.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadSection.classList.remove('dragover');
                    
                    const files = e.dataTransfer.files;
                    if (files.length > 0) {
                        fileInput.files = files;
                        handleFileUpload({ target: { files: files } });
                    }
                });
            }
        });

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            
            if (file.size > 10 * 1024 * 1024) {
                showNotification('File too large. Maximum size is 10MB.', 'error');
                return;
            }
            
            showNotification(`File "${file.name}" uploaded successfully`, 'success');
            trackAIEvent('file_uploaded', { 
                file_type: file.type,
                file_size: file.size
            });
        }

        // Reset form
        function resetForm() {
            document.getElementById('content-text').value = '';
            document.getElementById('file-input').value = '';
            document.getElementById('results').style.display = 'none';
            document.getElementById('results').innerHTML = '';
            showNotification('Form reset successfully', 'success');
            trackAIEvent('form_reset');
        }

        // Toggle analysis dropdown
        function toggleAnalysisDropdown(element) {
            const dropdown = element.closest('.analysis-dropdown');
            const isActive = dropdown.classList.contains('active');
            
            // Close all dropdowns
            document.querySelectorAll('.analysis-dropdown').forEach(d => {
                d.classList.remove('active');
            });
            
            // Toggle current dropdown
            if (!isActive) {
                dropdown.classList.add('active');
            }
            
            trackAIEvent('analysis_dropdown_toggled', {
                dropdown: dropdown.querySelector('.dropdown-title-text').textContent,
                action: !isActive ? 'opened' : 'closed'
            });
        }

        // Main analysis function - ENHANCED WITH REAL API CALLS
        async function runAnalysis(tier) {
            tier = tier || 'free';
            currentTier = tier;
            
            trackAIEvent('analysis_started', { tier: tier });
            
            // Get input
            const textInput = document.getElementById('content-text').value.trim();
            
            if (!textInput) {
                showNotification('Please enter text to analyze', 'error');
                return;
            }
            
            if (textInput.length < 50) {
                showNotification('Please enter at least 50 characters for meaningful analysis', 'error');
                return;
            }
            
            // Show progress
            const progressSection = document.getElementById('progressSection');
            const progressBar = document.getElementById('progressBar');
            const progressPercentage = document.getElementById('progressPercentage');
            const progressStatus = document.getElementById('progressStatus');
            progressSection.style.display = 'block';
            
            // Reset progress
            progressBar.style.width = '0%';
            progressPercentage.textContent = '0%';
            
            // Progress messages
            const progressMessages = [
                'Initializing AI detection systems...',
                'Analyzing linguistic patterns...',
                'Checking plagiarism databases...',
                'Evaluating writing style...',
                'Calculating final scores...',
                'Preparing detailed report...'
            ];
            
            let currentProgress = 0;
            let messageIndex = 0;
            
            // Animate progress
            const progressInterval = setInterval(() => {
                currentProgress += 20;
                progressBar.style.width = currentProgress + '%';
                progressPercentage.textContent = currentProgress + '%';
                
                if (messageIndex < progressMessages.length) {
                    progressStatus.textContent = progressMessages[messageIndex];
                    messageIndex++;
                }
                
                if (currentProgress >= 100) {
                    clearInterval(progressInterval);
                    progressStatus.textContent = 'Analysis complete!';
                }
            }, 800);
            
            try {
                // Call the REAL API endpoint from your backend
                const response = await fetch('/api/analyze-unified', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        content: textInput,
                        text: textInput,
                        type: 'all'
                    })
                });
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const results = await response.json();
                
                // Validate that we got real data
                if (!results.ai_analysis) {
                    throw new Error('Invalid response format from server');
                }
                
                currentAnalysisData = results;
                
                // Hide progress and show results
                setTimeout(() => {
                    progressSection.style.display = 'none';
                    showResults(results, tier);
                }, 1000);
                
                trackAIEvent('analysis_completed', {
                    tier: tier,
                    ai_probability: results.ai_analysis?.ai_probability || 0,
                    originality_score: results.ai_analysis?.plagiarism_check?.originality_score || 100
                });
                
            } catch (error) {
                console.error('Analysis error:', error);
                clearInterval(progressInterval);
                progressSection.style.display = 'none';
                showNotification(`Analysis failed: ${error.message}. Please try again.`, 'error');
                trackAIEvent('analysis_failed', { error: error.message });
            }
        }

        // Show results - SPECTACULAR PRO VERSION WITH REAL DATA & DOWNLOAD FUNCTIONALITY
        function showResults(results, tier) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '';
            resultsDiv.style.display = 'block';
            
            // Extract REAL data from backend response
            const aiAnalysis = results.ai_analysis || {};
            const aiProb = aiAnalysis.ai_probability || 0;
            const humanProb = aiAnalysis.human_probability || 100 - aiProb;
            const plagiarismCheck = aiAnalysis.plagiarism_check || {};
            const originalityScore = plagiarismCheck.originality_score || 100;
            const indicators = aiAnalysis.indicators || {};
            const statistics = aiAnalysis.statistics || {};
            const detectedPatterns = aiAnalysis.detected_patterns || {};
            
            // Create spectacular results container
            const resultsContainer = document.createElement('div');
            resultsContainer.style.cssText = 'display: grid; gap: 30px;';
            
            // SUMMARY BANNER WITH REAL DATA
            const summaryBanner = document.createElement('div');
            summaryBanner.className = 'results-summary-banner';
            summaryBanner.innerHTML = `
                <div class="summary-content">
                    <div class="summary-header">
                        <h2 class="summary-title">
                            <i class="fas fa-chart-line"></i>
                            Complete Analysis Report
                        </h2>
                        <div class="summary-badges">
                            <div class="summary-badge">
                                <div class="badge-value">${aiProb}%</div>
                                <div class="badge-label">AI Detected</div>
                            </div>
                            <div class="summary-badge">
                                <div class="badge-value">${originalityScore}%</div>
                                <div class="badge-label">Original</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="summary-narrative">
                        ${aiProb > 70 ? 
                            `<strong>AI Content Detected!</strong> Our advanced analysis shows a ${aiProb}% probability that this text was generated by AI.` :
                        aiProb > 40 ?
                            `<strong>Mixed Content Detected.</strong> This appears to be a blend of human and AI writing, with ${aiProb}% AI probability.` :
                            `<strong>Authentic Human Writing!</strong> With only ${aiProb}% AI probability, this text shows genuine human authorship.`
                        }
                    </div>
                    
                    <div class="summary-visual">
                        <div class="visual-card">
                            <span class="visual-icon">ðŸ¤–</span>
                            <div class="visual-metric">${detectedPatterns.ai_phrases || 0}</div>
                            <div class="visual-description">AI Phrases Found</div>
                        </div>
                        <div class="visual-card">
                            <span class="visual-icon">ðŸ“Š</span>
                            <div class="visual-metric">${indicators.vocabulary_diversity || 0}%</div>
                            <div class="visual-description">Vocabulary Diversity</div>
                        </div>
                        <div class="visual-card">
                            <span class="visual-icon">ðŸ“</span>
                            <div class="visual-metric">${statistics.reading_level || 'Unknown'}</div>
                            <div class="visual-description">Reading Level</div>
                        </div>
                        <div class="visual-card">
                            <span class="visual-icon">ðŸ”</span>
                            <div class="visual-metric">${plagiarismCheck.matched_sources || 0}</div>
                            <div class="visual-description">Source Matches</div>
                        </div>
                    </div>
                    
                    <div class="summary-footnote">
                        ðŸ“Œ Remember: AI detection is an evolving field. Always verify results with human judgment and multiple sources.
                    </div>
                </div>
            `;
            
            // DOWNLOAD SECTION
            const downloadSection = document.createElement('div');
            downloadSection.className = 'download-section';
            downloadSection.innerHTML = `
                <div class="download-title">
                    <i class="fas fa-download"></i>
                    Download & Export Options
                </div>
                <div class="export-section">
                    <button class="export-btn pdf" onclick="exportToPDF()" title="Download detailed PDF report">
                        <i class="fas fa-file-pdf"></i>
                        Download PDF Report
                    </button>
                    <button class="export-btn json" onclick="exportToJSON()" title="Download raw analysis data">
                        <i class="fas fa-code"></i>
                        Export JSON Data
                    </button>
                    <button class="export-btn certificate" onclick="generateCertificate()" title="Generate authenticity certificate">
                        <i class="fas fa-certificate"></i>
                        Get Certificate
                    </button>
                    <button class="export-btn share" onclick="shareResults()" title="Share analysis results">
                        <i class="fas fa-share-alt"></i>
                        Share Results
                    </button>
                </div>
            `;
            
            // Add all elements to container
            resultsContainer.appendChild(summaryBanner);
            resultsContainer.appendChild(downloadSection);
            
            // Add Feedback Section - NEW FEATURE
            const feedbackSection = document.createElement('div');
            feedbackSection.className = 'feedback-section show';
            feedbackSection.innerHTML = `
                <div class="feedback-title">
                    <i class="fas fa-comment-alt"></i>
                    Help Us Improve
                </div>
                <div class="feedback-question">
                    Was this AI detection analysis accurate?
                </div>
                <div class="feedback-buttons" id="feedbackButtons">
                    <button class="feedback-btn yes" onclick="sendFeedback(true)">
                        <i class="fas fa-check"></i>
                        Yes, Accurate
                    </button>
                    <button class="feedback-btn no" onclick="sendFeedback(false)">
                        <i class="fas fa-times"></i>
                        No, Inaccurate
                    </button>
                </div>
                <div class="feedback-thank-you" id="feedbackThankYou">
                    <i class="fas fa-heart"></i> Thank you for your feedback! This helps us improve our AI detection accuracy.
                </div>
            `;
            resultsContainer.appendChild(feedbackSection);
            
            resultsDiv.appendChild(resultsContainer);
            resultsDiv.scrollIntoView({ behavior: 'smooth' });
        }

        // Feedback function
        async function sendFeedback(wasAccurate) {
            if (!currentAnalysisData) {
                showNotification('No analysis data available', 'error');
                return;
            }
            
            const feedbackData = {
                text: document.getElementById('content-text').value.substring(0, 500),
                ai_probability: currentAnalysisData.ai_analysis?.ai_probability || 0,
                was_accurate: wasAccurate,
                timestamp: new Date().toISOString()
            };
            
            // Track feedback
            trackAIEvent('feedback_submitted', {
                was_accurate: wasAccurate,
                ai_probability: feedbackData.ai_probability
            });
            
            // Hide buttons and show thank you message
            document.getElementById('feedbackButtons').style.display = 'none';
            document.getElementById('feedbackThankYou').classList.add('show');
            
            try {
                // Send feedback to backend
                const response = await fetch('/feedback', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(feedbackData)
                });
                
                if (!response.ok) {
                    console.error('Feedback submission failed:', response.status);
                }
            } catch (error) {
                console.error('Error submitting feedback:', error);
                // Don't show error to user - feedback UI already updated
            }
            
            // Hide feedback section after 3 seconds
            setTimeout(() => {
                const feedbackSection = document.querySelector('.feedback-section');
                if (feedbackSection) {
                    feedbackSection.style.display = 'none';
                }
            }, 3000);
        }

        // REAL DOWNLOAD FUNCTIONS
        function exportToPDF() {
            if (!currentAnalysisData) {
                showNotification('No analysis data available to export', 'error');
                return;
            }
            
            showNotification('PDF export feature coming soon!', 'info');
            trackAIEvent('pdf_export_attempted');
        }

        function exportToJSON() {
            if (!currentAnalysisData) {
                showNotification('No analysis data available to export', 'error');
                return;
            }
            
            const jsonStr = JSON.stringify(currentAnalysisData, null, 2);
            const blob = new Blob([jsonStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `AI_Analysis_${new Date().toISOString().split('T')[0]}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('JSON data exported successfully!', 'success');
            trackAIEvent('json_exported');
        }

        function generateCertificate() {
            showNotification('Certificate generation coming soon!', 'info');
            trackAIEvent('certificate_generation_attempted');
        }

        function shareResults() {
            if (!currentAnalysisData) {
                showNotification('No analysis data available to share', 'error');
                return;
            }
            
            const aiProb = currentAnalysisData.ai_analysis?.ai_probability || 0;
            const shareText = `AI Analysis Results: ${aiProb}% AI probability detected. Analyzed with Facts & Fakes AI Detection Pro.`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'AI Detection Analysis Results',
                    text: shareText
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('Results copied to clipboard!', 'success');
                });
            }
            
            trackAIEvent('results_shared');
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('betaModal');
            if (event.target === modal) {
                closeBetaModal();
            }
        };

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            trackAIEvent('page_loaded');
        });
    </script>
</body>
</html>
