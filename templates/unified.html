<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Detection & Content Analysis - Facts & Fakes AI</title>
    
    <!-- Google Analytics 4 Integration -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GA_MEASUREMENT_ID"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'GA_MEASUREMENT_ID', {
            page_title: 'AI Detection & Content Analysis',
            page_location: window.location.href,
            custom_map: {
                'custom_parameter_1': 'analysis_type',
                'custom_parameter_2': 'user_tier',
                'custom_parameter_3': 'file_upload_type'
            }
        });

        // Enhanced Analytics Tracking System
        class AnalyticsTracker {
            constructor() {
                this.sessionId = this.generateSessionId();
                this.startTime = Date.now();
                this.analysisStarted = false;
                this.setupEventListeners();
                this.trackPageLoad();
            }

            generateSessionId() {
                return 'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
            }

            trackPageLoad() {
                gtag('event', 'page_view', {
                    page_title: 'Unified Analysis Page',
                    page_location: window.location.href,
                    session_id: this.sessionId,
                    user_engagement: true
                });

                // Track page performance
                window.addEventListener('load', () => {
                    const loadTime = Date.now() - this.startTime;
                    gtag('event', 'page_load_time', {
                        event_category: 'Performance',
                        value: loadTime,
                        session_id: this.sessionId
                    });
                });
            }

            setupEventListeners() {
                // Track scroll depth
                this.trackScrollDepth();
                
                // Track time on page
                this.trackTimeOnPage();
                
                // Track form interactions
                this.trackFormInteractions();
                
                // Track file uploads
                this.trackFileUploads();
                
                // Track button clicks
                this.trackButtonClicks();
                
                // Track tier selection
                this.trackTierSelection();
                
                // Track sample text usage
                this.trackSampleTextUsage();
            }

            trackScrollDepth() {
                let maxScroll = 0;
                window.addEventListener('scroll', () => {
                    const scrollPercent = Math.round((window.scrollY / (document.body.scrollHeight - window.innerHeight)) * 100);
                    if (scrollPercent > maxScroll && scrollPercent % 25 === 0) {
                        maxScroll = scrollPercent;
                        gtag('event', 'scroll_depth', {
                            event_category: 'Engagement',
                            event_label: `${scrollPercent}%`,
                            value: scrollPercent,
                            session_id: this.sessionId
                        });
                    }
                });
            }

            trackTimeOnPage() {
                setInterval(() => {
                    const timeSpent = Math.round((Date.now() - this.startTime) / 1000);
                    if (timeSpent % 30 === 0 && timeSpent > 0) {
                        gtag('event', 'time_on_page', {
                            event_category: 'Engagement',
                            value: timeSpent,
                            session_id: this.sessionId
                        });
                    }
                }, 30000);
            }

            trackFormInteractions() {
                const textInput = document.getElementById('textInput');
                if (textInput) {
                    let hasTyped = false;
                    
                    textInput.addEventListener('focus', () => {
                        gtag('event', 'text_input_focus', {
                            event_category: 'Form Interaction',
                            session_id: this.sessionId
                        });
                    });

                    textInput.addEventListener('input', () => {
                        if (!hasTyped) {
                            hasTyped = true;
                            gtag('event', 'text_input_start', {
                                event_category: 'Form Interaction',
                                session_id: this.sessionId
                            });
                        }
                    });

                    textInput.addEventListener('blur', () => {
                        const charCount = textInput.value.length;
                        gtag('event', 'text_input_blur', {
                            event_category: 'Form Interaction',
                            value: charCount,
                            session_id: this.sessionId
                        });
                    });
                }
            }

            trackFileUploads() {
                const fileInput = document.getElementById('fileInput');
                if (fileInput) {
                    fileInput.addEventListener('change', (e) => {
                        const file = e.target.files[0];
                        if (file) {
                            gtag('event', 'file_upload_attempt', {
                                event_category: 'File Upload',
                                event_label: file.type,
                                value: Math.round(file.size / 1024), // Size in KB
                                custom_parameter_3: file.type,
                                session_id: this.sessionId
                            });
                        }
                    });
                }

                // Track drag and drop
                const uploadSection = document.getElementById('fileUploadSection');
                if (uploadSection) {
                    uploadSection.addEventListener('dragenter', () => {
                        gtag('event', 'file_drag_enter', {
                            event_category: 'File Upload',
                            session_id: this.sessionId
                        });
                    });

                    uploadSection.addEventListener('drop', () => {
                        gtag('event', 'file_drag_drop', {
                            event_category: 'File Upload',
                            session_id: this.sessionId
                        });
                    });
                }
            }

            trackButtonClicks() {
                // Track all buttons with specific events
                document.addEventListener('click', (e) => {
                    const target = e.target;
                    
                    if (target.id === 'analyzeBtn') {
                        this.trackAnalysisStart();
                    } else if (target.classList.contains('sample-btn')) {
                        const sampleType = target.textContent.toLowerCase();
                        gtag('event', 'sample_text_loaded', {
                            event_category: 'Content Interaction',
                            event_label: sampleType,
                            session_id: this.sessionId
                        });
                    } else if (target.classList.contains('beta-join-btn')) {
                        gtag('event', 'beta_modal_opened', {
                            event_category: 'Conversion',
                            event_label: 'from_unified_page',
                            session_id: this.sessionId
                        });
                    } else if (target.classList.contains('action-btn')) {
                        const actionType = target.textContent.toLowerCase().trim();
                        gtag('event', 'result_action_clicked', {
                            event_category: 'Results Interaction',
                            event_label: actionType,
                            session_id: this.sessionId
                        });
                    } else if (target.classList.contains('upgrade-btn')) {
                        gtag('event', 'upgrade_button_clicked', {
                            event_category: 'Conversion',
                            event_label: 'pro_upgrade',
                            session_id: this.sessionId
                        });
                    }
                });
            }

            trackTierSelection() {
                document.addEventListener('change', (e) => {
                    if (e.target.name === 'tier') {
                        gtag('event', 'tier_selected', {
                            event_category: 'User Preference',
                            event_label: e.target.value,
                            custom_parameter_2: e.target.value,
                            session_id: this.sessionId
                        });
                    }
                });
            }

            trackSampleTextUsage() {
                // This will be called from the loadSampleText function
                window.trackSampleText = (type) => {
                    gtag('event', 'sample_text_used', {
                        event_category: 'Content Interaction',
                        event_label: type,
                        session_id: this.sessionId
                    });
                };
            }

            trackAnalysisStart() {
                if (!this.analysisStarted) {
                    this.analysisStarted = true;
                    const selectedTier = document.querySelector('input[name="tier"]:checked')?.value || 'unknown';
                    const textLength = document.getElementById('textInput')?.value.length || 0;
                    
                    gtag('event', 'analysis_started', {
                        event_category: 'Analysis',
                        event_label: selectedTier,
                        value: textLength,
                        custom_parameter_1: 'unified_analysis',
                        custom_parameter_2: selectedTier,
                        session_id: this.sessionId
                    });

                    // Track as conversion event
                    gtag('event', 'begin_analysis', {
                        event_category: 'Conversion',
                        value: selectedTier === 'pro' ? 1 : 0,
                        session_id: this.sessionId
                    });
                }
            }

            trackAnalysisComplete(results) {
                const selectedTier = document.querySelector('input[name="tier"]:checked')?.value || 'unknown';
                const aiProbability = results?.ai_detection?.ai_probability || 0;
                const similarityScore = results?.plagiarism_detection?.similarity_score || 0;
                
                gtag('event', 'analysis_completed', {
                    event_category: 'Analysis',
                    event_label: selectedTier,
                    value: Math.round(aiProbability * 100),
                    custom_parameter_1: 'unified_analysis',
                    custom_parameter_2: selectedTier,
                    session_id: this.sessionId
                });

                // Track specific result thresholds
                if (aiProbability > 0.7) {
                    gtag('event', 'high_ai_probability_detected', {
                        event_category: 'Analysis Results',
                        value: Math.round(aiProbability * 100),
                        session_id: this.sessionId
                    });
                }

                if (similarityScore > 0.3) {
                    gtag('event', 'high_similarity_detected', {
                        event_category: 'Analysis Results',
                        value: Math.round(similarityScore * 100),
                        session_id: this.sessionId
                    });
                }

                // Track conversion completion
                gtag('event', 'purchase', {
                    transaction_id: this.sessionId,
                    value: selectedTier === 'pro' ? 10 : 0,
                    currency: 'USD',
                    items: [{
                        item_id: 'unified_analysis',
                        item_name: `${selectedTier} Analysis`,
                        category: 'AI Detection',
                        quantity: 1,
                        price: selectedTier === 'pro' ? 10 : 0
                    }]
                });
            }

            trackBetaSignup(email) {
                gtag('event', 'beta_signup_completed', {
                    event_category: 'Conversion',
                    event_label: 'unified_page',
                    session_id: this.sessionId
                });

                gtag('event', 'generate_lead', {
                    currency: 'USD',
                    value: 25,
                    session_id: this.sessionId
                });
            }

            trackError(errorType, errorMessage) {
                gtag('event', 'exception', {
                    description: `${errorType}: ${errorMessage}`,
                    fatal: false,
                    session_id: this.sessionId
                });
            }

            trackConversion(conversionType, value = 0) {
                gtag('event', conversionType, {
                    event_category: 'Conversion',
                    value: value,
                    session_id: this.sessionId
                });
            }
        }

        // Debug mode for testing
        window.debugAnalytics = () => {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get('debug') === 'true';
        };

        if (window.debugAnalytics()) {
            console.log('Analytics Debug Mode Enabled');
            const originalGtag = window.gtag;
            window.gtag = function() {
                console.log('Analytics Event:', arguments);
                if (originalGtag) originalGtag.apply(this, arguments);
            };
        }
    </script>

    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzAwN2JmZiIvPgo8cGF0aCBkPSJNOCAxMmg4djJIOHYtMnptMCA0aDEydjJIOHYtMnptMCA0aDZ2Mkg4di0yeiIgZmlsbD0id2hpdGUiLz4KPC9zdmc+">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }
        
        /* Header */
        header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 1rem 0;
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        nav {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 1.5rem;
            font-weight: bold;
            text-decoration: none;
        }

        .nav-links {
            display: flex;
            list-style: none;
            gap: 2rem;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            transition: opacity 0.3s;
        }

        .nav-links a:hover {
            opacity: 0.8;
        }

        .nav-links a.active {
            opacity: 1;
            font-weight: 600;
        }

        /* Beta Banner */
        .beta-banner {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            padding: 8px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .beta-banner::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.3), transparent);
            animation: shimmer 3s infinite;
            transform: rotate(45deg);
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }

        .beta-content {
            position: relative;
            z-index: 2;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            color: white;
            font-weight: 600;
        }

        .beta-badge {
            background: rgba(255,255,255,0.2);
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .beta-join-btn {
            background: rgba(255,255,255,0.2);
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            padding: 6px 16px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .beta-join-btn:hover {
            background: rgba(255,255,255,0.3);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }
        
        .container {
            max-width: 1400px;
            margin: 2rem auto;
            padding: 0 2rem;
        }
        
        .hero-section {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 3rem;
            margin-bottom: 2rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
            text-align: center;
        }
        
        .hero-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .hero-subtitle {
            font-size: 1.3rem;
            color: #666;
            margin-bottom: 1rem;
            max-width: 800px;
            margin-left: auto;
            margin-right: auto;
            line-height: 1.6;
        }
        
        .disclaimer {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid #ffc107;
            border-radius: 10px;
            padding: 1.5rem;
            margin: 2rem 0;
            text-align: left;
        }
        
        .disclaimer-title {
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .disclaimer-content {
            color: #666;
            line-height: 1.6;
            font-size: 0.95rem;
        }
        
        .tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 3rem;
        }
        
        .tool-card {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
        }
        
        .tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 40px rgba(0,0,0,0.15);
        }
        
        .tool-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            display: block;
        }
        
        .tool-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .tool-desc {
            color: #666;
            font-size: 0.95rem;
            line-height: 1.5;
        }
        
        .analysis-container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            padding: 3rem;
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            backdrop-filter: blur(10px);
        }
        
        .input-section {
            margin-bottom: 2rem;
        }
        
        .input-group {
            margin-bottom: 1.5rem;
        }
        
        .input-label {
            display: block;
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
            font-size: 1.1rem;
        }
        
        .text-input {
            width: 100%;
            min-height: 200px;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-family: inherit;
            font-size: 1rem;
            resize: vertical;
            transition: border-color 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .text-input:focus {
            outline: none;
            border-color: #007bff;
            box-shadow: 0 0 0 3px rgba(0, 123, 255, 0.1);
        }
        
        .sample-buttons {
            display: flex;
            gap: 1rem;
            margin-bottom: 1rem;
            flex-wrap: wrap;
        }
        
        .sample-btn {
            padding: 0.5rem 1rem;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .sample-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .file-upload-section {
            border: 2px dashed #007bff;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
            background: rgba(0, 123, 255, 0.05);
        }
        
        .file-upload-section:hover {
            border-color: #0056b3;
            background: rgba(0, 123, 255, 0.1);
        }
        
        .file-upload-section.dragover {
            border-color: #28a745;
            background: rgba(40, 167, 69, 0.1);
        }
        
        .file-input {
            display: none;
        }
        
        .file-upload-label {
            display: inline-block;
            padding: 1rem 2rem;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            border-radius: 10px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .file-upload-label:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .tier-selection {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            justify-content: center;
        }
        
        .tier-option {
            flex: 1;
            max-width: 200px;
        }
        
        .tier-radio {
            display: none;
        }
        
        .tier-label {
            display: block;
            padding: 1rem;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.9);
        }
        
        .tier-radio:checked + .tier-label {
            border-color: #007bff;
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .tier-name {
            font-weight: 600;
            font-size: 1.1rem;
            margin-bottom: 0.5rem;
        }
        
        .tier-desc {
            font-size: 0.9rem;
            opacity: 0.8;
        }
        
        .analyze-btn {
            width: 100%;
            padding: 1.2rem;
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-bottom: 2rem;
        }
        
        .analyze-btn:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(40, 167, 69, 0.3);
        }
        
        .analyze-btn:disabled {
            background: #6c757d;
            cursor: not-allowed;
            transform: none;
        }
        
        .progress-section {
            margin-bottom: 2rem;
            display: none;
        }
        
        .progress-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .progress-title {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            text-align: center;
            color: #333;
        }
        
        .progress-bars {
            display: grid;
            gap: 1rem;
        }
        
        .progress-item {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        
        .progress-label {
            min-width: 120px;
            font-weight: 500;
            font-size: 0.9rem;
            color: #555;
        }
        
        .progress-bar {
            flex: 1;
            height: 8px;
            background: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #ff6b6b, #ffd93d, #6bcf7f, #4ecdc4, #45b7d1, #96ceb4, #feca57);
            background-size: 300% 100%;
            border-radius: 10px;
            transition: width 1s ease;
            animation: rainbow 3s ease-in-out infinite;
        }
        
        @keyframes rainbow {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        
        .progress-percent {
            min-width: 40px;
            text-align: right;
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
        }
        
        .results-section {
            display: none;
        }
        
        .results-summary {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .summary-title {
            font-size: 1.8rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }
        
        .summary-text {
            font-size: 1.1rem;
            color: #555;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }
        
        .summary-highlights {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-top: 1.5rem;
        }
        
        .highlight-item {
            background: rgba(0, 123, 255, 0.05);
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #007bff;
            text-align: center;
        }
        
        .highlight-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #007bff;
            display: block;
        }
        
        .highlight-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 0.5rem;
        }
        
        .infographic-container {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .infographic-title {
            font-size: 1.5rem;
            font-weight: 600;
            color: #333;
            margin-bottom: 1.5rem;
            text-align: center;
        }
        
        .score-visualization {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 2rem;
            margin-bottom: 2rem;
        }
        
        .score-meter {
            position: relative;
            text-align: center;
        }
        
        .meter-circle {
            width: 150px;
            height: 150px;
            margin: 0 auto 1rem;
            position: relative;
        }
        
        .meter-svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }
        
        .meter-bg {
            fill: none;
            stroke: #e9ecef;
            stroke-width: 10;
        }
        
        .meter-progress {
            fill: none;
            stroke-width: 10;
            stroke-linecap: round;
            transition: stroke-dasharray 1s ease;
        }
        
        .meter-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }
        
        .meter-label {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .meter-desc {
            font-size: 0.9rem;
            color: #666;
            line-height: 1.4;
        }
        
        .detailed-panels {
            display: grid;
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .detail-panel {
            background: rgba(255, 255, 255, 0.9);
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }
        
        .panel-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 1.5rem;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: 600;
            font-size: 1.1rem;
            position: relative;
        }
        
        .panel-lock {
            position: absolute;
            top: 10px;
            right: 15px;
            background: rgba(255, 193, 7, 0.9);
            color: #333;
            padding: 0.3rem 0.6rem;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: 600;
        }
        
        .panel-toggle {
            font-size: 1.2rem;
            transition: transform 0.3s ease;
        }
        
        .panel-content {
            padding: 2rem;
            display: none;
            max-height: 400px;
            overflow-y: auto;
        }
        
        .panel-content.active {
            display: block;
        }
        
        .panel-header.active .panel-toggle {
            transform: rotate(180deg);
        }
        
        .conversational-text {
            font-size: 1rem;
            color: #555;
            line-height: 1.7;
            margin-bottom: 1.5rem;
        }
        
        .conversational-text strong {
            color: #333;
        }
        
        .highlight-box {
            background: rgba(40, 167, 69, 0.1);
            border: 1px solid #28a745;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
        }
        
        .highlight-box.warning {
            background: rgba(255, 193, 7, 0.1);
            border-color: #ffc107;
        }
        
        .highlight-box.danger {
            background: rgba(220, 53, 69, 0.1);
            border-color: #dc3545;
        }
        
        .plagiarism-matches {
            margin-top: 1.5rem;
        }
        
        .match-item {
            background: rgba(255, 193, 7, 0.1);
            border: 1px solid #ffc107;
            border-radius: 8px;
            padding: 1rem;
            margin-bottom: 1rem;
        }
        
        .match-header {
            font-weight: 600;
            color: #333;
            margin-bottom: 0.5rem;
        }
        
        .match-text {
            font-style: italic;
            color: #666;
            background: rgba(255, 255, 255, 0.8);
            padding: 0.5rem;
            border-radius: 5px;
            margin-top: 0.5rem;
        }
        
        .methodology-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }
        
        .methodology-item {
            background: rgba(0, 123, 255, 0.05);
            padding: 1rem;
            border-radius: 8px;
            border-left: 4px solid #007bff;
        }
        
        .methodology-label {
            font-weight: 600;
            color: #333;
            font-size: 0.9rem;
            margin-bottom: 0.5rem;
        }
        
        .methodology-value {
            color: #007bff;
            font-weight: 500;
        }
        
        .action-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-top: 2rem;
            flex-wrap: wrap;
        }
        
        .action-btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #007bff, #0056b3);
            color: white;
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d, #495057);
            color: white;
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745, #20c997);
            color: white;
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        
        .footer {
            background: rgba(255, 255, 255, 0.95);
            padding: 3rem 0 2rem;
            margin-top: 4rem;
            backdrop-filter: blur(10px);
        }
        
        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 2rem;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
        }
        
        .footer-section h3 {
            color: #333;
            margin-bottom: 1rem;
            font-size: 1.2rem;
        }
        
        .footer-section p,
        .footer-section a {
            color: #666;
            text-decoration: none;
            line-height: 1.6;
            margin-bottom: 0.5rem;
            display: block;
        }
        
        .footer-section a:hover {
            color: #007bff;
        }
        
        .footer-bottom {
            text-align: center;
            margin-top: 2rem;
            padding-top: 2rem;
            border-top: 1px solid #e0e0e0;
            color: #666;
        }
        
        .notification {
            position: fixed;
            top: 100px;
            right: 20px;
            padding: 1rem 1.5rem;
            border-radius: 10px;
            color: white;
            font-weight: 500;
            z-index: 1000;
            transform: translateX(400px);
            transition: transform 0.3s ease;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, #28a745, #20c997);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #dc3545, #c82333);
        }
        
        .notification.info {
            background: linear-gradient(135deg, #17a2b8, #138496);
        }
        
        .pro-locked {
            background: rgba(255, 193, 7, 0.1);
            border: 2px dashed #ffc107;
            border-radius: 10px;
            padding: 2rem;
            text-align: center;
            margin: 1rem 0;
        }
        
        .pro-locked-icon {
            font-size: 3rem;
            color: #ffc107;
            margin-bottom: 1rem;
        }
        
        .pro-locked-text {
            font-size: 1.1rem;
            color: #333;
            margin-bottom: 1rem;
        }
        
        .upgrade-btn {
            background: linear-gradient(135deg, #ffc107, #e0a800);
            color: #333;
            border: none;
            padding: 0.8rem 2rem;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .upgrade-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(255, 193, 7, 0.3);
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            z-index: 10000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 5% auto;
            padding: 0;
            border-radius: 20px;
            width: 90%;
            max-width: 500px;
            position: relative;
            overflow: hidden;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .modal-header {
            background: rgba(255,255,255,0.1);
            padding: 2rem;
            text-align: center;
            border-bottom: 1px solid rgba(255,255,255,0.2);
        }

        .modal-header h2 {
            color: white;
            margin-bottom: 0.5rem;
            font-size: 1.8rem;
        }

        .modal-header p {
            color: rgba(255,255,255,0.8);
            font-size: 1rem;
        }

        .modal-body {
            padding: 2rem;
        }

        .modal-body .input-group {
            margin-bottom: 1rem;
        }

        .modal-body input {
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.3);
            color: white;
            padding: 1rem;
            border-radius: 10px;
            width: 100%;
            font-size: 1rem;
        }

        .modal-body input::placeholder {
            color: rgba(255,255,255,0.6);
        }

        .modal-footer {
            padding: 1.5rem 2rem 2rem;
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
        }

        .btn-secondary {
            background: rgba(255,255,255,0.2);
            color: white;
            border: 1px solid rgba(255,255,255,0.3);
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn-secondary:hover {
            background: rgba(255,255,255,0.3);
        }

        .btn {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 0.75rem 1.5rem;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.4);
        }

        .close {
            position: absolute;
            right: 1rem;
            top: 1rem;
            color: rgba(255,255,255,0.8);
            font-size: 2rem;
            font-weight: bold;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close:hover {
            background: rgba(255,255,255,0.2);
            color: white;
        }
        
        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .hero-title {
                font-size: 2rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .container {
                padding: 0 1rem;
            }
            
            .hero-section,
            .analysis-container {
                padding: 2rem 1.5rem;
            }
            
            .sample-buttons {
                flex-direction: column;
            }
            
            .sample-btn {
                width: 100%;
            }
            
            .tier-selection {
                flex-direction: column;
            }
            
            .tier-option {
                max-width: none;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .action-btn {
                width: 100%;
            }
            
            .score-visualization {
                grid-template-columns: 1fr;
            }
            
            .summary-highlights {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .methodology-grid {
                grid-template-columns: 1fr;
            }

            .beta-content {
                flex-direction: column;
                gap: 8px;
            }

            .modal-content {
                margin: 10% auto;
                width: 95%;
            }

            .modal-footer {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <!-- Beta Banner -->
    <div class="beta-banner">
        <div class="beta-content">
            <span class="beta-badge">BETA</span>
            <span>🚀 Join our exclusive beta program and get early access to premium features!</span>
            <button class="beta-join-btn" onclick="openBetaModal()">Join Beta</button>
        </div>
    </div>

    <!-- Header -->
    <header>
        <nav>
            <a href="index.html" class="logo">Facts & Fakes AI</a>
            <ul class="nav-links">
                <li><a href="index.html">Home</a></li>
                <li><a href="news.html">News Verify</a></li>
                <li><a href="unified.html" class="active">Content Check</a></li>
                <li><a href="imageanalysis.html">Image Analysis</a></li>
                <li><a href="missionstatement.html">Mission</a></li>
                <li><a href="pricingplan.html">Pricing</a></li>
                <li><a href="contact.html">Contact</a></li>
            </ul>
        </nav>
    </header>

    <div class="container">
        <!-- Hero Section -->
        <section class="hero-section">
            <h1 class="hero-title">Professional AI Detection Aid</h1>
            <p class="hero-subtitle">
                Designed for Accuracy and Transparency - Advanced detection aid that analyzes writing patterns, 
                checks for similarities across databases, and provides detailed explanations of our methodology.
            </p>
            
            <!-- Disclaimer -->
            <div class="disclaimer">
                <div class="disclaimer-title">
                    ⚠️ Important: This is a Detection Aid, Not Definitive Proof
                </div>
                <div class="disclaimer-content">
                    <strong>What this tool provides:</strong> Professional analysis with confidence scores, detailed explanations, and transparent methodology to help you make informed decisions.<br>
                    <strong>What this tool doesn't provide:</strong> Absolute certainty or definitive proof. No AI detection tool is 100% accurate. Use results as one factor in your evaluation, not as the sole determining factor.<br>
                    <strong>Best practice:</strong> Combine our analysis with your own judgment, additional verification methods, and direct conversation when appropriate.
                </div>
            </div>
            
            <!-- Tools Grid -->
            <div class="tools-grid">
                <div class="tool-card">
                    <span class="tool-icon">🤖</span>
                    <h3 class="tool-title">AI Detection</h3>
                    <p class="tool-desc">Analyzes writing patterns, vocabulary usage, sentence structure, and linguistic fingerprints</p>
                </div>
                <div class="tool-card">
                    <span class="tool-icon">📋</span>
                    <h3 class="tool-title">Similarity Analysis</h3>
                    <p class="tool-desc">Searches across databases for matching content, paraphrased text, and similar passages</p>
                </div>
                <div class="tool-card">
                    <span class="tool-icon">📊</span>
                    <h3 class="tool-title">Content Breakdown</h3>
                    <p class="tool-desc">Examines readability, sentiment, authorship style, and linguistic characteristics</p>
                </div>
                <div class="tool-card">
                    <span class="tool-icon">🔍</span>
                    <h3 class="tool-title">Transparent Analysis</h3>
                    <p class="tool-desc">Shows exactly what we analyzed, how scores were calculated, and confidence levels</p>
                </div>
                <div class="tool-card">
                    <span class="tool-icon">📁</span>
                    <h3 class="tool-title">Multi-Format Support</h3>
                    <p class="tool-desc">Processes PDF, DOCX, TXT files with accurate text extraction and formatting preservation</p>
                </div>
                <div class="tool-card">
                    <span class="tool-icon">🎯</span>
                    <h3 class="tool-title">Professional Reporting</h3>
                    <p class="tool-desc">Detailed reports with visual indicators, explanations, and actionable insights</p>
                </div>
            </div>
        </section>

        <!-- Analysis Container -->
        <section class="analysis-container">
            <!-- Input Section -->
            <div class="input-section">
                <div class="input-group">
                    <label for="textInput" class="input-label">Enter Text for Analysis</label>
                    <textarea 
                        id="textInput" 
                        class="text-input" 
                        placeholder="Paste your content here for comprehensive analysis. We'll examine writing patterns, check for similarities, and provide detailed insights with explanations. Minimum 50 characters required for meaningful results..."
                    ></textarea>
                    
                    <!-- Sample Text Buttons -->
                    <div class="sample-buttons">
                        <button class="sample-btn" onclick="loadSampleText('ai')">🤖 AI-Generated Sample</button>
                        <button class="sample-btn" onclick="loadSampleText('human')">👤 Human-Written Sample</button>
                        <button class="sample-btn" onclick="loadSampleText('academic')">🎓 Academic Sample</button>
                        <button class="sample-btn" onclick="loadSampleText('news')">📰 News Sample</button>
                    </div>
                </div>

                <!-- File Upload Section -->
                <div class="file-upload-section" id="fileUploadSection">
                    <input type="file" id="fileInput" class="file-input" accept=".txt,.pdf,.doc,.docx,.csv,.xlsx,.xls">
                    <label for="fileInput" class="file-upload-label">
                        📁 Choose File or Drag & Drop
                    </label>
                    <p style="margin-top: 1rem; color: #666; font-size: 0.9rem;">
                        Supported formats: TXT, PDF, DOC, DOCX, CSV, XLSX, XLS (Max 50MB)
                    </p>
                </div>

                <!-- Tier Selection -->
                <div class="tier-selection">
                    <div class="tier-option">
                        <input type="radio" id="tierFree" name="tier" value="free" class="tier-radio" checked>
                        <label for="tierFree" class="tier-label">
                            <div class="tier-name">Free Analysis</div>
                            <div class="tier-desc">Basic detection with core insights</div>
                        </label>
                    </div>
                    <div class="tier-option">
                        <input type="radio" id="tierPro" name="tier" value="pro" class="tier-radio">
                        <label for="tierPro" class="tier-label">
                            <div class="tier-name">Pro Analysis</div>
                            <div class="tier-desc">Complete analysis with all features</div>
                        </label>
                    </div>
                </div>

                <!-- Analyze Button -->
                <button class="analyze-btn" id="analyzeBtn" onclick="startAnalysis()">
                    🔍 Begin Professional Analysis
                </button>
            </div>

            <!-- Progress Section -->
            <div class="progress-section" id="progressSection">
                <div class="progress-container">
                    <h3 class="progress-title">🔄 Analysis in Progress</h3>
                    <div class="progress-bars">
                        <div class="progress-item">
                            <span class="progress-label">AI Detection</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressAI"></div>
                            </div>
                            <span class="progress-percent" id="percentAI">0%</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-label">Similarity Check</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressPlagiarism"></div>
                            </div>
                            <span class="progress-percent" id="percentPlagiarism">0%</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-label">Content Analysis</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressContent"></div>
                            </div>
                            <span class="progress-percent" id="percentContent">0%</span>
                        </div>
                        <div class="progress-item">
                            <span class="progress-label">Final Processing</span>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFinal"></div>
                            </div>
                            <span class="progress-percent" id="percentFinal">0%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Results Section -->
            <div class="results-section" id="resultsSection">
                <!-- Conversational Summary -->
                <div class="results-summary" id="resultsSummary">
                    <h2 class="summary-title">
                        📊 Analysis Complete - Here's What We Found
                    </h2>
                    <div class="summary-text" id="summaryText">
                        <!-- Populated by JavaScript -->
                    </div>
                    <div class="summary-highlights" id="summaryHighlights">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Visual Infographics -->
                <div class="infographic-container">
                    <h3 class="infographic-title">📈 Visual Analysis Results</h3>
                    <div class="score-visualization" id="scoreVisualization">
                        <!-- Populated by JavaScript -->
                    </div>
                </div>

                <!-- Detailed Analysis Panels -->
                <div class="detailed-panels" id="detailedPanels">
                    <!-- Populated by JavaScript -->
                </div>

                <!-- Action Buttons -->
                <div class="action-buttons">
                    <button class="action-btn btn-primary" onclick="downloadReport()">
                        📄 Download Detailed Report
                    </button>
                    <button class="action-btn btn-secondary" onclick="resetAnalysis()">
                        🔄 Analyze New Content
                    </button>
                    <button class="action-btn btn-success" onclick="shareResults()">
                        📤 Share Results
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Beta Modal -->
    <div id="betaModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeBetaModal()">&times;</span>
            <div class="modal-header">
                <h2>🚀 Join Our Beta Program</h2>
                <p>Get exclusive early access to premium features and help shape the future of AI content verification!</p>
            </div>
            <div class="modal-body">
                <form id="betaSignupForm">
                    <div class="input-group">
                        <input type="email" id="betaEmail" placeholder="Enter your email address" required>
                    </div>
                    <div class="input-group">
                        <input type="text" id="betaName" placeholder="Your name (optional)">
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" onclick="closeBetaModal()">Cancel</button>
                <button type="button" class="btn" onclick="submitBetaSignup()">Join Beta Program</button>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>🔍 Facts & Fakes AI</h3>
                <p>Professional AI detection aid designed for accuracy and transparency in content verification.</p>
            </div>
            <div class="footer-section">
                <h3>Analysis Tools</h3>
                <a href="unified.html">AI Detection Aid</a>
                <a href="news.html">News Verification</a>
                <a href="imageanalysis.html">Image Analysis</a>
                <a href="contact.html">Contact Support</a>
            </div>
            <div class="footer-section">
                <h3>Company</h3>
                <a href="missionstatement.html">Mission Statement</a>
                <a href="pricingplan.html">Pricing Plans</a>
                <a href="contact.html">Contact Us</a>
                <a href="contact.html">Privacy Policy</a>
            </div>
            <div class="footer-section">
                <h3>Contact Information</h3>
                <p>📧 contact@factsandfakes.ai</p>
                <p>📞 +1 (555) 123-4567</p>
                <p>🌍 San Francisco, CA</p>
                <p>🕒 24/7 Support Available</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Facts & Fakes AI. Professional AI Detection Aid - Designed for Accuracy and Transparency.</p>
        </div>
    </footer>

    <!-- Notification Container -->
    <div id="notification" class="notification"></div>

    <script>
        // Initialize Analytics Tracker
        let analyticsTracker;
        document.addEventListener('DOMContentLoaded', function() {
            analyticsTracker = new AnalyticsTracker();
            console.log('Facts & Fakes AI - Professional AI Detection Aid Ready');
            showNotification('Welcome! Enter content or upload a file to begin professional analysis.', 'info');
        });

        // Beta Modal Functions
        function openBetaModal() {
            document.getElementById('betaModal').style.display = 'block';
            gtag('event', 'beta_modal_opened', {
                event_category: 'Conversion',
                event_label: 'from_unified_page',
                session_id: analyticsTracker?.sessionId
            });
        }

        function closeBetaModal() {
            document.getElementById('betaModal').style.display = 'none';
        }

        function submitBetaSignup() {
            const email = document.getElementById('betaEmail').value;
            const name = document.getElementById('betaName').value;

            if (!email) {
                alert('Please enter your email address');
                return;
            }

            // Track beta signup attempt
            gtag('event', 'beta_signup_attempt', {
                event_category: 'Conversion',
                session_id: analyticsTracker?.sessionId
            });

            // Try to submit to backend, fall back to demo mode
            fetch('/api/beta-signup', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ email, name })
            })
            .then(response => response.json())
            .then(data => {
                if (analyticsTracker) {
                    analyticsTracker.trackBetaSignup(email);
                }
                alert('🎉 Welcome to the beta program! Check your email for next steps.');
                closeBetaModal();
                document.getElementById('betaSignupForm').reset();
            })
            .catch(error => {
                // Demo mode fallback
                console.log('Demo mode: Beta signup for', email);
                if (analyticsTracker) {
                    analyticsTracker.trackBetaSignup(email);
                }
                alert('🎉 Thanks for your interest! Beta program signup recorded.');
                closeBetaModal();
                document.getElementById('betaSignupForm').reset();
            });
        }

        // Close modal when clicking outside
        window.onclick = function(event) {
            const modal = document.getElementById('betaModal');
            if (event.target === modal) {
                closeBetaModal();
            }
        }

        // Global variables
        let currentAnalysis = null;
        let progressIntervals = [];

        // Sample texts for testing
        const sampleTexts = {
            ai: "Artificial intelligence represents a paradigmatic shift in technological development, fundamentally transforming the landscape of computational capabilities. Through sophisticated machine learning algorithms and neural network architectures, AI systems demonstrate remarkable proficiency in pattern recognition, data analysis, and decision-making processes. Furthermore, the integration of advanced natural language processing capabilities enables these systems to comprehend and generate human-like text with unprecedented accuracy. Consequently, the applications of artificial intelligence span across numerous domains, including healthcare, finance, education, and scientific research, thereby revolutionizing traditional methodologies and establishing new benchmarks for efficiency and innovation.",
            human: "I've been thinking a lot about AI lately, and honestly, it's pretty wild how fast things are changing. Like, just a few years ago, we couldn't imagine having conversations with computers that actually made sense. Now my kids are using ChatGPT for homework help (don't tell their teachers lol). But seriously, I'm both excited and a bit worried about where this is all heading. Will robots take our jobs? Will they become smarter than us? I guess we'll find out soon enough. What do you think?",
            academic: "This study examines the correlation between social media usage patterns and academic performance among undergraduate students. The research methodology employed a mixed-methods approach, incorporating both quantitative surveys (n=1,247) and qualitative interviews (n=45) conducted across three universities. Preliminary findings suggest a statistically significant negative correlation (r=-0.34, p<0.001) between excessive social media consumption and GPA scores. However, the data also indicates that structured, educational use of social platforms may enhance collaborative learning outcomes. Further longitudinal studies are recommended to establish causal relationships.",
            news: "Breaking: Local authorities confirmed this morning that the downtown renovation project will proceed as scheduled despite recent budget concerns. Mayor Sarah Johnson announced during a press conference that additional funding has been secured through state grants and private partnerships. 'This investment in our community's future reflects our commitment to economic growth and urban revitalization,' Johnson stated. The $2.3 million project is expected to create 150 temporary jobs and improve infrastructure for local businesses. Construction is set to begin next month and conclude by year's end."
        };

        // Load sample text function
        function loadSampleText(type) {
            const textInput = document.getElementById('textInput');
            textInput.value = sampleTexts[type];
            
            // Track sample text usage
            gtag('event', 'sample_text_loaded', {
                event_category: 'Content Interaction',
                event_label: type,
                session_id: analyticsTracker?.sessionId
            });
            
            showNotification('Sample text loaded successfully!', 'success');
        }

        // File upload handling
        document.getElementById('fileInput').addEventListener('change', handleFileUpload);
        
        // Drag and drop functionality
        const fileUploadSection = document.getElementById('fileUploadSection');
        
        fileUploadSection.addEventListener('dragover', (e) => {
            e.preventDefault();
            fileUploadSection.classList.add('dragover');
        });
        
        fileUploadSection.addEventListener('dragleave', () => {
            fileUploadSection.classList.remove('dragover');
        });
        
        fileUploadSection.addEventListener('drop', (e) => {
            e.preventDefault();
            fileUploadSection.classList.remove('dragover');
            
            const files = e.dataTransfer.files;
            if (files.length > 0) {
                document.getElementById('fileInput').files = files;
                handleFileUpload({ target: { files: files } });
            }
        });

        async function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            // Track file upload attempt
            gtag('event', 'file_upload_attempt', {
                event_category: 'File Upload',
                event_label: file.type,
                value: Math.round(file.size / 1024), // Size in KB
                session_id: analyticsTracker?.sessionId
            });

            if (file.size > 50 * 1024 * 1024) {
                showNotification('File too large. Maximum size is 50MB.', 'error');
                gtag('event', 'file_upload_error', {
                    event_category: 'File Upload',
                    event_label: 'file_too_large',
                    session_id: analyticsTracker?.sessionId
                });
                return;
            }

            showNotification('Extracting text from file...', 'info');

            try {
                const formData = new FormData();
                formData.append('file', file);

                const response = await fetch('/api/extract-text', {
                    method: 'POST',
                    body: formData
                });

                const result = await response.json();

                if (response.ok) {
                    document.getElementById('textInput').value = result.text;
                    showNotification(`Text extracted successfully! ${result.length} characters loaded.`, 'success');
                    
                    // Track successful file upload
                    gtag('event', 'file_upload_success', {
                        event_category: 'File Upload',
                        event_label: file.type,
                        value: result.length,
                        session_id: analyticsTracker?.sessionId
                    });
                } else {
                    showNotification(`Error: ${result.error}`, 'error');
                    gtag('event', 'file_upload_error', {
                        event_category: 'File Upload',
                        event_label: 'extraction_failed',
                        session_id: analyticsTracker?.sessionId
                    });
                }
            } catch (error) {
                console.error('File upload error:', error);
                showNotification('Failed to process file. Please try again.', 'error');
                if (analyticsTracker) {
                    analyticsTracker.trackError('file_upload', error.message);
                }
            }
        }

        // Start analysis function
        async function startAnalysis() {
            const textInput = document.getElementById('textInput');
            const text = textInput.value.trim();
            
            if (text.length < 50) {
                showNotification('Please enter at least 50 characters for meaningful analysis.', 'error');
                gtag('event', 'analysis_error', {
                    event_category: 'Analysis',
                    event_label: 'insufficient_text',
                    session_id: analyticsTracker?.sessionId
                });
                return;
            }

            const selectedTier = document.querySelector('input[name="tier"]:checked').value;
            
            // Track analysis start
            if (analyticsTracker) {
                analyticsTracker.trackAnalysisStart();
            }
            
            // Show progress section
            document.getElementById('progressSection').style.display = 'block';
            document.getElementById('resultsSection').style.display = 'none';
            document.getElementById('analyzeBtn').disabled = true;
            document.getElementById('analyzeBtn').textContent = '🔄 Analyzing...';

            // Start progress animation
            startProgressAnimation();

            try {
                const response = await fetch('/api/detect-ai', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        text: text,
                        analysis_type: selectedTier
                    })
                });

                const results = await response.json();
                
                if (response.ok) {
                    currentAnalysis = results;
                    displayResults(results, selectedTier);
                    
                    // Track successful analysis completion
                    if (analyticsTracker) {
                        analyticsTracker.trackAnalysisComplete(results);
                    }
                    
                    showNotification('Analysis completed successfully!', 'success');
                } else {
                    showNotification(`Analysis failed: ${results.error}`, 'error');
                    gtag('event', 'analysis_error', {
                        event_category: 'Analysis',
                        event_label: 'api_error',
                        session_id: analyticsTracker?.sessionId
                    });
                }
            } catch (error) {
                console.error('Analysis error:', error);
                showNotification('Network error. Please try again.', 'error');
                if (analyticsTracker) {
                    analyticsTracker.trackError('analysis_network', error.message);
                }
            } finally {
                // Clean up
                clearProgressIntervals();
                document.getElementById('progressSection').style.display = 'none';
                document.getElementById('analyzeBtn').disabled = false;
                document.getElementById('analyzeBtn').textContent = '🔍 Begin Professional Analysis';
            }
        }

        // Progress animation
        function startProgressAnimation() {
            const progressSteps = [
                { id: 'progressAI', percent: 'percentAI', duration: 2000 },
                { id: 'progressPlagiarism', percent: 'percentPlagiarism', duration: 3000 },
                { id: 'progressContent', percent: 'percentContent', duration: 2500 },
                { id: 'progressFinal', percent: 'percentFinal', duration: 1500 }
            ];

            progressSteps.forEach((step, index) => {
                setTimeout(() => {
                    animateProgress(step.id, step.percent, step.duration);
                }, index * 500);
            });
        }

        function animateProgress(progressId, percentId, duration) {
            const progressBar = document.getElementById(progressId);
            const percentElement = document.getElementById(percentId);
            let progress = 0;
            const increment = 100 / (duration / 50);

            const interval = setInterval(() => {
                progress += increment + (Math.random() * 0.5);
                progress = Math.min(progress, 100);
                
                progressBar.style.width = `${progress}%`;
                percentElement.textContent = `${Math.round(progress)}%`;

                if (progress >= 100) {
                    clearInterval(interval);
                }
            }, 50);

            progressIntervals.push(interval);
        }

        function clearProgressIntervals() {
            progressIntervals.forEach(interval => clearInterval(interval));
            progressIntervals = [];
        }

        // Display results function
        function displayResults(results, tier) {
            const resultsSection = document.getElementById('resultsSection');

            // Create conversational summary
            createConversationalSummary(results, tier);

            // Create visual infographics
            createScoreVisualization(results);

            // Create detailed panels
            createDetailedPanels(results, tier);

            // Show results
            resultsSection.style.display = 'block';
            resultsSection.scrollIntoView({ behavior: 'smooth' });

            // Track results view
            gtag('event', 'results_viewed', {
                event_category: 'Analysis',
                event_label: tier,
                session_id: analyticsTracker?.sessionId
            });
        }

        function createConversationalSummary(results, tier) {
            const summaryText = document.getElementById('summaryText');
            const summaryHighlights = document.getElementById('summaryHighlights');
            
            const ai = results.ai_detection || {};
            const plagiarism = results.plagiarism_detection || {};
            
            const aiProb = Math.round((ai.ai_probability || 0.5) * 100);
            const plagScore = Math.round((plagiarism.similarity_score || 0.05) * 100);
            const confidence = Math.round((ai.confidence || 0.75) * 100);

            let summaryContent = "";
            let overallAssessment = "";

            // Generate conversational explanation
            if (plagScore > 50) {
                summaryContent = `<strong>High Similarity Alert:</strong> Our analysis found significant similarities (${plagScore}%) with existing content in our database. This suggests portions of the text may match or closely resemble previously published material. The AI detection scored ${aiProb}% likelihood of artificial generation. <strong>What this means:</strong> The content shows strong patterns consistent with copied or closely paraphrased material, which warrants careful review.`;
                overallAssessment = "Requires Immediate Review";
            } else if (aiProb > 75) {
                summaryContent = `<strong>High AI Probability:</strong> Our analysis indicates a ${aiProb}% likelihood this content was generated by artificial intelligence. We examined writing patterns, vocabulary usage, sentence structure, and linguistic markers typical of AI-generated text. Similarity to existing content was low at ${plagScore}%. <strong>What this means:</strong> The writing style and patterns strongly suggest AI generation, though the content appears to be original rather than copied.`;
                overallAssessment = "Likely AI-Generated Content";
            } else if (aiProb > 50) {
                summaryContent = `<strong>Moderate AI Indicators:</strong> Our analysis found a ${aiProb}% probability of AI generation with ${confidence}% confidence in this assessment. The content shows some patterns consistent with AI writing but also contains human-like elements. Similarity analysis returned ${plagScore}% matches. <strong>What this means:</strong> The results are mixed - there are both AI indicators and human writing characteristics present.`;
                overallAssessment = "Mixed Indicators - Further Review Suggested";
            } else if (plagScore > 15) {
                summaryContent = `<strong>Moderate Similarity Found:</strong> While AI probability is relatively low at ${aiProb}%, we detected ${plagScore}% similarity with existing content. This could indicate partial matching, common phrasing, or paraphrased material. <strong>What this means:</strong> The writing appears more human-like, but shows some overlap with published content that should be verified.`;
                overallAssessment = "Verify Source Attribution";
            } else {
                summaryContent = `<strong>Content Appears Authentic:</strong> Our analysis shows a low AI probability of ${aiProb}% and minimal similarity (${plagScore}%) to existing content. The writing patterns, vocabulary choices, and linguistic characteristics are consistent with human authorship. <strong>What this means:</strong> The content displays strong indicators of original human writing with good confidence levels.`;
                overallAssessment = "Likely Original Human Content";
            }

            summaryText.innerHTML = summaryContent;

            // Create highlights
            summaryHighlights.innerHTML = `
                <div class="highlight-item">
                    <span class="highlight-value">${aiProb}%</span>
                    <div class="highlight-label">AI Probability</div>
                </div>
                <div class="highlight-item">
                    <span class="highlight-value">${plagScore}%</span>
                    <div class="highlight-label">Similarity Score</div>
                </div>
                <div class="highlight-item">
                    <span class="highlight-value">${confidence}%</span>
                    <div class="highlight-label">Confidence Level</div>
                </div>
                <div class="highlight-item">
                    <span class="highlight-value">${overallAssessment}</span>
                    <div class="highlight-label">Overall Assessment</div>
                </div>
            `;
        }

        function createScoreVisualization(results) {
            const container = document.getElementById('scoreVisualization');
            const ai = results.ai_detection || {};
            const plagiarism = results.plagiarism_detection || {};
            
            const scores = [
                {
                    label: 'AI Detection',
                    value: Math.round((ai.ai_probability || 0.5) * 100),
                    description: ai.classification || 'Analysis Complete',
                    color: getAIColor(ai.ai_probability || 0.5)
                },
                {
                    label: 'Similarity Check',
                    value: Math.round((plagiarism.similarity_score || 0.05) * 100),
                    description: plagiarism.assessment || 'Low Risk',
                    color: getPlagiarismColor(plagiarism.similarity_score || 0.05)
                },
                {
                    label: 'Confidence Level',
                    value: Math.round((ai.confidence || 0.75) * 100),
                    description: 'Analysis Reliability',
                    color: getConfidenceColor(ai.confidence || 0.75)
                }
            ];

            container.innerHTML = scores.map(score => {
                const circumference = 2 * Math.PI * 60;
                const strokeDasharray = `${(score.value / 100) * circumference} ${circumference}`;
                
                return `
                    <div class="score-meter">
                        <div class="meter-circle">
                            <svg class="meter-svg" viewBox="0 0 140 140">
                                <circle class="meter-bg" cx="70" cy="70" r="60"></circle>
                                <circle 
                                    class="meter-progress" 
                                    cx="70" 
                                    cy="70" 
                                    r="60"
                                    stroke="${score.color}"
                                    stroke-dasharray="${strokeDasharray}"
                                ></circle>
                            </svg>
                            <div class="meter-text">${score.value}%</div>
                        </div>
                        <div class="meter-label">${score.label}</div>
                        <div class="meter-desc">${score.description}</div>
                    </div>
                `;
            }).join('');
        }

        function createDetailedPanels(results, tier) {
            const container = document.getElementById('detailedPanels');
            
            const panels = [
                {
                    title: '🤖 AI Detection Analysis',
                    locked: false,
                    content: createAIDetectionContent(results.ai_detection || {})
                },
                {
                    title: '📋 Similarity Analysis Results',
                    locked: false,
                    content: createSimilarityContent(results.plagiarism_detection || {}, tier)
                },
                {
                    title: '📊 Advanced Content Analysis',
                    locked: tier === 'free',
                    content: createAdvancedAnalysisContent(results, tier)
                },
                {
                    title: '⚙️ Analysis Methodology & Scoring',
                    locked: false,
                    content: createMethodologyContent(results.methodology || {}, results)
                }
            ];

            container.innerHTML = panels.map((panel, index) => `
                <div class="detail-panel">
                    <div class="panel-header" onclick="togglePanel(${index})">
                        <span>${panel.title}</span>
                        ${panel.locked ? '<div class="panel-lock">🔒 PRO</div>' : ''}
                        <span class="panel-toggle">▼</span>
                    </div>
                    <div class="panel-content" id="panel-${index}">
                        ${panel.content}
                    </div>
                </div>
            `).join('');

            // Show first panel by default
            document.getElementById('panel-0').classList.add('active');
            document.querySelector('.panel-header').classList.add('active');
        }

        function createAIDetectionContent(aiData) {
            const features = aiData.linguistic_features || {};
            
            return `
                <div class="conversational-text">
                    <strong>What we analyzed:</strong> We examined your text using advanced pattern recognition to identify characteristics typical of AI-generated content. Our analysis looked at vocabulary complexity, sentence structure consistency, transition patterns, and linguistic markers.
                </div>
                
                <div class="highlight-box ${aiData.ai_probability > 0.7 ? 'warning' : aiData.ai_probability > 0.4 ? '' : 'success'}">
                    <strong>Key Finding:</strong> ${aiData.explanation || 'Analysis detected patterns in writing style, vocabulary usage, and sentence construction.'}
                </div>
                
                <div class="methodology-grid">
                    <div class="methodology-item">
                        <div class="methodology-label">AI Probability Score</div>
                        <div class="methodology-value">${Math.round((aiData.ai_probability || 0.5) * 100)}%</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Classification</div>
                        <div class="methodology-value">${aiData.classification || 'Unknown'}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Confidence Level</div>
                        <div class="methodology-value">${Math.round((aiData.confidence || 0.75) * 100)}%</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Analysis Method</div>
                        <div class="methodology-value">${aiData.analysis_method || 'Pattern Recognition'}</div>
                    </div>
                </div>
                
                <div class="conversational-text">
                    <strong>How we calculated this score:</strong> We analyzed linguistic patterns, vocabulary sophistication, sentence structure consistency, and compared against known AI writing characteristics. The confidence level indicates how certain we are about this assessment.
                </div>
            `;
        }

        function createSimilarityContent(plagData, tier) {
            const matches = plagData.matches || [];
            
            let content = `
                <div class="conversational-text">
                    <strong>What we searched:</strong> We compared your text against our database of ${plagData.databases_searched || '50+ databases'} to find similar content, exact matches, and paraphrased material.
                </div>
                
                <div class="methodology-grid">
                    <div class="methodology-item">
                        <div class="methodology-label">Similarity Score</div>
                        <div class="methodology-value">${Math.round((plagData.similarity_score || 0.05) * 100)}%</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Matches Found</div>
                        <div class="methodology-value">${matches.length}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Databases Searched</div>
                        <div class="methodology-value">${plagData.databases_searched || '50+ sources'}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Assessment</div>
                        <div class="methodology-value">${plagData.assessment || 'Low Risk'}</div>
                    </div>
                </div>
            `;

            if (tier === 'free' && matches.length > 0) {
                content += `
                    <div class="pro-locked">
                        <div class="pro-locked-icon">🔒</div>
                        <div class="pro-locked-text">Detailed Match Locations - Pro Feature</div>
                        <p style="margin-bottom: 1rem; color: #666;">Upgrade to see exactly where similarities were found, including highlighted passages and source attribution.</p>
                        <button class="upgrade-btn" onclick="upgradeToPro()">View Detailed Matches</button>
                    </div>
                `;
            } else if (matches.length > 0) {
                content += `
                    <div class="conversational-text">
                        <strong>Specific matches found:</strong> Here are the exact locations where we detected similarities:
                    </div>
                    <div class="plagiarism-matches">
                `;
                
                matches.forEach(match => {
                    content += `
                        <div class="match-item">
                            <div class="match-header">
                                <strong>Source:</strong> ${match.source} | 
                                <strong>Similarity:</strong> ${Math.round(match.similarity * 100)}% | 
                                <strong>Type:</strong> ${match.type}
                            </div>
                            <div class="match-text">"${match.passage}"</div>
                        </div>
                    `;
                });
                
                content += `</div>`;
            } else {
                content += `
                    <div class="highlight-box">
                        <strong>✅ No significant matches found</strong> - Your content appears to be original with no substantial similarities to existing published material in our database.
                    </div>
                `;
            }

            content += `
                <div class="conversational-text">
                    <strong>What this means:</strong> ${plagData.assessment || 'Our analysis completed successfully with comprehensive database verification.'}
                </div>
            `;

            return content;
        }

        function createAdvancedAnalysisContent(results, tier) {
            if (tier === 'free') {
                return `
                    <div class="pro-locked">
                        <div class="pro-locked-icon">🔒</div>
                        <div class="pro-locked-text">Advanced Content Analysis - Pro Feature</div>
                        <p style="margin-bottom: 1rem; color: #666;">Unlock detailed analysis including:</p>
                        <ul style="text-align: left; margin: 1rem 0; color: #666;">
                            <li><strong>Sentiment Analysis:</strong> Emotional tone and objectivity scoring</li>
                            <li><strong>Readability Assessment:</strong> Grade level and complexity analysis</li>
                            <li><strong>Authorship Profiling:</strong> Writing style and experience indicators</li>
                            <li><strong>Linguistic Fingerprinting:</strong> Unique writing pattern identification</li>
                            <li><strong>Trend Analysis:</strong> Content relevance and engagement potential</li>
                        </ul>
                        <button class="upgrade-btn" onclick="upgradeToPro()">Upgrade to Pro</button>
                    </div>
                `;
            }

            // Pro tier content analysis
            const sentiment = results.sentiment_analysis || {};
            const readability = results.readability_analysis || {};
            const authorship = results.authorship_analysis || {};
            const linguistic = results.linguistic_fingerprinting || {};
            const trend = results.trend_analysis || {};

            return `
                <div class="conversational-text">
                    <strong>Deep content analysis:</strong> We examined the emotional tone, reading difficulty, writing style, and linguistic patterns to build a comprehensive profile of this content.
                </div>
                
                <div class="methodology-grid">
                    <div class="methodology-item">
                        <div class="methodology-label">Sentiment Score</div>
                        <div class="methodology-value">${sentiment.sentiment_score || 'N/A'}/100 (${sentiment.sentiment_label || 'Neutral'})</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Reading Level</div>
                        <div class="methodology-value">${readability.grade_level || 'Standard'}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Writing Profile</div>
                        <div class="methodology-value">${authorship.writing_profile || 'General Writer'}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Complexity Score</div>
                        <div class="methodology-value">${linguistic.fingerprint_complexity || 'N/A'}/100</div>
                    </div>
                </div>
                
                <div class="conversational-text">
                    <strong>What this tells us:</strong> The sentiment analysis reveals ${sentiment.sentiment_label || 'neutral'} emotional tone. The readability suggests ${readability.grade_level || 'standard'} complexity level. The writing style indicates ${authorship.writing_profile || 'general content creation'} characteristics.
                </div>
                
                ${trend.virality_potential ? `
                    <div class="highlight-box">
                        <strong>Content Engagement Potential:</strong> ${trend.trend_assessment || 'Standard content with moderate engagement potential'}
                    </div>
                ` : ''}
            `;
        }

        function createMethodologyContent(methodology, results) {
            return `
                <div class="conversational-text">
                    <strong>How we analyzed your content:</strong> Our analysis combines multiple detection methods to provide the most accurate assessment possible. Here's exactly what we did and how we calculated each score.
                </div>
                
                <div class="methodology-grid">
                    <div class="methodology-item">
                        <div class="methodology-label">AI Detection Method</div>
                        <div class="methodology-value">${methodology.ai_models_used || 'Advanced Pattern Analysis'}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Processing Time</div>
                        <div class="methodology-value">${methodology.processing_time || '6 seconds'}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Analysis Depth</div>
                        <div class="methodology-value">${methodology.analysis_depth || 'Comprehensive'}</div>
                    </div>
                    <div class="methodology-item">
                        <div class="methodology-label">Database Coverage</div>
                        <div class="methodology-value">${methodology.plagiarism_databases || '50+ sources'}</div>
                    </div>
                </div>
                
                <div class="conversational-text">
                    <strong>AI Detection Scoring:</strong> We analyzed linguistic patterns, vocabulary complexity, sentence structure, and transition usage. The AI probability score reflects how closely the writing matches known AI-generated content patterns.
                </div>
                
                <div class="conversational-text">
                    <strong>Similarity Detection:</strong> We searched across academic databases, web content, and published materials to find matching or similar passages. The similarity score represents the percentage of content that matches existing sources.
                </div>
                
                <div class="conversational-text">
                    <strong>Confidence Calculation:</strong> Our confidence level indicates how certain we are about the results. Higher confidence means the patterns were clear and consistent. Lower confidence suggests mixed or ambiguous indicators.
                </div>
                
                <div class="highlight-box">
                    <strong>Important Note:</strong> These scores are analytical aids, not definitive judgments. We recommend using these results as one factor in your overall assessment, combined with your own expertise and additional verification methods.
                </div>
            `;
        }

        // Helper functions
        function getAIColor(probability) {
            if (probability >= 0.8) return '#dc3545';
            if (probability >= 0.6) return '#ffc107';
            if (probability >= 0.4) return '#17a2b8';
            return '#28a745';
        }

        function getPlagiarismColor(score) {
            if (score >= 0.5) return '#dc3545';
            if (score >= 0.2) return '#ffc107';
            if (score >= 0.1) return '#17a2b8';
            return '#28a745';
        }

        function getConfidenceColor(confidence) {
            if (confidence >= 0.9) return '#28a745';
            if (confidence >= 0.7) return '#17a2b8';
            if (confidence >= 0.5) return '#ffc107';
            return '#dc3545';
        }

        // Panel toggle function
        function togglePanel(index) {
            const panel = document.getElementById(`panel-${index}`);
            const header = panel.previousElementSibling;
            
            panel.classList.toggle('active');
            header.classList.toggle('active');

            // Track panel interaction
            gtag('event', 'panel_toggled', {
                event_category: 'Results Interaction',
                event_label: `panel_${index}`,
                session_id: analyticsTracker?.sessionId
            });
        }

        // Action functions
        function downloadReport() {
            if (!currentAnalysis) {
                showNotification('No analysis results to download.', 'error');
                return;
            }

            const reportData = {
                timestamp: new Date().toISOString(),
                analysis: currentAnalysis,
                text_length: document.getElementById('textInput').value.length,
                summary: document.getElementById('summaryText').innerHTML
            };

            const blob = new Blob([JSON.stringify(reportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `ai-analysis-report-${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);

            // Track download
            gtag('event', 'report_downloaded', {
                event_category: 'Results Interaction',
                session_id: analyticsTracker?.sessionId
            });

            showNotification('Detailed report downloaded successfully!', 'success');
        }

        function resetAnalysis() {
            document.getElementById('textInput').value = '';
            document.getElementById('fileInput').value = '';
            document.getElementById('progressSection').style.display = 'none';
            document.getElementById('resultsSection').style.display = 'none';
            document.querySelector('input[name="tier"][value="free"]').checked = true;
            currentAnalysis = null;

            // Track reset
            gtag('event', 'analysis_reset', {
                event_category: 'User Interaction',
                session_id: analyticsTracker?.sessionId
            });

            showNotification('Ready for new analysis.', 'info');
        }

        function shareResults() {
            if (!currentAnalysis) {
                showNotification('No analysis results to share.', 'error');
                return;
            }

            const ai = currentAnalysis.ai_detection || {};
            const plag = currentAnalysis.plagiarism_detection || {};
            
            const shareText = `Professional AI Detection Analysis Results:

🤖 AI Probability: ${Math.round((ai.ai_probability || 0.5) * 100)}%
📋 Similarity Score: ${Math.round((plag.similarity_score || 0.05) * 100)}%
🎯 Confidence Level: ${Math.round((ai.confidence || 0.75) * 100)}%

Assessment: ${currentAnalysis.overall_assessment || 'Professional analysis completed'}

Analyzed with Facts & Fakes AI - Professional AI Detection Aid
https://factsandfakes.ai/unified`;

            // Track share attempt
            gtag('event', 'results_shared', {
                event_category: 'Results Interaction',
                session_id: analyticsTracker?.sessionId
            });

            if (navigator.share) {
                navigator.share({
                    title: 'AI Detection Analysis Results',
                    text: shareText
                });
            } else {
                navigator.clipboard.writeText(shareText).then(() => {
                    showNotification('Results copied to clipboard!', 'success');
                }).catch(() => {
                    showNotification('Unable to copy to clipboard.', 'error');
                });
            }
        }

        function upgradeToPro() {
            document.querySelector('input[name="tier"][value="pro"]').checked = true;
            
            // Track pro upgrade interest
            gtag('event', 'pro_tier_selected', {
                event_category: 'Conversion',
                event_label: 'upgrade_prompt',
                session_id: analyticsTracker?.sessionId
            });

            showNotification('Pro tier selected! Re-run analysis for complete results with detailed insights.', 'info');
        }

        // Notification system
        function showNotification(message, type = 'info') {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.className = `notification ${type}`;
            notification.classList.add('show');

            setTimeout(() => {
                notification.classList.remove('show');
            }, 4000);
        }
    </script>
</body>
</html>
